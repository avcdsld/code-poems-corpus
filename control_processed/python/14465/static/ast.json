{
  "type": "module",
  "start": {
    "row": 0,
    "column": 0
  },
  "end": {
    "row": 100,
    "column": 36
  },
  "text": "def _to_dataframe_bqstorage(self, bqstorage_client, dtypes, progress_bar=None):\n        \"\"\"Use (faster, but billable) BQ Storage API to construct DataFrame.\"\"\"\n        if bigquery_storage_v1beta1 is None:\n            raise ValueError(_NO_BQSTORAGE_ERROR)\n\n        if \"$\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )\n        if \"@\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )\n\n        read_options = bigquery_storage_v1beta1.types.TableReadOptions()\n        if self._selected_fields is not None:\n            for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)\n\n        session = bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )\n\n        # We need to parse the schema manually so that we can rearrange the\n        # columns.\n        schema = json.loads(session.avro_schema.schema)\n        columns = [field[\"name\"] for field in schema[\"fields\"]]\n\n        # Avoid reading rows from an empty table. pandas.concat will fail on an\n        # empty list.\n        if not session.streams:\n            return pandas.DataFrame(columns=columns)\n\n        # Use _to_dataframe_finished to notify worker threads when to quit.\n        # See: https://stackoverflow.com/a/29237343/101923\n        self._to_dataframe_finished = False\n\n        # Create a queue to track progress updates across threads.\n        worker_queue = _NoopProgressBarQueue()\n        progress_queue = None\n        progress_thread = None\n        if progress_bar is not None:\n            worker_queue = queue.Queue()\n            progress_queue = queue.Queue()\n            progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )\n            progress_thread.start()\n\n        def get_frames(pool):\n            frames = []\n\n            # Manually submit jobs and wait for download to complete rather\n            # than using pool.map because pool.map continues running in the\n            # background even if there is an exception on the main thread.\n            # See: https://github.com/googleapis/google-cloud-python/pull/7698\n            not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]\n\n            while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)\n\n            return frames\n\n        with concurrent.futures.ThreadPoolExecutor() as pool:\n            try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()\n\n        # Update the progress bar one last time to close it.\n        self._process_progress_updates(progress_queue, progress_bar)\n        return pandas.concat(frames)",
  "children": [
    {
      "type": "function_definition",
      "start": {
        "row": 0,
        "column": 0
      },
      "end": {
        "row": 100,
        "column": 36
      },
      "text": "def _to_dataframe_bqstorage(self, bqstorage_client, dtypes, progress_bar=None):\n        \"\"\"Use (faster, but billable) BQ Storage API to construct DataFrame.\"\"\"\n        if bigquery_storage_v1beta1 is None:\n            raise ValueError(_NO_BQSTORAGE_ERROR)\n\n        if \"$\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )\n        if \"@\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )\n\n        read_options = bigquery_storage_v1beta1.types.TableReadOptions()\n        if self._selected_fields is not None:\n            for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)\n\n        session = bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )\n\n        # We need to parse the schema manually so that we can rearrange the\n        # columns.\n        schema = json.loads(session.avro_schema.schema)\n        columns = [field[\"name\"] for field in schema[\"fields\"]]\n\n        # Avoid reading rows from an empty table. pandas.concat will fail on an\n        # empty list.\n        if not session.streams:\n            return pandas.DataFrame(columns=columns)\n\n        # Use _to_dataframe_finished to notify worker threads when to quit.\n        # See: https://stackoverflow.com/a/29237343/101923\n        self._to_dataframe_finished = False\n\n        # Create a queue to track progress updates across threads.\n        worker_queue = _NoopProgressBarQueue()\n        progress_queue = None\n        progress_thread = None\n        if progress_bar is not None:\n            worker_queue = queue.Queue()\n            progress_queue = queue.Queue()\n            progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )\n            progress_thread.start()\n\n        def get_frames(pool):\n            frames = []\n\n            # Manually submit jobs and wait for download to complete rather\n            # than using pool.map because pool.map continues running in the\n            # background even if there is an exception on the main thread.\n            # See: https://github.com/googleapis/google-cloud-python/pull/7698\n            not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]\n\n            while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)\n\n            return frames\n\n        with concurrent.futures.ThreadPoolExecutor() as pool:\n            try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()\n\n        # Update the progress bar one last time to close it.\n        self._process_progress_updates(progress_queue, progress_bar)\n        return pandas.concat(frames)",
      "children": [
        {
          "type": "def",
          "start": {
            "row": 0,
            "column": 0
          },
          "end": {
            "row": 0,
            "column": 3
          },
          "text": "def"
        },
        {
          "type": "identifier",
          "start": {
            "row": 0,
            "column": 4
          },
          "end": {
            "row": 0,
            "column": 27
          },
          "text": "_to_dataframe_bqstorage"
        },
        {
          "type": "parameters",
          "start": {
            "row": 0,
            "column": 27
          },
          "end": {
            "row": 0,
            "column": 78
          },
          "text": "(self, bqstorage_client, dtypes, progress_bar=None)",
          "children": [
            {
              "type": "(",
              "start": {
                "row": 0,
                "column": 27
              },
              "end": {
                "row": 0,
                "column": 28
              },
              "text": "("
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 28
              },
              "end": {
                "row": 0,
                "column": 32
              },
              "text": "self"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 32
              },
              "end": {
                "row": 0,
                "column": 33
              },
              "text": ","
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 34
              },
              "end": {
                "row": 0,
                "column": 50
              },
              "text": "bqstorage_client"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 50
              },
              "end": {
                "row": 0,
                "column": 51
              },
              "text": ","
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 52
              },
              "end": {
                "row": 0,
                "column": 58
              },
              "text": "dtypes"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 58
              },
              "end": {
                "row": 0,
                "column": 59
              },
              "text": ","
            },
            {
              "type": "default_parameter",
              "start": {
                "row": 0,
                "column": 60
              },
              "end": {
                "row": 0,
                "column": 77
              },
              "text": "progress_bar=None",
              "children": [
                {
                  "type": "identifier",
                  "start": {
                    "row": 0,
                    "column": 60
                  },
                  "end": {
                    "row": 0,
                    "column": 72
                  },
                  "text": "progress_bar"
                },
                {
                  "type": "=",
                  "start": {
                    "row": 0,
                    "column": 72
                  },
                  "end": {
                    "row": 0,
                    "column": 73
                  },
                  "text": "="
                },
                {
                  "type": "none",
                  "start": {
                    "row": 0,
                    "column": 73
                  },
                  "end": {
                    "row": 0,
                    "column": 77
                  },
                  "text": "None"
                }
              ]
            },
            {
              "type": ")",
              "start": {
                "row": 0,
                "column": 77
              },
              "end": {
                "row": 0,
                "column": 78
              },
              "text": ")"
            }
          ]
        },
        {
          "type": ":",
          "start": {
            "row": 0,
            "column": 78
          },
          "end": {
            "row": 0,
            "column": 79
          },
          "text": ":"
        },
        {
          "type": "block",
          "start": {
            "row": 1,
            "column": 8
          },
          "end": {
            "row": 100,
            "column": 36
          },
          "text": "\"\"\"Use (faster, but billable) BQ Storage API to construct DataFrame.\"\"\"\n        if bigquery_storage_v1beta1 is None:\n            raise ValueError(_NO_BQSTORAGE_ERROR)\n\n        if \"$\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )\n        if \"@\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )\n\n        read_options = bigquery_storage_v1beta1.types.TableReadOptions()\n        if self._selected_fields is not None:\n            for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)\n\n        session = bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )\n\n        # We need to parse the schema manually so that we can rearrange the\n        # columns.\n        schema = json.loads(session.avro_schema.schema)\n        columns = [field[\"name\"] for field in schema[\"fields\"]]\n\n        # Avoid reading rows from an empty table. pandas.concat will fail on an\n        # empty list.\n        if not session.streams:\n            return pandas.DataFrame(columns=columns)\n\n        # Use _to_dataframe_finished to notify worker threads when to quit.\n        # See: https://stackoverflow.com/a/29237343/101923\n        self._to_dataframe_finished = False\n\n        # Create a queue to track progress updates across threads.\n        worker_queue = _NoopProgressBarQueue()\n        progress_queue = None\n        progress_thread = None\n        if progress_bar is not None:\n            worker_queue = queue.Queue()\n            progress_queue = queue.Queue()\n            progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )\n            progress_thread.start()\n\n        def get_frames(pool):\n            frames = []\n\n            # Manually submit jobs and wait for download to complete rather\n            # than using pool.map because pool.map continues running in the\n            # background even if there is an exception on the main thread.\n            # See: https://github.com/googleapis/google-cloud-python/pull/7698\n            not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]\n\n            while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)\n\n            return frames\n\n        with concurrent.futures.ThreadPoolExecutor() as pool:\n            try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()\n\n        # Update the progress bar one last time to close it.\n        self._process_progress_updates(progress_queue, progress_bar)\n        return pandas.concat(frames)",
          "children": [
            {
              "type": "expression_statement",
              "start": {
                "row": 1,
                "column": 8
              },
              "end": {
                "row": 1,
                "column": 79
              },
              "text": "\"\"\"Use (faster, but billable) BQ Storage API to construct DataFrame.\"\"\"",
              "children": [
                {
                  "type": "string",
                  "start": {
                    "row": 1,
                    "column": 8
                  },
                  "end": {
                    "row": 1,
                    "column": 79
                  },
                  "text": "\"\"\"Use (faster, but billable) BQ Storage API to construct DataFrame.\"\"\"",
                  "children": [
                    {
                      "type": "string_start",
                      "start": {
                        "row": 1,
                        "column": 8
                      },
                      "end": {
                        "row": 1,
                        "column": 11
                      },
                      "text": "\"\"\""
                    },
                    {
                      "type": "string_content",
                      "start": {
                        "row": 1,
                        "column": 11
                      },
                      "end": {
                        "row": 1,
                        "column": 76
                      },
                      "text": "Use (faster, but billable) BQ Storage API to construct DataFrame."
                    },
                    {
                      "type": "string_end",
                      "start": {
                        "row": 1,
                        "column": 76
                      },
                      "end": {
                        "row": 1,
                        "column": 79
                      },
                      "text": "\"\"\""
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 2,
                "column": 8
              },
              "end": {
                "row": 3,
                "column": 49
              },
              "text": "if bigquery_storage_v1beta1 is None:\n            raise ValueError(_NO_BQSTORAGE_ERROR)",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 2,
                    "column": 8
                  },
                  "end": {
                    "row": 2,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "comparison_operator",
                  "start": {
                    "row": 2,
                    "column": 11
                  },
                  "end": {
                    "row": 2,
                    "column": 43
                  },
                  "text": "bigquery_storage_v1beta1 is None",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 2,
                        "column": 11
                      },
                      "end": {
                        "row": 2,
                        "column": 35
                      },
                      "text": "bigquery_storage_v1beta1"
                    },
                    {
                      "type": "is",
                      "start": {
                        "row": 2,
                        "column": 36
                      },
                      "end": {
                        "row": 2,
                        "column": 38
                      },
                      "text": "is"
                    },
                    {
                      "type": "none",
                      "start": {
                        "row": 2,
                        "column": 39
                      },
                      "end": {
                        "row": 2,
                        "column": 43
                      },
                      "text": "None"
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 2,
                    "column": 43
                  },
                  "end": {
                    "row": 2,
                    "column": 44
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 3,
                    "column": 12
                  },
                  "end": {
                    "row": 3,
                    "column": 49
                  },
                  "text": "raise ValueError(_NO_BQSTORAGE_ERROR)",
                  "children": [
                    {
                      "type": "raise_statement",
                      "start": {
                        "row": 3,
                        "column": 12
                      },
                      "end": {
                        "row": 3,
                        "column": 49
                      },
                      "text": "raise ValueError(_NO_BQSTORAGE_ERROR)",
                      "children": [
                        {
                          "type": "raise",
                          "start": {
                            "row": 3,
                            "column": 12
                          },
                          "end": {
                            "row": 3,
                            "column": 17
                          },
                          "text": "raise"
                        },
                        {
                          "type": "call",
                          "start": {
                            "row": 3,
                            "column": 18
                          },
                          "end": {
                            "row": 3,
                            "column": 49
                          },
                          "text": "ValueError(_NO_BQSTORAGE_ERROR)",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 3,
                                "column": 18
                              },
                              "end": {
                                "row": 3,
                                "column": 28
                              },
                              "text": "ValueError"
                            },
                            {
                              "type": "argument_list",
                              "start": {
                                "row": 3,
                                "column": 28
                              },
                              "end": {
                                "row": 3,
                                "column": 49
                              },
                              "text": "(_NO_BQSTORAGE_ERROR)",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 3,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 3,
                                    "column": 29
                                  },
                                  "text": "("
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 3,
                                    "column": 29
                                  },
                                  "end": {
                                    "row": 3,
                                    "column": 48
                                  },
                                  "text": "_NO_BQSTORAGE_ERROR"
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 3,
                                    "column": 48
                                  },
                                  "end": {
                                    "row": 3,
                                    "column": 49
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 5,
                "column": 8
              },
              "end": {
                "row": 8,
                "column": 13
              },
              "text": "if \"$\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 5,
                    "column": 8
                  },
                  "end": {
                    "row": 5,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "comparison_operator",
                  "start": {
                    "row": 5,
                    "column": 11
                  },
                  "end": {
                    "row": 5,
                    "column": 38
                  },
                  "text": "\"$\" in self._table.table_id",
                  "children": [
                    {
                      "type": "string",
                      "start": {
                        "row": 5,
                        "column": 11
                      },
                      "end": {
                        "row": 5,
                        "column": 14
                      },
                      "text": "\"$\"",
                      "children": [
                        {
                          "type": "string_start",
                          "start": {
                            "row": 5,
                            "column": 11
                          },
                          "end": {
                            "row": 5,
                            "column": 12
                          },
                          "text": "\""
                        },
                        {
                          "type": "string_content",
                          "start": {
                            "row": 5,
                            "column": 12
                          },
                          "end": {
                            "row": 5,
                            "column": 13
                          },
                          "text": "$"
                        },
                        {
                          "type": "string_end",
                          "start": {
                            "row": 5,
                            "column": 13
                          },
                          "end": {
                            "row": 5,
                            "column": 14
                          },
                          "text": "\""
                        }
                      ]
                    },
                    {
                      "type": "in",
                      "start": {
                        "row": 5,
                        "column": 15
                      },
                      "end": {
                        "row": 5,
                        "column": 17
                      },
                      "text": "in"
                    },
                    {
                      "type": "attribute",
                      "start": {
                        "row": 5,
                        "column": 18
                      },
                      "end": {
                        "row": 5,
                        "column": 38
                      },
                      "text": "self._table.table_id",
                      "children": [
                        {
                          "type": "attribute",
                          "start": {
                            "row": 5,
                            "column": 18
                          },
                          "end": {
                            "row": 5,
                            "column": 29
                          },
                          "text": "self._table",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 5,
                                "column": 18
                              },
                              "end": {
                                "row": 5,
                                "column": 22
                              },
                              "text": "self"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 5,
                                "column": 22
                              },
                              "end": {
                                "row": 5,
                                "column": 23
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 5,
                                "column": 23
                              },
                              "end": {
                                "row": 5,
                                "column": 29
                              },
                              "text": "_table"
                            }
                          ]
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 5,
                            "column": 29
                          },
                          "end": {
                            "row": 5,
                            "column": 30
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 5,
                            "column": 30
                          },
                          "end": {
                            "row": 5,
                            "column": 38
                          },
                          "text": "table_id"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 5,
                    "column": 38
                  },
                  "end": {
                    "row": 5,
                    "column": 39
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 6,
                    "column": 12
                  },
                  "end": {
                    "row": 8,
                    "column": 13
                  },
                  "text": "raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )",
                  "children": [
                    {
                      "type": "raise_statement",
                      "start": {
                        "row": 6,
                        "column": 12
                      },
                      "end": {
                        "row": 8,
                        "column": 13
                      },
                      "text": "raise ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )",
                      "children": [
                        {
                          "type": "raise",
                          "start": {
                            "row": 6,
                            "column": 12
                          },
                          "end": {
                            "row": 6,
                            "column": 17
                          },
                          "text": "raise"
                        },
                        {
                          "type": "call",
                          "start": {
                            "row": 6,
                            "column": 18
                          },
                          "end": {
                            "row": 8,
                            "column": 13
                          },
                          "text": "ValueError(\n                \"Reading from a specific partition is not currently supported.\"\n            )",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 6,
                                "column": 18
                              },
                              "end": {
                                "row": 6,
                                "column": 28
                              },
                              "text": "ValueError"
                            },
                            {
                              "type": "argument_list",
                              "start": {
                                "row": 6,
                                "column": 28
                              },
                              "end": {
                                "row": 8,
                                "column": 13
                              },
                              "text": "(\n                \"Reading from a specific partition is not currently supported.\"\n            )",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 6,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 29
                                  },
                                  "text": "("
                                },
                                {
                                  "type": "string",
                                  "start": {
                                    "row": 7,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 7,
                                    "column": 79
                                  },
                                  "text": "\"Reading from a specific partition is not currently supported.\"",
                                  "children": [
                                    {
                                      "type": "string_start",
                                      "start": {
                                        "row": 7,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 7,
                                        "column": 17
                                      },
                                      "text": "\""
                                    },
                                    {
                                      "type": "string_content",
                                      "start": {
                                        "row": 7,
                                        "column": 17
                                      },
                                      "end": {
                                        "row": 7,
                                        "column": 78
                                      },
                                      "text": "Reading from a specific partition is not currently supported."
                                    },
                                    {
                                      "type": "string_end",
                                      "start": {
                                        "row": 7,
                                        "column": 78
                                      },
                                      "end": {
                                        "row": 7,
                                        "column": 79
                                      },
                                      "text": "\""
                                    }
                                  ]
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 8,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 8,
                                    "column": 13
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 9,
                "column": 8
              },
              "end": {
                "row": 12,
                "column": 13
              },
              "text": "if \"@\" in self._table.table_id:\n            raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 9,
                    "column": 8
                  },
                  "end": {
                    "row": 9,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "comparison_operator",
                  "start": {
                    "row": 9,
                    "column": 11
                  },
                  "end": {
                    "row": 9,
                    "column": 38
                  },
                  "text": "\"@\" in self._table.table_id",
                  "children": [
                    {
                      "type": "string",
                      "start": {
                        "row": 9,
                        "column": 11
                      },
                      "end": {
                        "row": 9,
                        "column": 14
                      },
                      "text": "\"@\"",
                      "children": [
                        {
                          "type": "string_start",
                          "start": {
                            "row": 9,
                            "column": 11
                          },
                          "end": {
                            "row": 9,
                            "column": 12
                          },
                          "text": "\""
                        },
                        {
                          "type": "string_content",
                          "start": {
                            "row": 9,
                            "column": 12
                          },
                          "end": {
                            "row": 9,
                            "column": 13
                          },
                          "text": "@"
                        },
                        {
                          "type": "string_end",
                          "start": {
                            "row": 9,
                            "column": 13
                          },
                          "end": {
                            "row": 9,
                            "column": 14
                          },
                          "text": "\""
                        }
                      ]
                    },
                    {
                      "type": "in",
                      "start": {
                        "row": 9,
                        "column": 15
                      },
                      "end": {
                        "row": 9,
                        "column": 17
                      },
                      "text": "in"
                    },
                    {
                      "type": "attribute",
                      "start": {
                        "row": 9,
                        "column": 18
                      },
                      "end": {
                        "row": 9,
                        "column": 38
                      },
                      "text": "self._table.table_id",
                      "children": [
                        {
                          "type": "attribute",
                          "start": {
                            "row": 9,
                            "column": 18
                          },
                          "end": {
                            "row": 9,
                            "column": 29
                          },
                          "text": "self._table",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 9,
                                "column": 18
                              },
                              "end": {
                                "row": 9,
                                "column": 22
                              },
                              "text": "self"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 9,
                                "column": 22
                              },
                              "end": {
                                "row": 9,
                                "column": 23
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 9,
                                "column": 23
                              },
                              "end": {
                                "row": 9,
                                "column": 29
                              },
                              "text": "_table"
                            }
                          ]
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 9,
                            "column": 29
                          },
                          "end": {
                            "row": 9,
                            "column": 30
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 9,
                            "column": 30
                          },
                          "end": {
                            "row": 9,
                            "column": 38
                          },
                          "text": "table_id"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 9,
                    "column": 38
                  },
                  "end": {
                    "row": 9,
                    "column": 39
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 10,
                    "column": 12
                  },
                  "end": {
                    "row": 12,
                    "column": 13
                  },
                  "text": "raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )",
                  "children": [
                    {
                      "type": "raise_statement",
                      "start": {
                        "row": 10,
                        "column": 12
                      },
                      "end": {
                        "row": 12,
                        "column": 13
                      },
                      "text": "raise ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )",
                      "children": [
                        {
                          "type": "raise",
                          "start": {
                            "row": 10,
                            "column": 12
                          },
                          "end": {
                            "row": 10,
                            "column": 17
                          },
                          "text": "raise"
                        },
                        {
                          "type": "call",
                          "start": {
                            "row": 10,
                            "column": 18
                          },
                          "end": {
                            "row": 12,
                            "column": 13
                          },
                          "text": "ValueError(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 10,
                                "column": 18
                              },
                              "end": {
                                "row": 10,
                                "column": 28
                              },
                              "text": "ValueError"
                            },
                            {
                              "type": "argument_list",
                              "start": {
                                "row": 10,
                                "column": 28
                              },
                              "end": {
                                "row": 12,
                                "column": 13
                              },
                              "text": "(\n                \"Reading from a specific snapshot is not currently supported.\"\n            )",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 10,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 10,
                                    "column": 29
                                  },
                                  "text": "("
                                },
                                {
                                  "type": "string",
                                  "start": {
                                    "row": 11,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 11,
                                    "column": 78
                                  },
                                  "text": "\"Reading from a specific snapshot is not currently supported.\"",
                                  "children": [
                                    {
                                      "type": "string_start",
                                      "start": {
                                        "row": 11,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 11,
                                        "column": 17
                                      },
                                      "text": "\""
                                    },
                                    {
                                      "type": "string_content",
                                      "start": {
                                        "row": 11,
                                        "column": 17
                                      },
                                      "end": {
                                        "row": 11,
                                        "column": 77
                                      },
                                      "text": "Reading from a specific snapshot is not currently supported."
                                    },
                                    {
                                      "type": "string_end",
                                      "start": {
                                        "row": 11,
                                        "column": 77
                                      },
                                      "end": {
                                        "row": 11,
                                        "column": 78
                                      },
                                      "text": "\""
                                    }
                                  ]
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 12,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 12,
                                    "column": 13
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 14,
                "column": 8
              },
              "end": {
                "row": 14,
                "column": 72
              },
              "text": "read_options = bigquery_storage_v1beta1.types.TableReadOptions()",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 14,
                    "column": 8
                  },
                  "end": {
                    "row": 14,
                    "column": 72
                  },
                  "text": "read_options = bigquery_storage_v1beta1.types.TableReadOptions()",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 14,
                        "column": 8
                      },
                      "end": {
                        "row": 14,
                        "column": 20
                      },
                      "text": "read_options"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 14,
                        "column": 21
                      },
                      "end": {
                        "row": 14,
                        "column": 22
                      },
                      "text": "="
                    },
                    {
                      "type": "call",
                      "start": {
                        "row": 14,
                        "column": 23
                      },
                      "end": {
                        "row": 14,
                        "column": 72
                      },
                      "text": "bigquery_storage_v1beta1.types.TableReadOptions()",
                      "children": [
                        {
                          "type": "attribute",
                          "start": {
                            "row": 14,
                            "column": 23
                          },
                          "end": {
                            "row": 14,
                            "column": 70
                          },
                          "text": "bigquery_storage_v1beta1.types.TableReadOptions",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 14,
                                "column": 23
                              },
                              "end": {
                                "row": 14,
                                "column": 53
                              },
                              "text": "bigquery_storage_v1beta1.types",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 14,
                                    "column": 23
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 47
                                  },
                                  "text": "bigquery_storage_v1beta1"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 14,
                                    "column": 47
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 48
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 14,
                                    "column": 48
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 53
                                  },
                                  "text": "types"
                                }
                              ]
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 14,
                                "column": 53
                              },
                              "end": {
                                "row": 14,
                                "column": 54
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 14,
                                "column": 54
                              },
                              "end": {
                                "row": 14,
                                "column": 70
                              },
                              "text": "TableReadOptions"
                            }
                          ]
                        },
                        {
                          "type": "argument_list",
                          "start": {
                            "row": 14,
                            "column": 70
                          },
                          "end": {
                            "row": 14,
                            "column": 72
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 14,
                                "column": 70
                              },
                              "end": {
                                "row": 14,
                                "column": 71
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 14,
                                "column": 71
                              },
                              "end": {
                                "row": 14,
                                "column": 72
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 15,
                "column": 8
              },
              "end": {
                "row": 17,
                "column": 63
              },
              "text": "if self._selected_fields is not None:\n            for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 15,
                    "column": 8
                  },
                  "end": {
                    "row": 15,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "comparison_operator",
                  "start": {
                    "row": 15,
                    "column": 11
                  },
                  "end": {
                    "row": 15,
                    "column": 44
                  },
                  "text": "self._selected_fields is not None",
                  "children": [
                    {
                      "type": "attribute",
                      "start": {
                        "row": 15,
                        "column": 11
                      },
                      "end": {
                        "row": 15,
                        "column": 32
                      },
                      "text": "self._selected_fields",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 15,
                            "column": 11
                          },
                          "end": {
                            "row": 15,
                            "column": 15
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 15,
                            "column": 15
                          },
                          "end": {
                            "row": 15,
                            "column": 16
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 15,
                            "column": 16
                          },
                          "end": {
                            "row": 15,
                            "column": 32
                          },
                          "text": "_selected_fields"
                        }
                      ]
                    },
                    {
                      "type": "is not",
                      "start": {
                        "row": 15,
                        "column": 33
                      },
                      "end": {
                        "row": 15,
                        "column": 35
                      },
                      "text": "is"
                    },
                    {
                      "type": "is not",
                      "start": {
                        "row": 15,
                        "column": 36
                      },
                      "end": {
                        "row": 15,
                        "column": 39
                      },
                      "text": "not"
                    },
                    {
                      "type": "none",
                      "start": {
                        "row": 15,
                        "column": 40
                      },
                      "end": {
                        "row": 15,
                        "column": 44
                      },
                      "text": "None"
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 15,
                    "column": 44
                  },
                  "end": {
                    "row": 15,
                    "column": 45
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 16,
                    "column": 12
                  },
                  "end": {
                    "row": 17,
                    "column": 63
                  },
                  "text": "for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)",
                  "children": [
                    {
                      "type": "for_statement",
                      "start": {
                        "row": 16,
                        "column": 12
                      },
                      "end": {
                        "row": 17,
                        "column": 63
                      },
                      "text": "for field in self._selected_fields:\n                read_options.selected_fields.append(field.name)",
                      "children": [
                        {
                          "type": "for",
                          "start": {
                            "row": 16,
                            "column": 12
                          },
                          "end": {
                            "row": 16,
                            "column": 15
                          },
                          "text": "for"
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 16,
                            "column": 16
                          },
                          "end": {
                            "row": 16,
                            "column": 21
                          },
                          "text": "field"
                        },
                        {
                          "type": "in",
                          "start": {
                            "row": 16,
                            "column": 22
                          },
                          "end": {
                            "row": 16,
                            "column": 24
                          },
                          "text": "in"
                        },
                        {
                          "type": "attribute",
                          "start": {
                            "row": 16,
                            "column": 25
                          },
                          "end": {
                            "row": 16,
                            "column": 46
                          },
                          "text": "self._selected_fields",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 16,
                                "column": 25
                              },
                              "end": {
                                "row": 16,
                                "column": 29
                              },
                              "text": "self"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 16,
                                "column": 29
                              },
                              "end": {
                                "row": 16,
                                "column": 30
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 16,
                                "column": 30
                              },
                              "end": {
                                "row": 16,
                                "column": 46
                              },
                              "text": "_selected_fields"
                            }
                          ]
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 16,
                            "column": 46
                          },
                          "end": {
                            "row": 16,
                            "column": 47
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 17,
                            "column": 16
                          },
                          "end": {
                            "row": 17,
                            "column": 63
                          },
                          "text": "read_options.selected_fields.append(field.name)",
                          "children": [
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 17,
                                "column": 16
                              },
                              "end": {
                                "row": 17,
                                "column": 63
                              },
                              "text": "read_options.selected_fields.append(field.name)",
                              "children": [
                                {
                                  "type": "call",
                                  "start": {
                                    "row": 17,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 17,
                                    "column": 63
                                  },
                                  "text": "read_options.selected_fields.append(field.name)",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 17,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 17,
                                        "column": 51
                                      },
                                      "text": "read_options.selected_fields.append",
                                      "children": [
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 17,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 44
                                          },
                                          "text": "read_options.selected_fields",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 17,
                                                "column": 16
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 28
                                              },
                                              "text": "read_options"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 17,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 29
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 17,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 44
                                              },
                                              "text": "selected_fields"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 17,
                                            "column": 44
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 45
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 17,
                                            "column": 45
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 51
                                          },
                                          "text": "append"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "argument_list",
                                      "start": {
                                        "row": 17,
                                        "column": 51
                                      },
                                      "end": {
                                        "row": 17,
                                        "column": 63
                                      },
                                      "text": "(field.name)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 17,
                                            "column": 51
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 52
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 17,
                                            "column": 52
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 62
                                          },
                                          "text": "field.name",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 17,
                                                "column": 52
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 57
                                              },
                                              "text": "field"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 17,
                                                "column": 57
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 58
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 17,
                                                "column": 58
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 62
                                              },
                                              "text": "name"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 17,
                                            "column": 62
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 63
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 19,
                "column": 8
              },
              "end": {
                "row": 23,
                "column": 9
              },
              "text": "session = bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 19,
                    "column": 8
                  },
                  "end": {
                    "row": 23,
                    "column": 9
                  },
                  "text": "session = bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 19,
                        "column": 8
                      },
                      "end": {
                        "row": 19,
                        "column": 15
                      },
                      "text": "session"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 19,
                        "column": 16
                      },
                      "end": {
                        "row": 19,
                        "column": 17
                      },
                      "text": "="
                    },
                    {
                      "type": "call",
                      "start": {
                        "row": 19,
                        "column": 18
                      },
                      "end": {
                        "row": 23,
                        "column": 9
                      },
                      "text": "bqstorage_client.create_read_session(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )",
                      "children": [
                        {
                          "type": "attribute",
                          "start": {
                            "row": 19,
                            "column": 18
                          },
                          "end": {
                            "row": 19,
                            "column": 54
                          },
                          "text": "bqstorage_client.create_read_session",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 19,
                                "column": 18
                              },
                              "end": {
                                "row": 19,
                                "column": 34
                              },
                              "text": "bqstorage_client"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 19,
                                "column": 34
                              },
                              "end": {
                                "row": 19,
                                "column": 35
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 19,
                                "column": 35
                              },
                              "end": {
                                "row": 19,
                                "column": 54
                              },
                              "text": "create_read_session"
                            }
                          ]
                        },
                        {
                          "type": "argument_list",
                          "start": {
                            "row": 19,
                            "column": 54
                          },
                          "end": {
                            "row": 23,
                            "column": 9
                          },
                          "text": "(\n            self._table.to_bqstorage(),\n            \"projects/{}\".format(self._project),\n            read_options=read_options,\n        )",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 19,
                                "column": 54
                              },
                              "end": {
                                "row": 19,
                                "column": 55
                              },
                              "text": "("
                            },
                            {
                              "type": "call",
                              "start": {
                                "row": 20,
                                "column": 12
                              },
                              "end": {
                                "row": 20,
                                "column": 38
                              },
                              "text": "self._table.to_bqstorage()",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 20,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 20,
                                    "column": 36
                                  },
                                  "text": "self._table.to_bqstorage",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 20,
                                        "column": 12
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 23
                                      },
                                      "text": "self._table",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 20,
                                            "column": 12
                                          },
                                          "end": {
                                            "row": 20,
                                            "column": 16
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 20,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 20,
                                            "column": 17
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 20,
                                            "column": 17
                                          },
                                          "end": {
                                            "row": 20,
                                            "column": 23
                                          },
                                          "text": "_table"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 20,
                                        "column": 23
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 24
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 20,
                                        "column": 24
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 36
                                      },
                                      "text": "to_bqstorage"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 20,
                                    "column": 36
                                  },
                                  "end": {
                                    "row": 20,
                                    "column": 38
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 20,
                                        "column": 36
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 37
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 20,
                                        "column": 37
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 38
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 20,
                                "column": 38
                              },
                              "end": {
                                "row": 20,
                                "column": 39
                              },
                              "text": ","
                            },
                            {
                              "type": "call",
                              "start": {
                                "row": 21,
                                "column": 12
                              },
                              "end": {
                                "row": 21,
                                "column": 47
                              },
                              "text": "\"projects/{}\".format(self._project)",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 21,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 21,
                                    "column": 32
                                  },
                                  "text": "\"projects/{}\".format",
                                  "children": [
                                    {
                                      "type": "string",
                                      "start": {
                                        "row": 21,
                                        "column": 12
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 25
                                      },
                                      "text": "\"projects/{}\"",
                                      "children": [
                                        {
                                          "type": "string_start",
                                          "start": {
                                            "row": 21,
                                            "column": 12
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 13
                                          },
                                          "text": "\""
                                        },
                                        {
                                          "type": "string_content",
                                          "start": {
                                            "row": 21,
                                            "column": 13
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 24
                                          },
                                          "text": "projects/{}"
                                        },
                                        {
                                          "type": "string_end",
                                          "start": {
                                            "row": 21,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 25
                                          },
                                          "text": "\""
                                        }
                                      ]
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 21,
                                        "column": 25
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 26
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 21,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 32
                                      },
                                      "text": "format"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 21,
                                    "column": 32
                                  },
                                  "end": {
                                    "row": 21,
                                    "column": 47
                                  },
                                  "text": "(self._project)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 21,
                                        "column": 32
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 33
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 21,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 46
                                      },
                                      "text": "self._project",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 21,
                                            "column": 33
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 37
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 21,
                                            "column": 37
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 38
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 21,
                                            "column": 38
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 46
                                          },
                                          "text": "_project"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 21,
                                        "column": 46
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 47
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 21,
                                "column": 47
                              },
                              "end": {
                                "row": 21,
                                "column": 48
                              },
                              "text": ","
                            },
                            {
                              "type": "keyword_argument",
                              "start": {
                                "row": 22,
                                "column": 12
                              },
                              "end": {
                                "row": 22,
                                "column": 37
                              },
                              "text": "read_options=read_options",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 22,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 22,
                                    "column": 24
                                  },
                                  "text": "read_options"
                                },
                                {
                                  "type": "=",
                                  "start": {
                                    "row": 22,
                                    "column": 24
                                  },
                                  "end": {
                                    "row": 22,
                                    "column": 25
                                  },
                                  "text": "="
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 22,
                                    "column": 25
                                  },
                                  "end": {
                                    "row": 22,
                                    "column": 37
                                  },
                                  "text": "read_options"
                                }
                              ]
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 22,
                                "column": 37
                              },
                              "end": {
                                "row": 22,
                                "column": 38
                              },
                              "text": ","
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 23,
                                "column": 8
                              },
                              "end": {
                                "row": 23,
                                "column": 9
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 25,
                "column": 8
              },
              "end": {
                "row": 25,
                "column": 75
              },
              "text": "# We need to parse the schema manually so that we can rearrange the"
            },
            {
              "type": "comment",
              "start": {
                "row": 26,
                "column": 8
              },
              "end": {
                "row": 26,
                "column": 18
              },
              "text": "# columns."
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 27,
                "column": 8
              },
              "end": {
                "row": 27,
                "column": 55
              },
              "text": "schema = json.loads(session.avro_schema.schema)",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 27,
                    "column": 8
                  },
                  "end": {
                    "row": 27,
                    "column": 55
                  },
                  "text": "schema = json.loads(session.avro_schema.schema)",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 27,
                        "column": 8
                      },
                      "end": {
                        "row": 27,
                        "column": 14
                      },
                      "text": "schema"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 27,
                        "column": 15
                      },
                      "end": {
                        "row": 27,
                        "column": 16
                      },
                      "text": "="
                    },
                    {
                      "type": "call",
                      "start": {
                        "row": 27,
                        "column": 17
                      },
                      "end": {
                        "row": 27,
                        "column": 55
                      },
                      "text": "json.loads(session.avro_schema.schema)",
                      "children": [
                        {
                          "type": "attribute",
                          "start": {
                            "row": 27,
                            "column": 17
                          },
                          "end": {
                            "row": 27,
                            "column": 27
                          },
                          "text": "json.loads",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 27,
                                "column": 17
                              },
                              "end": {
                                "row": 27,
                                "column": 21
                              },
                              "text": "json"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 27,
                                "column": 21
                              },
                              "end": {
                                "row": 27,
                                "column": 22
                              },
                              "text": "."
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 27,
                                "column": 22
                              },
                              "end": {
                                "row": 27,
                                "column": 27
                              },
                              "text": "loads"
                            }
                          ]
                        },
                        {
                          "type": "argument_list",
                          "start": {
                            "row": 27,
                            "column": 27
                          },
                          "end": {
                            "row": 27,
                            "column": 55
                          },
                          "text": "(session.avro_schema.schema)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 27,
                                "column": 27
                              },
                              "end": {
                                "row": 27,
                                "column": 28
                              },
                              "text": "("
                            },
                            {
                              "type": "attribute",
                              "start": {
                                "row": 27,
                                "column": 28
                              },
                              "end": {
                                "row": 27,
                                "column": 54
                              },
                              "text": "session.avro_schema.schema",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 27,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 27,
                                    "column": 47
                                  },
                                  "text": "session.avro_schema",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 27,
                                        "column": 28
                                      },
                                      "end": {
                                        "row": 27,
                                        "column": 35
                                      },
                                      "text": "session"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 27,
                                        "column": 35
                                      },
                                      "end": {
                                        "row": 27,
                                        "column": 36
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 27,
                                        "column": 36
                                      },
                                      "end": {
                                        "row": 27,
                                        "column": 47
                                      },
                                      "text": "avro_schema"
                                    }
                                  ]
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 27,
                                    "column": 47
                                  },
                                  "end": {
                                    "row": 27,
                                    "column": 48
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 27,
                                    "column": 48
                                  },
                                  "end": {
                                    "row": 27,
                                    "column": 54
                                  },
                                  "text": "schema"
                                }
                              ]
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 27,
                                "column": 54
                              },
                              "end": {
                                "row": 27,
                                "column": 55
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 28,
                "column": 8
              },
              "end": {
                "row": 28,
                "column": 63
              },
              "text": "columns = [field[\"name\"] for field in schema[\"fields\"]]",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 28,
                    "column": 8
                  },
                  "end": {
                    "row": 28,
                    "column": 63
                  },
                  "text": "columns = [field[\"name\"] for field in schema[\"fields\"]]",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 28,
                        "column": 8
                      },
                      "end": {
                        "row": 28,
                        "column": 15
                      },
                      "text": "columns"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 28,
                        "column": 16
                      },
                      "end": {
                        "row": 28,
                        "column": 17
                      },
                      "text": "="
                    },
                    {
                      "type": "list_comprehension",
                      "start": {
                        "row": 28,
                        "column": 18
                      },
                      "end": {
                        "row": 28,
                        "column": 63
                      },
                      "text": "[field[\"name\"] for field in schema[\"fields\"]]",
                      "children": [
                        {
                          "type": "[",
                          "start": {
                            "row": 28,
                            "column": 18
                          },
                          "end": {
                            "row": 28,
                            "column": 19
                          },
                          "text": "["
                        },
                        {
                          "type": "subscript",
                          "start": {
                            "row": 28,
                            "column": 19
                          },
                          "end": {
                            "row": 28,
                            "column": 32
                          },
                          "text": "field[\"name\"]",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 28,
                                "column": 19
                              },
                              "end": {
                                "row": 28,
                                "column": 24
                              },
                              "text": "field"
                            },
                            {
                              "type": "[",
                              "start": {
                                "row": 28,
                                "column": 24
                              },
                              "end": {
                                "row": 28,
                                "column": 25
                              },
                              "text": "["
                            },
                            {
                              "type": "string",
                              "start": {
                                "row": 28,
                                "column": 25
                              },
                              "end": {
                                "row": 28,
                                "column": 31
                              },
                              "text": "\"name\"",
                              "children": [
                                {
                                  "type": "string_start",
                                  "start": {
                                    "row": 28,
                                    "column": 25
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 26
                                  },
                                  "text": "\""
                                },
                                {
                                  "type": "string_content",
                                  "start": {
                                    "row": 28,
                                    "column": 26
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 30
                                  },
                                  "text": "name"
                                },
                                {
                                  "type": "string_end",
                                  "start": {
                                    "row": 28,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 31
                                  },
                                  "text": "\""
                                }
                              ]
                            },
                            {
                              "type": "]",
                              "start": {
                                "row": 28,
                                "column": 31
                              },
                              "end": {
                                "row": 28,
                                "column": 32
                              },
                              "text": "]"
                            }
                          ]
                        },
                        {
                          "type": "for_in_clause",
                          "start": {
                            "row": 28,
                            "column": 33
                          },
                          "end": {
                            "row": 28,
                            "column": 62
                          },
                          "text": "for field in schema[\"fields\"]",
                          "children": [
                            {
                              "type": "for",
                              "start": {
                                "row": 28,
                                "column": 33
                              },
                              "end": {
                                "row": 28,
                                "column": 36
                              },
                              "text": "for"
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 28,
                                "column": 37
                              },
                              "end": {
                                "row": 28,
                                "column": 42
                              },
                              "text": "field"
                            },
                            {
                              "type": "in",
                              "start": {
                                "row": 28,
                                "column": 43
                              },
                              "end": {
                                "row": 28,
                                "column": 45
                              },
                              "text": "in"
                            },
                            {
                              "type": "subscript",
                              "start": {
                                "row": 28,
                                "column": 46
                              },
                              "end": {
                                "row": 28,
                                "column": 62
                              },
                              "text": "schema[\"fields\"]",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 28,
                                    "column": 46
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 52
                                  },
                                  "text": "schema"
                                },
                                {
                                  "type": "[",
                                  "start": {
                                    "row": 28,
                                    "column": 52
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 53
                                  },
                                  "text": "["
                                },
                                {
                                  "type": "string",
                                  "start": {
                                    "row": 28,
                                    "column": 53
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 61
                                  },
                                  "text": "\"fields\"",
                                  "children": [
                                    {
                                      "type": "string_start",
                                      "start": {
                                        "row": 28,
                                        "column": 53
                                      },
                                      "end": {
                                        "row": 28,
                                        "column": 54
                                      },
                                      "text": "\""
                                    },
                                    {
                                      "type": "string_content",
                                      "start": {
                                        "row": 28,
                                        "column": 54
                                      },
                                      "end": {
                                        "row": 28,
                                        "column": 60
                                      },
                                      "text": "fields"
                                    },
                                    {
                                      "type": "string_end",
                                      "start": {
                                        "row": 28,
                                        "column": 60
                                      },
                                      "end": {
                                        "row": 28,
                                        "column": 61
                                      },
                                      "text": "\""
                                    }
                                  ]
                                },
                                {
                                  "type": "]",
                                  "start": {
                                    "row": 28,
                                    "column": 61
                                  },
                                  "end": {
                                    "row": 28,
                                    "column": 62
                                  },
                                  "text": "]"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "]",
                          "start": {
                            "row": 28,
                            "column": 62
                          },
                          "end": {
                            "row": 28,
                            "column": 63
                          },
                          "text": "]"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 30,
                "column": 8
              },
              "end": {
                "row": 30,
                "column": 79
              },
              "text": "# Avoid reading rows from an empty table. pandas.concat will fail on an"
            },
            {
              "type": "comment",
              "start": {
                "row": 31,
                "column": 8
              },
              "end": {
                "row": 31,
                "column": 21
              },
              "text": "# empty list."
            },
            {
              "type": "if_statement",
              "start": {
                "row": 32,
                "column": 8
              },
              "end": {
                "row": 33,
                "column": 52
              },
              "text": "if not session.streams:\n            return pandas.DataFrame(columns=columns)",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 32,
                    "column": 8
                  },
                  "end": {
                    "row": 32,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "not_operator",
                  "start": {
                    "row": 32,
                    "column": 11
                  },
                  "end": {
                    "row": 32,
                    "column": 30
                  },
                  "text": "not session.streams",
                  "children": [
                    {
                      "type": "not",
                      "start": {
                        "row": 32,
                        "column": 11
                      },
                      "end": {
                        "row": 32,
                        "column": 14
                      },
                      "text": "not"
                    },
                    {
                      "type": "attribute",
                      "start": {
                        "row": 32,
                        "column": 15
                      },
                      "end": {
                        "row": 32,
                        "column": 30
                      },
                      "text": "session.streams",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 32,
                            "column": 15
                          },
                          "end": {
                            "row": 32,
                            "column": 22
                          },
                          "text": "session"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 32,
                            "column": 22
                          },
                          "end": {
                            "row": 32,
                            "column": 23
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 32,
                            "column": 23
                          },
                          "end": {
                            "row": 32,
                            "column": 30
                          },
                          "text": "streams"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 32,
                    "column": 30
                  },
                  "end": {
                    "row": 32,
                    "column": 31
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 33,
                    "column": 12
                  },
                  "end": {
                    "row": 33,
                    "column": 52
                  },
                  "text": "return pandas.DataFrame(columns=columns)",
                  "children": [
                    {
                      "type": "return_statement",
                      "start": {
                        "row": 33,
                        "column": 12
                      },
                      "end": {
                        "row": 33,
                        "column": 52
                      },
                      "text": "return pandas.DataFrame(columns=columns)",
                      "children": [
                        {
                          "type": "return",
                          "start": {
                            "row": 33,
                            "column": 12
                          },
                          "end": {
                            "row": 33,
                            "column": 18
                          },
                          "text": "return"
                        },
                        {
                          "type": "call",
                          "start": {
                            "row": 33,
                            "column": 19
                          },
                          "end": {
                            "row": 33,
                            "column": 52
                          },
                          "text": "pandas.DataFrame(columns=columns)",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 33,
                                "column": 19
                              },
                              "end": {
                                "row": 33,
                                "column": 35
                              },
                              "text": "pandas.DataFrame",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 33,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 25
                                  },
                                  "text": "pandas"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 33,
                                    "column": 25
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 26
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 33,
                                    "column": 26
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 35
                                  },
                                  "text": "DataFrame"
                                }
                              ]
                            },
                            {
                              "type": "argument_list",
                              "start": {
                                "row": 33,
                                "column": 35
                              },
                              "end": {
                                "row": 33,
                                "column": 52
                              },
                              "text": "(columns=columns)",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 33,
                                    "column": 35
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 36
                                  },
                                  "text": "("
                                },
                                {
                                  "type": "keyword_argument",
                                  "start": {
                                    "row": 33,
                                    "column": 36
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 51
                                  },
                                  "text": "columns=columns",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 33,
                                        "column": 36
                                      },
                                      "end": {
                                        "row": 33,
                                        "column": 43
                                      },
                                      "text": "columns"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 33,
                                        "column": 43
                                      },
                                      "end": {
                                        "row": 33,
                                        "column": 44
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 33,
                                        "column": 44
                                      },
                                      "end": {
                                        "row": 33,
                                        "column": 51
                                      },
                                      "text": "columns"
                                    }
                                  ]
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 33,
                                    "column": 51
                                  },
                                  "end": {
                                    "row": 33,
                                    "column": 52
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 35,
                "column": 8
              },
              "end": {
                "row": 35,
                "column": 75
              },
              "text": "# Use _to_dataframe_finished to notify worker threads when to quit."
            },
            {
              "type": "comment",
              "start": {
                "row": 36,
                "column": 8
              },
              "end": {
                "row": 36,
                "column": 58
              },
              "text": "# See: https://stackoverflow.com/a/29237343/101923"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 37,
                "column": 8
              },
              "end": {
                "row": 37,
                "column": 43
              },
              "text": "self._to_dataframe_finished = False",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 37,
                    "column": 8
                  },
                  "end": {
                    "row": 37,
                    "column": 43
                  },
                  "text": "self._to_dataframe_finished = False",
                  "children": [
                    {
                      "type": "attribute",
                      "start": {
                        "row": 37,
                        "column": 8
                      },
                      "end": {
                        "row": 37,
                        "column": 35
                      },
                      "text": "self._to_dataframe_finished",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 37,
                            "column": 8
                          },
                          "end": {
                            "row": 37,
                            "column": 12
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 37,
                            "column": 12
                          },
                          "end": {
                            "row": 37,
                            "column": 13
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 37,
                            "column": 13
                          },
                          "end": {
                            "row": 37,
                            "column": 35
                          },
                          "text": "_to_dataframe_finished"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 37,
                        "column": 36
                      },
                      "end": {
                        "row": 37,
                        "column": 37
                      },
                      "text": "="
                    },
                    {
                      "type": "false",
                      "start": {
                        "row": 37,
                        "column": 38
                      },
                      "end": {
                        "row": 37,
                        "column": 43
                      },
                      "text": "False"
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 39,
                "column": 8
              },
              "end": {
                "row": 39,
                "column": 66
              },
              "text": "# Create a queue to track progress updates across threads."
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 40,
                "column": 8
              },
              "end": {
                "row": 40,
                "column": 46
              },
              "text": "worker_queue = _NoopProgressBarQueue()",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 40,
                    "column": 8
                  },
                  "end": {
                    "row": 40,
                    "column": 46
                  },
                  "text": "worker_queue = _NoopProgressBarQueue()",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 40,
                        "column": 8
                      },
                      "end": {
                        "row": 40,
                        "column": 20
                      },
                      "text": "worker_queue"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 40,
                        "column": 21
                      },
                      "end": {
                        "row": 40,
                        "column": 22
                      },
                      "text": "="
                    },
                    {
                      "type": "call",
                      "start": {
                        "row": 40,
                        "column": 23
                      },
                      "end": {
                        "row": 40,
                        "column": 46
                      },
                      "text": "_NoopProgressBarQueue()",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 40,
                            "column": 23
                          },
                          "end": {
                            "row": 40,
                            "column": 44
                          },
                          "text": "_NoopProgressBarQueue"
                        },
                        {
                          "type": "argument_list",
                          "start": {
                            "row": 40,
                            "column": 44
                          },
                          "end": {
                            "row": 40,
                            "column": 46
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 40,
                                "column": 44
                              },
                              "end": {
                                "row": 40,
                                "column": 45
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 40,
                                "column": 45
                              },
                              "end": {
                                "row": 40,
                                "column": 46
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 41,
                "column": 8
              },
              "end": {
                "row": 41,
                "column": 29
              },
              "text": "progress_queue = None",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 41,
                    "column": 8
                  },
                  "end": {
                    "row": 41,
                    "column": 29
                  },
                  "text": "progress_queue = None",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 41,
                        "column": 8
                      },
                      "end": {
                        "row": 41,
                        "column": 22
                      },
                      "text": "progress_queue"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 41,
                        "column": 23
                      },
                      "end": {
                        "row": 41,
                        "column": 24
                      },
                      "text": "="
                    },
                    {
                      "type": "none",
                      "start": {
                        "row": 41,
                        "column": 25
                      },
                      "end": {
                        "row": 41,
                        "column": 29
                      },
                      "text": "None"
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 42,
                "column": 8
              },
              "end": {
                "row": 42,
                "column": 30
              },
              "text": "progress_thread = None",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 42,
                    "column": 8
                  },
                  "end": {
                    "row": 42,
                    "column": 30
                  },
                  "text": "progress_thread = None",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 42,
                        "column": 8
                      },
                      "end": {
                        "row": 42,
                        "column": 23
                      },
                      "text": "progress_thread"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 42,
                        "column": 24
                      },
                      "end": {
                        "row": 42,
                        "column": 25
                      },
                      "text": "="
                    },
                    {
                      "type": "none",
                      "start": {
                        "row": 42,
                        "column": 26
                      },
                      "end": {
                        "row": 42,
                        "column": 30
                      },
                      "text": "None"
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 43,
                "column": 8
              },
              "end": {
                "row": 49,
                "column": 35
              },
              "text": "if progress_bar is not None:\n            worker_queue = queue.Queue()\n            progress_queue = queue.Queue()\n            progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )\n            progress_thread.start()",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 43,
                    "column": 8
                  },
                  "end": {
                    "row": 43,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "comparison_operator",
                  "start": {
                    "row": 43,
                    "column": 11
                  },
                  "end": {
                    "row": 43,
                    "column": 35
                  },
                  "text": "progress_bar is not None",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 43,
                        "column": 11
                      },
                      "end": {
                        "row": 43,
                        "column": 23
                      },
                      "text": "progress_bar"
                    },
                    {
                      "type": "is not",
                      "start": {
                        "row": 43,
                        "column": 24
                      },
                      "end": {
                        "row": 43,
                        "column": 26
                      },
                      "text": "is"
                    },
                    {
                      "type": "is not",
                      "start": {
                        "row": 43,
                        "column": 27
                      },
                      "end": {
                        "row": 43,
                        "column": 30
                      },
                      "text": "not"
                    },
                    {
                      "type": "none",
                      "start": {
                        "row": 43,
                        "column": 31
                      },
                      "end": {
                        "row": 43,
                        "column": 35
                      },
                      "text": "None"
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 43,
                    "column": 35
                  },
                  "end": {
                    "row": 43,
                    "column": 36
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 44,
                    "column": 12
                  },
                  "end": {
                    "row": 49,
                    "column": 35
                  },
                  "text": "worker_queue = queue.Queue()\n            progress_queue = queue.Queue()\n            progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )\n            progress_thread.start()",
                  "children": [
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 44,
                        "column": 12
                      },
                      "end": {
                        "row": 44,
                        "column": 40
                      },
                      "text": "worker_queue = queue.Queue()",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 44,
                            "column": 12
                          },
                          "end": {
                            "row": 44,
                            "column": 40
                          },
                          "text": "worker_queue = queue.Queue()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 44,
                                "column": 12
                              },
                              "end": {
                                "row": 44,
                                "column": 24
                              },
                              "text": "worker_queue"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 44,
                                "column": 25
                              },
                              "end": {
                                "row": 44,
                                "column": 26
                              },
                              "text": "="
                            },
                            {
                              "type": "call",
                              "start": {
                                "row": 44,
                                "column": 27
                              },
                              "end": {
                                "row": 44,
                                "column": 40
                              },
                              "text": "queue.Queue()",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 44,
                                    "column": 27
                                  },
                                  "end": {
                                    "row": 44,
                                    "column": 38
                                  },
                                  "text": "queue.Queue",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 44,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 44,
                                        "column": 32
                                      },
                                      "text": "queue"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 44,
                                        "column": 32
                                      },
                                      "end": {
                                        "row": 44,
                                        "column": 33
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 44,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 44,
                                        "column": 38
                                      },
                                      "text": "Queue"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 44,
                                    "column": 38
                                  },
                                  "end": {
                                    "row": 44,
                                    "column": 40
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 44,
                                        "column": 38
                                      },
                                      "end": {
                                        "row": 44,
                                        "column": 39
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 44,
                                        "column": 39
                                      },
                                      "end": {
                                        "row": 44,
                                        "column": 40
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 45,
                        "column": 12
                      },
                      "end": {
                        "row": 45,
                        "column": 42
                      },
                      "text": "progress_queue = queue.Queue()",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 45,
                            "column": 12
                          },
                          "end": {
                            "row": 45,
                            "column": 42
                          },
                          "text": "progress_queue = queue.Queue()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 45,
                                "column": 12
                              },
                              "end": {
                                "row": 45,
                                "column": 26
                              },
                              "text": "progress_queue"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 45,
                                "column": 27
                              },
                              "end": {
                                "row": 45,
                                "column": 28
                              },
                              "text": "="
                            },
                            {
                              "type": "call",
                              "start": {
                                "row": 45,
                                "column": 29
                              },
                              "end": {
                                "row": 45,
                                "column": 42
                              },
                              "text": "queue.Queue()",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 45,
                                    "column": 29
                                  },
                                  "end": {
                                    "row": 45,
                                    "column": 40
                                  },
                                  "text": "queue.Queue",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 45,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 34
                                      },
                                      "text": "queue"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 45,
                                        "column": 34
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 35
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 45,
                                        "column": 35
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 40
                                      },
                                      "text": "Queue"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 45,
                                    "column": 40
                                  },
                                  "end": {
                                    "row": 45,
                                    "column": 42
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 45,
                                        "column": 40
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 41
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 45,
                                        "column": 41
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 42
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 46,
                        "column": 12
                      },
                      "end": {
                        "row": 48,
                        "column": 13
                      },
                      "text": "progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 46,
                            "column": 12
                          },
                          "end": {
                            "row": 48,
                            "column": 13
                          },
                          "text": "progress_thread = threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 46,
                                "column": 12
                              },
                              "end": {
                                "row": 46,
                                "column": 27
                              },
                              "text": "progress_thread"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 46,
                                "column": 28
                              },
                              "end": {
                                "row": 46,
                                "column": 29
                              },
                              "text": "="
                            },
                            {
                              "type": "call",
                              "start": {
                                "row": 46,
                                "column": 30
                              },
                              "end": {
                                "row": 48,
                                "column": 13
                              },
                              "text": "threading.Thread(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 46,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 46,
                                    "column": 46
                                  },
                                  "text": "threading.Thread",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 46,
                                        "column": 30
                                      },
                                      "end": {
                                        "row": 46,
                                        "column": 39
                                      },
                                      "text": "threading"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 46,
                                        "column": 39
                                      },
                                      "end": {
                                        "row": 46,
                                        "column": 40
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 46,
                                        "column": 40
                                      },
                                      "end": {
                                        "row": 46,
                                        "column": 46
                                      },
                                      "text": "Thread"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 46,
                                    "column": 46
                                  },
                                  "end": {
                                    "row": 48,
                                    "column": 13
                                  },
                                  "text": "(\n                target=self._process_worker_updates, args=(worker_queue, progress_queue)\n            )",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 46,
                                        "column": 46
                                      },
                                      "end": {
                                        "row": 46,
                                        "column": 47
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "keyword_argument",
                                      "start": {
                                        "row": 47,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 47,
                                        "column": 51
                                      },
                                      "text": "target=self._process_worker_updates",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 47,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 22
                                          },
                                          "text": "target"
                                        },
                                        {
                                          "type": "=",
                                          "start": {
                                            "row": 47,
                                            "column": 22
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 23
                                          },
                                          "text": "="
                                        },
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 47,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 51
                                          },
                                          "text": "self._process_worker_updates",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 47,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 27
                                              },
                                              "text": "self"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 47,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 28
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 47,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 51
                                              },
                                              "text": "_process_worker_updates"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ",",
                                      "start": {
                                        "row": 47,
                                        "column": 51
                                      },
                                      "end": {
                                        "row": 47,
                                        "column": 52
                                      },
                                      "text": ","
                                    },
                                    {
                                      "type": "keyword_argument",
                                      "start": {
                                        "row": 47,
                                        "column": 53
                                      },
                                      "end": {
                                        "row": 47,
                                        "column": 88
                                      },
                                      "text": "args=(worker_queue, progress_queue)",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 47,
                                            "column": 53
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 57
                                          },
                                          "text": "args"
                                        },
                                        {
                                          "type": "=",
                                          "start": {
                                            "row": 47,
                                            "column": 57
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 58
                                          },
                                          "text": "="
                                        },
                                        {
                                          "type": "tuple",
                                          "start": {
                                            "row": 47,
                                            "column": 58
                                          },
                                          "end": {
                                            "row": 47,
                                            "column": 88
                                          },
                                          "text": "(worker_queue, progress_queue)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 47,
                                                "column": 58
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 59
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 47,
                                                "column": 59
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 71
                                              },
                                              "text": "worker_queue"
                                            },
                                            {
                                              "type": ",",
                                              "start": {
                                                "row": 47,
                                                "column": 71
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 72
                                              },
                                              "text": ","
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 47,
                                                "column": 73
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 87
                                              },
                                              "text": "progress_queue"
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 47,
                                                "column": 87
                                              },
                                              "end": {
                                                "row": 47,
                                                "column": 88
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 48,
                                        "column": 12
                                      },
                                      "end": {
                                        "row": 48,
                                        "column": 13
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 49,
                        "column": 12
                      },
                      "end": {
                        "row": 49,
                        "column": 35
                      },
                      "text": "progress_thread.start()",
                      "children": [
                        {
                          "type": "call",
                          "start": {
                            "row": 49,
                            "column": 12
                          },
                          "end": {
                            "row": 49,
                            "column": 35
                          },
                          "text": "progress_thread.start()",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 49,
                                "column": 12
                              },
                              "end": {
                                "row": 49,
                                "column": 33
                              },
                              "text": "progress_thread.start",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 49,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 49,
                                    "column": 27
                                  },
                                  "text": "progress_thread"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 49,
                                    "column": 27
                                  },
                                  "end": {
                                    "row": 49,
                                    "column": 28
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 49,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 49,
                                    "column": 33
                                  },
                                  "text": "start"
                                }
                              ]
                            },
                            {
                              "type": "argument_list",
                              "start": {
                                "row": 49,
                                "column": 33
                              },
                              "end": {
                                "row": 49,
                                "column": 35
                              },
                              "text": "()",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 49,
                                    "column": 33
                                  },
                                  "end": {
                                    "row": 49,
                                    "column": 34
                                  },
                                  "text": "("
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 49,
                                    "column": 34
                                  },
                                  "end": {
                                    "row": 49,
                                    "column": 35
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "function_definition",
              "start": {
                "row": 51,
                "column": 8
              },
              "end": {
                "row": 81,
                "column": 25
              },
              "text": "def get_frames(pool):\n            frames = []\n\n            # Manually submit jobs and wait for download to complete rather\n            # than using pool.map because pool.map continues running in the\n            # background even if there is an exception on the main thread.\n            # See: https://github.com/googleapis/google-cloud-python/pull/7698\n            not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]\n\n            while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)\n\n            return frames",
              "children": [
                {
                  "type": "def",
                  "start": {
                    "row": 51,
                    "column": 8
                  },
                  "end": {
                    "row": 51,
                    "column": 11
                  },
                  "text": "def"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 51,
                    "column": 12
                  },
                  "end": {
                    "row": 51,
                    "column": 22
                  },
                  "text": "get_frames"
                },
                {
                  "type": "parameters",
                  "start": {
                    "row": 51,
                    "column": 22
                  },
                  "end": {
                    "row": 51,
                    "column": 28
                  },
                  "text": "(pool)",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 51,
                        "column": 22
                      },
                      "end": {
                        "row": 51,
                        "column": 23
                      },
                      "text": "("
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 51,
                        "column": 23
                      },
                      "end": {
                        "row": 51,
                        "column": 27
                      },
                      "text": "pool"
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 51,
                        "column": 27
                      },
                      "end": {
                        "row": 51,
                        "column": 28
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 51,
                    "column": 28
                  },
                  "end": {
                    "row": 51,
                    "column": 29
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 52,
                    "column": 12
                  },
                  "end": {
                    "row": 81,
                    "column": 25
                  },
                  "text": "frames = []\n\n            # Manually submit jobs and wait for download to complete rather\n            # than using pool.map because pool.map continues running in the\n            # background even if there is an exception on the main thread.\n            # See: https://github.com/googleapis/google-cloud-python/pull/7698\n            not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]\n\n            while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)\n\n            return frames",
                  "children": [
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 52,
                        "column": 12
                      },
                      "end": {
                        "row": 52,
                        "column": 23
                      },
                      "text": "frames = []",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 52,
                            "column": 12
                          },
                          "end": {
                            "row": 52,
                            "column": 23
                          },
                          "text": "frames = []",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 52,
                                "column": 12
                              },
                              "end": {
                                "row": 52,
                                "column": 18
                              },
                              "text": "frames"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 52,
                                "column": 19
                              },
                              "end": {
                                "row": 52,
                                "column": 20
                              },
                              "text": "="
                            },
                            {
                              "type": "list",
                              "start": {
                                "row": 52,
                                "column": 21
                              },
                              "end": {
                                "row": 52,
                                "column": 23
                              },
                              "text": "[]",
                              "children": [
                                {
                                  "type": "[",
                                  "start": {
                                    "row": 52,
                                    "column": 21
                                  },
                                  "end": {
                                    "row": 52,
                                    "column": 22
                                  },
                                  "text": "["
                                },
                                {
                                  "type": "]",
                                  "start": {
                                    "row": 52,
                                    "column": 22
                                  },
                                  "end": {
                                    "row": 52,
                                    "column": 23
                                  },
                                  "text": "]"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 54,
                        "column": 12
                      },
                      "end": {
                        "row": 54,
                        "column": 75
                      },
                      "text": "# Manually submit jobs and wait for download to complete rather"
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 55,
                        "column": 12
                      },
                      "end": {
                        "row": 55,
                        "column": 75
                      },
                      "text": "# than using pool.map because pool.map continues running in the"
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 56,
                        "column": 12
                      },
                      "end": {
                        "row": 56,
                        "column": 74
                      },
                      "text": "# background even if there is an exception on the main thread."
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 57,
                        "column": 12
                      },
                      "end": {
                        "row": 57,
                        "column": 78
                      },
                      "text": "# See: https://github.com/googleapis/google-cloud-python/pull/7698"
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 58,
                        "column": 12
                      },
                      "end": {
                        "row": 69,
                        "column": 13
                      },
                      "text": "not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 58,
                            "column": 12
                          },
                          "end": {
                            "row": 69,
                            "column": 13
                          },
                          "text": "not_done = [\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 58,
                                "column": 12
                              },
                              "end": {
                                "row": 58,
                                "column": 20
                              },
                              "text": "not_done"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 58,
                                "column": 21
                              },
                              "end": {
                                "row": 58,
                                "column": 22
                              },
                              "text": "="
                            },
                            {
                              "type": "list_comprehension",
                              "start": {
                                "row": 58,
                                "column": 23
                              },
                              "end": {
                                "row": 69,
                                "column": 13
                              },
                              "text": "[\n                pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )\n                for stream in session.streams\n            ]",
                              "children": [
                                {
                                  "type": "[",
                                  "start": {
                                    "row": 58,
                                    "column": 23
                                  },
                                  "end": {
                                    "row": 58,
                                    "column": 24
                                  },
                                  "text": "["
                                },
                                {
                                  "type": "call",
                                  "start": {
                                    "row": 59,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 67,
                                    "column": 17
                                  },
                                  "text": "pool.submit(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 59,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 59,
                                        "column": 27
                                      },
                                      "text": "pool.submit",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 59,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 20
                                          },
                                          "text": "pool"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 59,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 21
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 59,
                                            "column": 21
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 27
                                          },
                                          "text": "submit"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "argument_list",
                                      "start": {
                                        "row": 59,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 67,
                                        "column": 17
                                      },
                                      "text": "(\n                    self._to_dataframe_bqstorage_stream,\n                    bqstorage_client,\n                    dtypes,\n                    columns,\n                    session,\n                    stream,\n                    worker_queue,\n                )",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 59,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 28
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 60,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 60,
                                            "column": 55
                                          },
                                          "text": "self._to_dataframe_bqstorage_stream",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 60,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 60,
                                                "column": 24
                                              },
                                              "text": "self"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 60,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 60,
                                                "column": 25
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 60,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 60,
                                                "column": 55
                                              },
                                              "text": "_to_dataframe_bqstorage_stream"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 60,
                                            "column": 55
                                          },
                                          "end": {
                                            "row": 60,
                                            "column": 56
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 61,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 61,
                                            "column": 36
                                          },
                                          "text": "bqstorage_client"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 61,
                                            "column": 36
                                          },
                                          "end": {
                                            "row": 61,
                                            "column": 37
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 62,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 62,
                                            "column": 26
                                          },
                                          "text": "dtypes"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 62,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 62,
                                            "column": 27
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 63,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 63,
                                            "column": 27
                                          },
                                          "text": "columns"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 63,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 63,
                                            "column": 28
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 64,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 64,
                                            "column": 27
                                          },
                                          "text": "session"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 64,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 64,
                                            "column": 28
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 65,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 65,
                                            "column": 26
                                          },
                                          "text": "stream"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 65,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 65,
                                            "column": 27
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 66,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 66,
                                            "column": 32
                                          },
                                          "text": "worker_queue"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 66,
                                            "column": 32
                                          },
                                          "end": {
                                            "row": 66,
                                            "column": 33
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 67,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 67,
                                            "column": 17
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "for_in_clause",
                                  "start": {
                                    "row": 68,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 68,
                                    "column": 45
                                  },
                                  "text": "for stream in session.streams",
                                  "children": [
                                    {
                                      "type": "for",
                                      "start": {
                                        "row": 68,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 19
                                      },
                                      "text": "for"
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 68,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 26
                                      },
                                      "text": "stream"
                                    },
                                    {
                                      "type": "in",
                                      "start": {
                                        "row": 68,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 29
                                      },
                                      "text": "in"
                                    },
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 68,
                                        "column": 30
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 45
                                      },
                                      "text": "session.streams",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 68,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 37
                                          },
                                          "text": "session"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 68,
                                            "column": 37
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 38
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 68,
                                            "column": 38
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 45
                                          },
                                          "text": "streams"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "]",
                                  "start": {
                                    "row": 69,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 69,
                                    "column": 13
                                  },
                                  "text": "]"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "while_statement",
                      "start": {
                        "row": 71,
                        "column": 12
                      },
                      "end": {
                        "row": 79,
                        "column": 76
                      },
                      "text": "while not_done:\n                done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)",
                      "children": [
                        {
                          "type": "while",
                          "start": {
                            "row": 71,
                            "column": 12
                          },
                          "end": {
                            "row": 71,
                            "column": 17
                          },
                          "text": "while"
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 71,
                            "column": 18
                          },
                          "end": {
                            "row": 71,
                            "column": 26
                          },
                          "text": "not_done"
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 71,
                            "column": 26
                          },
                          "end": {
                            "row": 71,
                            "column": 27
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 72,
                            "column": 16
                          },
                          "end": {
                            "row": 79,
                            "column": 76
                          },
                          "text": "done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )\n                frames.extend([future.result() for future in done])\n\n                # The progress bar needs to update on the main thread to avoid\n                # contention over stdout / stderr.\n                self._process_progress_updates(progress_queue, progress_bar)",
                          "children": [
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 72,
                                "column": 16
                              },
                              "end": {
                                "row": 74,
                                "column": 17
                              },
                              "text": "done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 72,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 74,
                                    "column": 17
                                  },
                                  "text": "done, not_done = concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )",
                                  "children": [
                                    {
                                      "type": "pattern_list",
                                      "start": {
                                        "row": 72,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 72,
                                        "column": 30
                                      },
                                      "text": "done, not_done",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 72,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 72,
                                            "column": 20
                                          },
                                          "text": "done"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 72,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 72,
                                            "column": 21
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 72,
                                            "column": 22
                                          },
                                          "end": {
                                            "row": 72,
                                            "column": 30
                                          },
                                          "text": "not_done"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 72,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 72,
                                        "column": 32
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "call",
                                      "start": {
                                        "row": 72,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 74,
                                        "column": 17
                                      },
                                      "text": "concurrent.futures.wait(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )",
                                      "children": [
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 72,
                                            "column": 33
                                          },
                                          "end": {
                                            "row": 72,
                                            "column": 56
                                          },
                                          "text": "concurrent.futures.wait",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 72,
                                                "column": 33
                                              },
                                              "end": {
                                                "row": 72,
                                                "column": 51
                                              },
                                              "text": "concurrent.futures",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 72,
                                                    "column": 33
                                                  },
                                                  "end": {
                                                    "row": 72,
                                                    "column": 43
                                                  },
                                                  "text": "concurrent"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 72,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 72,
                                                    "column": 44
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 72,
                                                    "column": 44
                                                  },
                                                  "end": {
                                                    "row": 72,
                                                    "column": 51
                                                  },
                                                  "text": "futures"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 72,
                                                "column": 51
                                              },
                                              "end": {
                                                "row": 72,
                                                "column": 52
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 72,
                                                "column": 52
                                              },
                                              "end": {
                                                "row": 72,
                                                "column": 56
                                              },
                                              "text": "wait"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "argument_list",
                                          "start": {
                                            "row": 72,
                                            "column": 56
                                          },
                                          "end": {
                                            "row": 74,
                                            "column": 17
                                          },
                                          "text": "(\n                    not_done, timeout=_PROGRESS_INTERVAL\n                )",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 72,
                                                "column": 56
                                              },
                                              "end": {
                                                "row": 72,
                                                "column": 57
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 73,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 73,
                                                "column": 28
                                              },
                                              "text": "not_done"
                                            },
                                            {
                                              "type": ",",
                                              "start": {
                                                "row": 73,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 73,
                                                "column": 29
                                              },
                                              "text": ","
                                            },
                                            {
                                              "type": "keyword_argument",
                                              "start": {
                                                "row": 73,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 73,
                                                "column": 56
                                              },
                                              "text": "timeout=_PROGRESS_INTERVAL",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 73,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 73,
                                                    "column": 37
                                                  },
                                                  "text": "timeout"
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 73,
                                                    "column": 37
                                                  },
                                                  "end": {
                                                    "row": 73,
                                                    "column": 38
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 73,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 73,
                                                    "column": 56
                                                  },
                                                  "text": "_PROGRESS_INTERVAL"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 74,
                                                "column": 16
                                              },
                                              "end": {
                                                "row": 74,
                                                "column": 17
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 75,
                                "column": 16
                              },
                              "end": {
                                "row": 75,
                                "column": 67
                              },
                              "text": "frames.extend([future.result() for future in done])",
                              "children": [
                                {
                                  "type": "call",
                                  "start": {
                                    "row": 75,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 67
                                  },
                                  "text": "frames.extend([future.result() for future in done])",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 75,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 75,
                                        "column": 29
                                      },
                                      "text": "frames.extend",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 75,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 22
                                          },
                                          "text": "frames"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 75,
                                            "column": 22
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 23
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 75,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 29
                                          },
                                          "text": "extend"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "argument_list",
                                      "start": {
                                        "row": 75,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 75,
                                        "column": 67
                                      },
                                      "text": "([future.result() for future in done])",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 75,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 30
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "list_comprehension",
                                          "start": {
                                            "row": 75,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 66
                                          },
                                          "text": "[future.result() for future in done]",
                                          "children": [
                                            {
                                              "type": "[",
                                              "start": {
                                                "row": 75,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 75,
                                                "column": 31
                                              },
                                              "text": "["
                                            },
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 75,
                                                "column": 31
                                              },
                                              "end": {
                                                "row": 75,
                                                "column": 46
                                              },
                                              "text": "future.result()",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 44
                                                  },
                                                  "text": "future.result",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 75,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 75,
                                                        "column": 37
                                                      },
                                                      "text": "future"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 75,
                                                        "column": 37
                                                      },
                                                      "end": {
                                                        "row": 75,
                                                        "column": 38
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 75,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 75,
                                                        "column": 44
                                                      },
                                                      "text": "result"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 44
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 46
                                                  },
                                                  "text": "()",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 75,
                                                        "column": 44
                                                      },
                                                      "end": {
                                                        "row": 75,
                                                        "column": 45
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 75,
                                                        "column": 45
                                                      },
                                                      "end": {
                                                        "row": 75,
                                                        "column": 46
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "for_in_clause",
                                              "start": {
                                                "row": 75,
                                                "column": 47
                                              },
                                              "end": {
                                                "row": 75,
                                                "column": 65
                                              },
                                              "text": "for future in done",
                                              "children": [
                                                {
                                                  "type": "for",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 50
                                                  },
                                                  "text": "for"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 51
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 57
                                                  },
                                                  "text": "future"
                                                },
                                                {
                                                  "type": "in",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 58
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 60
                                                  },
                                                  "text": "in"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 75,
                                                    "column": 61
                                                  },
                                                  "end": {
                                                    "row": 75,
                                                    "column": 65
                                                  },
                                                  "text": "done"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "]",
                                              "start": {
                                                "row": 75,
                                                "column": 65
                                              },
                                              "end": {
                                                "row": 75,
                                                "column": 66
                                              },
                                              "text": "]"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 75,
                                            "column": 66
                                          },
                                          "end": {
                                            "row": 75,
                                            "column": 67
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 77,
                                "column": 16
                              },
                              "end": {
                                "row": 77,
                                "column": 78
                              },
                              "text": "# The progress bar needs to update on the main thread to avoid"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 78,
                                "column": 16
                              },
                              "end": {
                                "row": 78,
                                "column": 50
                              },
                              "text": "# contention over stdout / stderr."
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 79,
                                "column": 16
                              },
                              "end": {
                                "row": 79,
                                "column": 76
                              },
                              "text": "self._process_progress_updates(progress_queue, progress_bar)",
                              "children": [
                                {
                                  "type": "call",
                                  "start": {
                                    "row": 79,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 79,
                                    "column": 76
                                  },
                                  "text": "self._process_progress_updates(progress_queue, progress_bar)",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 79,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 79,
                                        "column": 46
                                      },
                                      "text": "self._process_progress_updates",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 79,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 20
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 79,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 21
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 79,
                                            "column": 21
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 46
                                          },
                                          "text": "_process_progress_updates"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "argument_list",
                                      "start": {
                                        "row": 79,
                                        "column": 46
                                      },
                                      "end": {
                                        "row": 79,
                                        "column": 76
                                      },
                                      "text": "(progress_queue, progress_bar)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 79,
                                            "column": 46
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 47
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 79,
                                            "column": 47
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 61
                                          },
                                          "text": "progress_queue"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 79,
                                            "column": 61
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 62
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 79,
                                            "column": 63
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 75
                                          },
                                          "text": "progress_bar"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 79,
                                            "column": 75
                                          },
                                          "end": {
                                            "row": 79,
                                            "column": 76
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "return_statement",
                      "start": {
                        "row": 81,
                        "column": 12
                      },
                      "end": {
                        "row": 81,
                        "column": 25
                      },
                      "text": "return frames",
                      "children": [
                        {
                          "type": "return",
                          "start": {
                            "row": 81,
                            "column": 12
                          },
                          "end": {
                            "row": 81,
                            "column": 18
                          },
                          "text": "return"
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 81,
                            "column": 19
                          },
                          "end": {
                            "row": 81,
                            "column": 25
                          },
                          "text": "frames"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "with_statement",
              "start": {
                "row": 83,
                "column": 8
              },
              "end": {
                "row": 96,
                "column": 42
              },
              "text": "with concurrent.futures.ThreadPoolExecutor() as pool:\n            try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()",
              "children": [
                {
                  "type": "with",
                  "start": {
                    "row": 83,
                    "column": 8
                  },
                  "end": {
                    "row": 83,
                    "column": 12
                  },
                  "text": "with"
                },
                {
                  "type": "with_clause",
                  "start": {
                    "row": 83,
                    "column": 13
                  },
                  "end": {
                    "row": 83,
                    "column": 60
                  },
                  "text": "concurrent.futures.ThreadPoolExecutor() as pool",
                  "children": [
                    {
                      "type": "with_item",
                      "start": {
                        "row": 83,
                        "column": 13
                      },
                      "end": {
                        "row": 83,
                        "column": 60
                      },
                      "text": "concurrent.futures.ThreadPoolExecutor() as pool",
                      "children": [
                        {
                          "type": "as_pattern",
                          "start": {
                            "row": 83,
                            "column": 13
                          },
                          "end": {
                            "row": 83,
                            "column": 60
                          },
                          "text": "concurrent.futures.ThreadPoolExecutor() as pool",
                          "children": [
                            {
                              "type": "call",
                              "start": {
                                "row": 83,
                                "column": 13
                              },
                              "end": {
                                "row": 83,
                                "column": 52
                              },
                              "text": "concurrent.futures.ThreadPoolExecutor()",
                              "children": [
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 83,
                                    "column": 13
                                  },
                                  "end": {
                                    "row": 83,
                                    "column": 50
                                  },
                                  "text": "concurrent.futures.ThreadPoolExecutor",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 83,
                                        "column": 13
                                      },
                                      "end": {
                                        "row": 83,
                                        "column": 31
                                      },
                                      "text": "concurrent.futures",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 83,
                                            "column": 13
                                          },
                                          "end": {
                                            "row": 83,
                                            "column": 23
                                          },
                                          "text": "concurrent"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 83,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 83,
                                            "column": 24
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 83,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 83,
                                            "column": 31
                                          },
                                          "text": "futures"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 83,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 83,
                                        "column": 32
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 83,
                                        "column": 32
                                      },
                                      "end": {
                                        "row": 83,
                                        "column": 50
                                      },
                                      "text": "ThreadPoolExecutor"
                                    }
                                  ]
                                },
                                {
                                  "type": "argument_list",
                                  "start": {
                                    "row": 83,
                                    "column": 50
                                  },
                                  "end": {
                                    "row": 83,
                                    "column": 52
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 83,
                                        "column": 50
                                      },
                                      "end": {
                                        "row": 83,
                                        "column": 51
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 83,
                                        "column": 51
                                      },
                                      "end": {
                                        "row": 83,
                                        "column": 52
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "as",
                              "start": {
                                "row": 83,
                                "column": 53
                              },
                              "end": {
                                "row": 83,
                                "column": 55
                              },
                              "text": "as"
                            },
                            {
                              "type": "as_pattern_target",
                              "start": {
                                "row": 83,
                                "column": 56
                              },
                              "end": {
                                "row": 83,
                                "column": 60
                              },
                              "text": "pool",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 83,
                                    "column": 56
                                  },
                                  "end": {
                                    "row": 83,
                                    "column": 60
                                  },
                                  "text": "pool"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 83,
                    "column": 60
                  },
                  "end": {
                    "row": 83,
                    "column": 61
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 84,
                    "column": 12
                  },
                  "end": {
                    "row": 96,
                    "column": 42
                  },
                  "text": "try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()",
                  "children": [
                    {
                      "type": "try_statement",
                      "start": {
                        "row": 84,
                        "column": 12
                      },
                      "end": {
                        "row": 96,
                        "column": 42
                      },
                      "text": "try:\n                frames = get_frames(pool)\n            finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()",
                      "children": [
                        {
                          "type": "try",
                          "start": {
                            "row": 84,
                            "column": 12
                          },
                          "end": {
                            "row": 84,
                            "column": 15
                          },
                          "text": "try"
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 84,
                            "column": 15
                          },
                          "end": {
                            "row": 84,
                            "column": 16
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 85,
                            "column": 16
                          },
                          "end": {
                            "row": 85,
                            "column": 41
                          },
                          "text": "frames = get_frames(pool)",
                          "children": [
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 85,
                                "column": 16
                              },
                              "end": {
                                "row": 85,
                                "column": 41
                              },
                              "text": "frames = get_frames(pool)",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 85,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 85,
                                    "column": 41
                                  },
                                  "text": "frames = get_frames(pool)",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 85,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 85,
                                        "column": 22
                                      },
                                      "text": "frames"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 85,
                                        "column": 23
                                      },
                                      "end": {
                                        "row": 85,
                                        "column": 24
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "call",
                                      "start": {
                                        "row": 85,
                                        "column": 25
                                      },
                                      "end": {
                                        "row": 85,
                                        "column": 41
                                      },
                                      "text": "get_frames(pool)",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 85,
                                            "column": 25
                                          },
                                          "end": {
                                            "row": 85,
                                            "column": 35
                                          },
                                          "text": "get_frames"
                                        },
                                        {
                                          "type": "argument_list",
                                          "start": {
                                            "row": 85,
                                            "column": 35
                                          },
                                          "end": {
                                            "row": 85,
                                            "column": 41
                                          },
                                          "text": "(pool)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 85,
                                                "column": 35
                                              },
                                              "end": {
                                                "row": 85,
                                                "column": 36
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 85,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 85,
                                                "column": 40
                                              },
                                              "text": "pool"
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 85,
                                                "column": 40
                                              },
                                              "end": {
                                                "row": 85,
                                                "column": 41
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "finally_clause",
                          "start": {
                            "row": 86,
                            "column": 12
                          },
                          "end": {
                            "row": 96,
                            "column": 42
                          },
                          "text": "finally:\n                # No need for a lock because reading/replacing a variable is\n                # defined to be an atomic operation in the Python language\n                # definition (enforced by the global interpreter lock).\n                self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()",
                          "children": [
                            {
                              "type": "finally",
                              "start": {
                                "row": 86,
                                "column": 12
                              },
                              "end": {
                                "row": 86,
                                "column": 19
                              },
                              "text": "finally"
                            },
                            {
                              "type": ":",
                              "start": {
                                "row": 86,
                                "column": 19
                              },
                              "end": {
                                "row": 86,
                                "column": 20
                              },
                              "text": ":"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 87,
                                "column": 16
                              },
                              "end": {
                                "row": 87,
                                "column": 76
                              },
                              "text": "# No need for a lock because reading/replacing a variable is"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 88,
                                "column": 16
                              },
                              "end": {
                                "row": 88,
                                "column": 74
                              },
                              "text": "# defined to be an atomic operation in the Python language"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 89,
                                "column": 16
                              },
                              "end": {
                                "row": 89,
                                "column": 71
                              },
                              "text": "# definition (enforced by the global interpreter lock)."
                            },
                            {
                              "type": "block",
                              "start": {
                                "row": 90,
                                "column": 16
                              },
                              "end": {
                                "row": 96,
                                "column": 42
                              },
                              "text": "self._to_dataframe_finished = True\n\n                # Shutdown all background threads, now that they should know to\n                # exit early.\n                pool.shutdown(wait=True)\n                if progress_thread is not None:\n                    progress_thread.join()",
                              "children": [
                                {
                                  "type": "expression_statement",
                                  "start": {
                                    "row": 90,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 90,
                                    "column": 50
                                  },
                                  "text": "self._to_dataframe_finished = True",
                                  "children": [
                                    {
                                      "type": "assignment",
                                      "start": {
                                        "row": 90,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 90,
                                        "column": 50
                                      },
                                      "text": "self._to_dataframe_finished = True",
                                      "children": [
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 90,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 90,
                                            "column": 43
                                          },
                                          "text": "self._to_dataframe_finished",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 90,
                                                "column": 16
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 20
                                              },
                                              "text": "self"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 90,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 21
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 90,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 43
                                              },
                                              "text": "_to_dataframe_finished"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "=",
                                          "start": {
                                            "row": 90,
                                            "column": 44
                                          },
                                          "end": {
                                            "row": 90,
                                            "column": 45
                                          },
                                          "text": "="
                                        },
                                        {
                                          "type": "true",
                                          "start": {
                                            "row": 90,
                                            "column": 46
                                          },
                                          "end": {
                                            "row": 90,
                                            "column": 50
                                          },
                                          "text": "True"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "comment",
                                  "start": {
                                    "row": 92,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 92,
                                    "column": 79
                                  },
                                  "text": "# Shutdown all background threads, now that they should know to"
                                },
                                {
                                  "type": "comment",
                                  "start": {
                                    "row": 93,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 93,
                                    "column": 29
                                  },
                                  "text": "# exit early."
                                },
                                {
                                  "type": "expression_statement",
                                  "start": {
                                    "row": 94,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 94,
                                    "column": 40
                                  },
                                  "text": "pool.shutdown(wait=True)",
                                  "children": [
                                    {
                                      "type": "call",
                                      "start": {
                                        "row": 94,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 94,
                                        "column": 40
                                      },
                                      "text": "pool.shutdown(wait=True)",
                                      "children": [
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 94,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 94,
                                            "column": 29
                                          },
                                          "text": "pool.shutdown",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 94,
                                                "column": 16
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 20
                                              },
                                              "text": "pool"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 94,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 21
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 94,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 29
                                              },
                                              "text": "shutdown"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "argument_list",
                                          "start": {
                                            "row": 94,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 94,
                                            "column": 40
                                          },
                                          "text": "(wait=True)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 94,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 30
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "keyword_argument",
                                              "start": {
                                                "row": 94,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 39
                                              },
                                              "text": "wait=True",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 94,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 94,
                                                    "column": 34
                                                  },
                                                  "text": "wait"
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 94,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 94,
                                                    "column": 35
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "true",
                                                  "start": {
                                                    "row": 94,
                                                    "column": 35
                                                  },
                                                  "end": {
                                                    "row": 94,
                                                    "column": 39
                                                  },
                                                  "text": "True"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 94,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 94,
                                                "column": 40
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "if_statement",
                                  "start": {
                                    "row": 95,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 96,
                                    "column": 42
                                  },
                                  "text": "if progress_thread is not None:\n                    progress_thread.join()",
                                  "children": [
                                    {
                                      "type": "if",
                                      "start": {
                                        "row": 95,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 95,
                                        "column": 18
                                      },
                                      "text": "if"
                                    },
                                    {
                                      "type": "comparison_operator",
                                      "start": {
                                        "row": 95,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 95,
                                        "column": 46
                                      },
                                      "text": "progress_thread is not None",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 95,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 95,
                                            "column": 34
                                          },
                                          "text": "progress_thread"
                                        },
                                        {
                                          "type": "is not",
                                          "start": {
                                            "row": 95,
                                            "column": 35
                                          },
                                          "end": {
                                            "row": 95,
                                            "column": 37
                                          },
                                          "text": "is"
                                        },
                                        {
                                          "type": "is not",
                                          "start": {
                                            "row": 95,
                                            "column": 38
                                          },
                                          "end": {
                                            "row": 95,
                                            "column": 41
                                          },
                                          "text": "not"
                                        },
                                        {
                                          "type": "none",
                                          "start": {
                                            "row": 95,
                                            "column": 42
                                          },
                                          "end": {
                                            "row": 95,
                                            "column": 46
                                          },
                                          "text": "None"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 95,
                                        "column": 46
                                      },
                                      "end": {
                                        "row": 95,
                                        "column": 47
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 96,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 96,
                                        "column": 42
                                      },
                                      "text": "progress_thread.join()",
                                      "children": [
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 96,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 96,
                                            "column": 42
                                          },
                                          "text": "progress_thread.join()",
                                          "children": [
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 96,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 96,
                                                "column": 42
                                              },
                                              "text": "progress_thread.join()",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 96,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 96,
                                                    "column": 40
                                                  },
                                                  "text": "progress_thread.join",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 96,
                                                        "column": 20
                                                      },
                                                      "end": {
                                                        "row": 96,
                                                        "column": 35
                                                      },
                                                      "text": "progress_thread"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 96,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 96,
                                                        "column": 36
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 96,
                                                        "column": 36
                                                      },
                                                      "end": {
                                                        "row": 96,
                                                        "column": 40
                                                      },
                                                      "text": "join"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 96,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 96,
                                                    "column": 42
                                                  },
                                                  "text": "()",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 96,
                                                        "column": 40
                                                      },
                                                      "end": {
                                                        "row": 96,
                                                        "column": 41
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 96,
                                                        "column": 41
                                                      },
                                                      "end": {
                                                        "row": 96,
                                                        "column": 42
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 98,
                "column": 8
              },
              "end": {
                "row": 98,
                "column": 60
              },
              "text": "# Update the progress bar one last time to close it."
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 99,
                "column": 8
              },
              "end": {
                "row": 99,
                "column": 68
              },
              "text": "self._process_progress_updates(progress_queue, progress_bar)",
              "children": [
                {
                  "type": "call",
                  "start": {
                    "row": 99,
                    "column": 8
                  },
                  "end": {
                    "row": 99,
                    "column": 68
                  },
                  "text": "self._process_progress_updates(progress_queue, progress_bar)",
                  "children": [
                    {
                      "type": "attribute",
                      "start": {
                        "row": 99,
                        "column": 8
                      },
                      "end": {
                        "row": 99,
                        "column": 38
                      },
                      "text": "self._process_progress_updates",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 99,
                            "column": 8
                          },
                          "end": {
                            "row": 99,
                            "column": 12
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 99,
                            "column": 12
                          },
                          "end": {
                            "row": 99,
                            "column": 13
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 99,
                            "column": 13
                          },
                          "end": {
                            "row": 99,
                            "column": 38
                          },
                          "text": "_process_progress_updates"
                        }
                      ]
                    },
                    {
                      "type": "argument_list",
                      "start": {
                        "row": 99,
                        "column": 38
                      },
                      "end": {
                        "row": 99,
                        "column": 68
                      },
                      "text": "(progress_queue, progress_bar)",
                      "children": [
                        {
                          "type": "(",
                          "start": {
                            "row": 99,
                            "column": 38
                          },
                          "end": {
                            "row": 99,
                            "column": 39
                          },
                          "text": "("
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 99,
                            "column": 39
                          },
                          "end": {
                            "row": 99,
                            "column": 53
                          },
                          "text": "progress_queue"
                        },
                        {
                          "type": ",",
                          "start": {
                            "row": 99,
                            "column": 53
                          },
                          "end": {
                            "row": 99,
                            "column": 54
                          },
                          "text": ","
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 99,
                            "column": 55
                          },
                          "end": {
                            "row": 99,
                            "column": 67
                          },
                          "text": "progress_bar"
                        },
                        {
                          "type": ")",
                          "start": {
                            "row": 99,
                            "column": 67
                          },
                          "end": {
                            "row": 99,
                            "column": 68
                          },
                          "text": ")"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "return_statement",
              "start": {
                "row": 100,
                "column": 8
              },
              "end": {
                "row": 100,
                "column": 36
              },
              "text": "return pandas.concat(frames)",
              "children": [
                {
                  "type": "return",
                  "start": {
                    "row": 100,
                    "column": 8
                  },
                  "end": {
                    "row": 100,
                    "column": 14
                  },
                  "text": "return"
                },
                {
                  "type": "call",
                  "start": {
                    "row": 100,
                    "column": 15
                  },
                  "end": {
                    "row": 100,
                    "column": 36
                  },
                  "text": "pandas.concat(frames)",
                  "children": [
                    {
                      "type": "attribute",
                      "start": {
                        "row": 100,
                        "column": 15
                      },
                      "end": {
                        "row": 100,
                        "column": 28
                      },
                      "text": "pandas.concat",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 100,
                            "column": 15
                          },
                          "end": {
                            "row": 100,
                            "column": 21
                          },
                          "text": "pandas"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 100,
                            "column": 21
                          },
                          "end": {
                            "row": 100,
                            "column": 22
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 100,
                            "column": 22
                          },
                          "end": {
                            "row": 100,
                            "column": 28
                          },
                          "text": "concat"
                        }
                      ]
                    },
                    {
                      "type": "argument_list",
                      "start": {
                        "row": 100,
                        "column": 28
                      },
                      "end": {
                        "row": 100,
                        "column": 36
                      },
                      "text": "(frames)",
                      "children": [
                        {
                          "type": "(",
                          "start": {
                            "row": 100,
                            "column": 28
                          },
                          "end": {
                            "row": 100,
                            "column": 29
                          },
                          "text": "("
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 100,
                            "column": 29
                          },
                          "end": {
                            "row": 100,
                            "column": 35
                          },
                          "text": "frames"
                        },
                        {
                          "type": ")",
                          "start": {
                            "row": 100,
                            "column": 35
                          },
                          "end": {
                            "row": 100,
                            "column": 36
                          },
                          "text": ")"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}