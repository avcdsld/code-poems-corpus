{
  "type": "module",
  "start": {
    "row": 0,
    "column": 0
  },
  "end": {
    "row": 149,
    "column": 21
  },
  "text": "def parse_frame(self, buf: bytes) -> List[Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]]:\n        \"\"\"Return the next frame from the socket.\"\"\"\n        frames = []\n        if self._tail:\n            buf, self._tail = self._tail + buf, b''\n\n        start_pos = 0\n        buf_length = len(buf)\n\n        while True:\n            # read header\n            if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break\n\n            # read payload length\n            if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)\n\n            # read payload mask\n            if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break\n\n            if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break\n\n        self._tail = buf[start_pos:]\n\n        return frames",
  "children": [
    {
      "type": "function_definition",
      "start": {
        "row": 0,
        "column": 0
      },
      "end": {
        "row": 149,
        "column": 21
      },
      "text": "def parse_frame(self, buf: bytes) -> List[Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]]:\n        \"\"\"Return the next frame from the socket.\"\"\"\n        frames = []\n        if self._tail:\n            buf, self._tail = self._tail + buf, b''\n\n        start_pos = 0\n        buf_length = len(buf)\n\n        while True:\n            # read header\n            if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break\n\n            # read payload length\n            if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)\n\n            # read payload mask\n            if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break\n\n            if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break\n\n        self._tail = buf[start_pos:]\n\n        return frames",
      "children": [
        {
          "type": "def",
          "start": {
            "row": 0,
            "column": 0
          },
          "end": {
            "row": 0,
            "column": 3
          },
          "text": "def"
        },
        {
          "type": "identifier",
          "start": {
            "row": 0,
            "column": 4
          },
          "end": {
            "row": 0,
            "column": 15
          },
          "text": "parse_frame"
        },
        {
          "type": "parameters",
          "start": {
            "row": 0,
            "column": 15
          },
          "end": {
            "row": 0,
            "column": 33
          },
          "text": "(self, buf: bytes)",
          "children": [
            {
              "type": "(",
              "start": {
                "row": 0,
                "column": 15
              },
              "end": {
                "row": 0,
                "column": 16
              },
              "text": "("
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 16
              },
              "end": {
                "row": 0,
                "column": 20
              },
              "text": "self"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 20
              },
              "end": {
                "row": 0,
                "column": 21
              },
              "text": ","
            },
            {
              "type": "typed_parameter",
              "start": {
                "row": 0,
                "column": 22
              },
              "end": {
                "row": 0,
                "column": 32
              },
              "text": "buf: bytes",
              "children": [
                {
                  "type": "identifier",
                  "start": {
                    "row": 0,
                    "column": 22
                  },
                  "end": {
                    "row": 0,
                    "column": 25
                  },
                  "text": "buf"
                },
                {
                  "type": ":",
                  "start": {
                    "row": 0,
                    "column": 25
                  },
                  "end": {
                    "row": 0,
                    "column": 26
                  },
                  "text": ":"
                },
                {
                  "type": "type",
                  "start": {
                    "row": 0,
                    "column": 27
                  },
                  "end": {
                    "row": 0,
                    "column": 32
                  },
                  "text": "bytes",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 0,
                        "column": 27
                      },
                      "end": {
                        "row": 0,
                        "column": 32
                      },
                      "text": "bytes"
                    }
                  ]
                }
              ]
            },
            {
              "type": ")",
              "start": {
                "row": 0,
                "column": 32
              },
              "end": {
                "row": 0,
                "column": 33
              },
              "text": ")"
            }
          ]
        },
        {
          "type": "->",
          "start": {
            "row": 0,
            "column": 34
          },
          "end": {
            "row": 0,
            "column": 36
          },
          "text": "->"
        },
        {
          "type": "type",
          "start": {
            "row": 0,
            "column": 37
          },
          "end": {
            "row": 2,
            "column": 68
          },
          "text": "List[Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]]",
          "children": [
            {
              "type": "generic_type",
              "start": {
                "row": 0,
                "column": 37
              },
              "end": {
                "row": 2,
                "column": 68
              },
              "text": "List[Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]]",
              "children": [
                {
                  "type": "identifier",
                  "start": {
                    "row": 0,
                    "column": 37
                  },
                  "end": {
                    "row": 0,
                    "column": 41
                  },
                  "text": "List"
                },
                {
                  "type": "type_parameter",
                  "start": {
                    "row": 0,
                    "column": 41
                  },
                  "end": {
                    "row": 2,
                    "column": 68
                  },
                  "text": "[Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]]",
                  "children": [
                    {
                      "type": "[",
                      "start": {
                        "row": 0,
                        "column": 41
                      },
                      "end": {
                        "row": 0,
                        "column": 42
                      },
                      "text": "["
                    },
                    {
                      "type": "type",
                      "start": {
                        "row": 0,
                        "column": 42
                      },
                      "end": {
                        "row": 2,
                        "column": 67
                      },
                      "text": "Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]",
                      "children": [
                        {
                          "type": "generic_type",
                          "start": {
                            "row": 0,
                            "column": 42
                          },
                          "end": {
                            "row": 2,
                            "column": 67
                          },
                          "text": "Tuple[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 0,
                                "column": 42
                              },
                              "end": {
                                "row": 0,
                                "column": 47
                              },
                              "text": "Tuple"
                            },
                            {
                              "type": "type_parameter",
                              "start": {
                                "row": 0,
                                "column": 47
                              },
                              "end": {
                                "row": 2,
                                "column": 67
                              },
                              "text": "[bool, Optional[int],\n                                                    bytearray,\n                                                    Optional[bool]]",
                              "children": [
                                {
                                  "type": "[",
                                  "start": {
                                    "row": 0,
                                    "column": 47
                                  },
                                  "end": {
                                    "row": 0,
                                    "column": 48
                                  },
                                  "text": "["
                                },
                                {
                                  "type": "type",
                                  "start": {
                                    "row": 0,
                                    "column": 48
                                  },
                                  "end": {
                                    "row": 0,
                                    "column": 52
                                  },
                                  "text": "bool",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 0,
                                        "column": 48
                                      },
                                      "end": {
                                        "row": 0,
                                        "column": 52
                                      },
                                      "text": "bool"
                                    }
                                  ]
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 0,
                                    "column": 52
                                  },
                                  "end": {
                                    "row": 0,
                                    "column": 53
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "type",
                                  "start": {
                                    "row": 0,
                                    "column": 54
                                  },
                                  "end": {
                                    "row": 0,
                                    "column": 67
                                  },
                                  "text": "Optional[int]",
                                  "children": [
                                    {
                                      "type": "generic_type",
                                      "start": {
                                        "row": 0,
                                        "column": 54
                                      },
                                      "end": {
                                        "row": 0,
                                        "column": 67
                                      },
                                      "text": "Optional[int]",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 0,
                                            "column": 54
                                          },
                                          "end": {
                                            "row": 0,
                                            "column": 62
                                          },
                                          "text": "Optional"
                                        },
                                        {
                                          "type": "type_parameter",
                                          "start": {
                                            "row": 0,
                                            "column": 62
                                          },
                                          "end": {
                                            "row": 0,
                                            "column": 67
                                          },
                                          "text": "[int]",
                                          "children": [
                                            {
                                              "type": "[",
                                              "start": {
                                                "row": 0,
                                                "column": 62
                                              },
                                              "end": {
                                                "row": 0,
                                                "column": 63
                                              },
                                              "text": "["
                                            },
                                            {
                                              "type": "type",
                                              "start": {
                                                "row": 0,
                                                "column": 63
                                              },
                                              "end": {
                                                "row": 0,
                                                "column": 66
                                              },
                                              "text": "int",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 0,
                                                    "column": 63
                                                  },
                                                  "end": {
                                                    "row": 0,
                                                    "column": 66
                                                  },
                                                  "text": "int"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "]",
                                              "start": {
                                                "row": 0,
                                                "column": 66
                                              },
                                              "end": {
                                                "row": 0,
                                                "column": 67
                                              },
                                              "text": "]"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 0,
                                    "column": 67
                                  },
                                  "end": {
                                    "row": 0,
                                    "column": 68
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "type",
                                  "start": {
                                    "row": 1,
                                    "column": 52
                                  },
                                  "end": {
                                    "row": 1,
                                    "column": 61
                                  },
                                  "text": "bytearray",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 1,
                                        "column": 52
                                      },
                                      "end": {
                                        "row": 1,
                                        "column": 61
                                      },
                                      "text": "bytearray"
                                    }
                                  ]
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 1,
                                    "column": 61
                                  },
                                  "end": {
                                    "row": 1,
                                    "column": 62
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "type",
                                  "start": {
                                    "row": 2,
                                    "column": 52
                                  },
                                  "end": {
                                    "row": 2,
                                    "column": 66
                                  },
                                  "text": "Optional[bool]",
                                  "children": [
                                    {
                                      "type": "generic_type",
                                      "start": {
                                        "row": 2,
                                        "column": 52
                                      },
                                      "end": {
                                        "row": 2,
                                        "column": 66
                                      },
                                      "text": "Optional[bool]",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 2,
                                            "column": 52
                                          },
                                          "end": {
                                            "row": 2,
                                            "column": 60
                                          },
                                          "text": "Optional"
                                        },
                                        {
                                          "type": "type_parameter",
                                          "start": {
                                            "row": 2,
                                            "column": 60
                                          },
                                          "end": {
                                            "row": 2,
                                            "column": 66
                                          },
                                          "text": "[bool]",
                                          "children": [
                                            {
                                              "type": "[",
                                              "start": {
                                                "row": 2,
                                                "column": 60
                                              },
                                              "end": {
                                                "row": 2,
                                                "column": 61
                                              },
                                              "text": "["
                                            },
                                            {
                                              "type": "type",
                                              "start": {
                                                "row": 2,
                                                "column": 61
                                              },
                                              "end": {
                                                "row": 2,
                                                "column": 65
                                              },
                                              "text": "bool",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 2,
                                                    "column": 61
                                                  },
                                                  "end": {
                                                    "row": 2,
                                                    "column": 65
                                                  },
                                                  "text": "bool"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "]",
                                              "start": {
                                                "row": 2,
                                                "column": 65
                                              },
                                              "end": {
                                                "row": 2,
                                                "column": 66
                                              },
                                              "text": "]"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "]",
                                  "start": {
                                    "row": 2,
                                    "column": 66
                                  },
                                  "end": {
                                    "row": 2,
                                    "column": 67
                                  },
                                  "text": "]"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "]",
                      "start": {
                        "row": 2,
                        "column": 67
                      },
                      "end": {
                        "row": 2,
                        "column": 68
                      },
                      "text": "]"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": ":",
          "start": {
            "row": 2,
            "column": 68
          },
          "end": {
            "row": 2,
            "column": 69
          },
          "text": ":"
        },
        {
          "type": "block",
          "start": {
            "row": 3,
            "column": 8
          },
          "end": {
            "row": 149,
            "column": 21
          },
          "text": "\"\"\"Return the next frame from the socket.\"\"\"\n        frames = []\n        if self._tail:\n            buf, self._tail = self._tail + buf, b''\n\n        start_pos = 0\n        buf_length = len(buf)\n\n        while True:\n            # read header\n            if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break\n\n            # read payload length\n            if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)\n\n            # read payload mask\n            if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break\n\n            if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break\n\n        self._tail = buf[start_pos:]\n\n        return frames",
          "children": [
            {
              "type": "expression_statement",
              "start": {
                "row": 3,
                "column": 8
              },
              "end": {
                "row": 3,
                "column": 52
              },
              "text": "\"\"\"Return the next frame from the socket.\"\"\"",
              "children": [
                {
                  "type": "string",
                  "start": {
                    "row": 3,
                    "column": 8
                  },
                  "end": {
                    "row": 3,
                    "column": 52
                  },
                  "text": "\"\"\"Return the next frame from the socket.\"\"\"",
                  "children": [
                    {
                      "type": "string_start",
                      "start": {
                        "row": 3,
                        "column": 8
                      },
                      "end": {
                        "row": 3,
                        "column": 11
                      },
                      "text": "\"\"\""
                    },
                    {
                      "type": "string_content",
                      "start": {
                        "row": 3,
                        "column": 11
                      },
                      "end": {
                        "row": 3,
                        "column": 49
                      },
                      "text": "Return the next frame from the socket."
                    },
                    {
                      "type": "string_end",
                      "start": {
                        "row": 3,
                        "column": 49
                      },
                      "end": {
                        "row": 3,
                        "column": 52
                      },
                      "text": "\"\"\""
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 4,
                "column": 8
              },
              "end": {
                "row": 4,
                "column": 19
              },
              "text": "frames = []",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 4,
                    "column": 8
                  },
                  "end": {
                    "row": 4,
                    "column": 19
                  },
                  "text": "frames = []",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 4,
                        "column": 8
                      },
                      "end": {
                        "row": 4,
                        "column": 14
                      },
                      "text": "frames"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 4,
                        "column": 15
                      },
                      "end": {
                        "row": 4,
                        "column": 16
                      },
                      "text": "="
                    },
                    {
                      "type": "list",
                      "start": {
                        "row": 4,
                        "column": 17
                      },
                      "end": {
                        "row": 4,
                        "column": 19
                      },
                      "text": "[]",
                      "children": [
                        {
                          "type": "[",
                          "start": {
                            "row": 4,
                            "column": 17
                          },
                          "end": {
                            "row": 4,
                            "column": 18
                          },
                          "text": "["
                        },
                        {
                          "type": "]",
                          "start": {
                            "row": 4,
                            "column": 18
                          },
                          "end": {
                            "row": 4,
                            "column": 19
                          },
                          "text": "]"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "if_statement",
              "start": {
                "row": 5,
                "column": 8
              },
              "end": {
                "row": 6,
                "column": 51
              },
              "text": "if self._tail:\n            buf, self._tail = self._tail + buf, b''",
              "children": [
                {
                  "type": "if",
                  "start": {
                    "row": 5,
                    "column": 8
                  },
                  "end": {
                    "row": 5,
                    "column": 10
                  },
                  "text": "if"
                },
                {
                  "type": "attribute",
                  "start": {
                    "row": 5,
                    "column": 11
                  },
                  "end": {
                    "row": 5,
                    "column": 21
                  },
                  "text": "self._tail",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 5,
                        "column": 11
                      },
                      "end": {
                        "row": 5,
                        "column": 15
                      },
                      "text": "self"
                    },
                    {
                      "type": ".",
                      "start": {
                        "row": 5,
                        "column": 15
                      },
                      "end": {
                        "row": 5,
                        "column": 16
                      },
                      "text": "."
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 5,
                        "column": 16
                      },
                      "end": {
                        "row": 5,
                        "column": 21
                      },
                      "text": "_tail"
                    }
                  ]
                },
                {
                  "type": ":",
                  "start": {
                    "row": 5,
                    "column": 21
                  },
                  "end": {
                    "row": 5,
                    "column": 22
                  },
                  "text": ":"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 6,
                    "column": 12
                  },
                  "end": {
                    "row": 6,
                    "column": 51
                  },
                  "text": "buf, self._tail = self._tail + buf, b''",
                  "children": [
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 6,
                        "column": 12
                      },
                      "end": {
                        "row": 6,
                        "column": 51
                      },
                      "text": "buf, self._tail = self._tail + buf, b''",
                      "children": [
                        {
                          "type": "assignment",
                          "start": {
                            "row": 6,
                            "column": 12
                          },
                          "end": {
                            "row": 6,
                            "column": 51
                          },
                          "text": "buf, self._tail = self._tail + buf, b''",
                          "children": [
                            {
                              "type": "pattern_list",
                              "start": {
                                "row": 6,
                                "column": 12
                              },
                              "end": {
                                "row": 6,
                                "column": 27
                              },
                              "text": "buf, self._tail",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 6,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 15
                                  },
                                  "text": "buf"
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 6,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 16
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "attribute",
                                  "start": {
                                    "row": 6,
                                    "column": 17
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 27
                                  },
                                  "text": "self._tail",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 6,
                                        "column": 17
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 21
                                      },
                                      "text": "self"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 6,
                                        "column": 21
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 22
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 6,
                                        "column": 22
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 27
                                      },
                                      "text": "_tail"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 6,
                                "column": 28
                              },
                              "end": {
                                "row": 6,
                                "column": 29
                              },
                              "text": "="
                            },
                            {
                              "type": "expression_list",
                              "start": {
                                "row": 6,
                                "column": 30
                              },
                              "end": {
                                "row": 6,
                                "column": 51
                              },
                              "text": "self._tail + buf, b''",
                              "children": [
                                {
                                  "type": "binary_operator",
                                  "start": {
                                    "row": 6,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 46
                                  },
                                  "text": "self._tail + buf",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 6,
                                        "column": 30
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 40
                                      },
                                      "text": "self._tail",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 6,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 6,
                                            "column": 34
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 6,
                                            "column": 34
                                          },
                                          "end": {
                                            "row": 6,
                                            "column": 35
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 6,
                                            "column": 35
                                          },
                                          "end": {
                                            "row": 6,
                                            "column": 40
                                          },
                                          "text": "_tail"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "+",
                                      "start": {
                                        "row": 6,
                                        "column": 41
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 42
                                      },
                                      "text": "+"
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 6,
                                        "column": 43
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 46
                                      },
                                      "text": "buf"
                                    }
                                  ]
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 6,
                                    "column": 46
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 47
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "string",
                                  "start": {
                                    "row": 6,
                                    "column": 48
                                  },
                                  "end": {
                                    "row": 6,
                                    "column": 51
                                  },
                                  "text": "b''",
                                  "children": [
                                    {
                                      "type": "string_start",
                                      "start": {
                                        "row": 6,
                                        "column": 48
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 50
                                      },
                                      "text": "b'"
                                    },
                                    {
                                      "type": "string_end",
                                      "start": {
                                        "row": 6,
                                        "column": 50
                                      },
                                      "end": {
                                        "row": 6,
                                        "column": 51
                                      },
                                      "text": "'"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 8,
                "column": 8
              },
              "end": {
                "row": 8,
                "column": 21
              },
              "text": "start_pos = 0",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 8,
                    "column": 8
                  },
                  "end": {
                    "row": 8,
                    "column": 21
                  },
                  "text": "start_pos = 0",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 8,
                        "column": 8
                      },
                      "end": {
                        "row": 8,
                        "column": 17
                      },
                      "text": "start_pos"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 8,
                        "column": 18
                      },
                      "end": {
                        "row": 8,
                        "column": 19
                      },
                      "text": "="
                    },
                    {
                      "type": "integer",
                      "start": {
                        "row": 8,
                        "column": 20
                      },
                      "end": {
                        "row": 8,
                        "column": 21
                      },
                      "text": "0"
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 9,
                "column": 8
              },
              "end": {
                "row": 9,
                "column": 29
              },
              "text": "buf_length = len(buf)",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 9,
                    "column": 8
                  },
                  "end": {
                    "row": 9,
                    "column": 29
                  },
                  "text": "buf_length = len(buf)",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 9,
                        "column": 8
                      },
                      "end": {
                        "row": 9,
                        "column": 18
                      },
                      "text": "buf_length"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 9,
                        "column": 19
                      },
                      "end": {
                        "row": 9,
                        "column": 20
                      },
                      "text": "="
                    },
                    {
                      "type": "call",
                      "start": {
                        "row": 9,
                        "column": 21
                      },
                      "end": {
                        "row": 9,
                        "column": 29
                      },
                      "text": "len(buf)",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 9,
                            "column": 21
                          },
                          "end": {
                            "row": 9,
                            "column": 24
                          },
                          "text": "len"
                        },
                        {
                          "type": "argument_list",
                          "start": {
                            "row": 9,
                            "column": 24
                          },
                          "end": {
                            "row": 9,
                            "column": 29
                          },
                          "text": "(buf)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 9,
                                "column": 24
                              },
                              "end": {
                                "row": 9,
                                "column": 25
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 9,
                                "column": 25
                              },
                              "end": {
                                "row": 9,
                                "column": 28
                              },
                              "text": "buf"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 9,
                                "column": 28
                              },
                              "end": {
                                "row": 9,
                                "column": 29
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "while_statement",
              "start": {
                "row": 11,
                "column": 8
              },
              "end": {
                "row": 145,
                "column": 25
              },
              "text": "while True:\n            # read header\n            if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break\n\n            # read payload length\n            if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)\n\n            # read payload mask\n            if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break\n\n            if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break",
              "children": [
                {
                  "type": "while",
                  "start": {
                    "row": 11,
                    "column": 8
                  },
                  "end": {
                    "row": 11,
                    "column": 13
                  },
                  "text": "while"
                },
                {
                  "type": "true",
                  "start": {
                    "row": 11,
                    "column": 14
                  },
                  "end": {
                    "row": 11,
                    "column": 18
                  },
                  "text": "True"
                },
                {
                  "type": ":",
                  "start": {
                    "row": 11,
                    "column": 18
                  },
                  "end": {
                    "row": 11,
                    "column": 19
                  },
                  "text": ":"
                },
                {
                  "type": "comment",
                  "start": {
                    "row": 12,
                    "column": 12
                  },
                  "end": {
                    "row": 12,
                    "column": 25
                  },
                  "text": "# read header"
                },
                {
                  "type": "block",
                  "start": {
                    "row": 13,
                    "column": 12
                  },
                  "end": {
                    "row": 145,
                    "column": 25
                  },
                  "text": "if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break\n\n            # read payload length\n            if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)\n\n            # read payload mask\n            if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break\n\n            if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break",
                  "children": [
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 13,
                        "column": 12
                      },
                      "end": {
                        "row": 72,
                        "column": 25
                      },
                      "text": "if self._state == WSParserState.READ_HEADER:\n                if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 13,
                            "column": 12
                          },
                          "end": {
                            "row": 13,
                            "column": 14
                          },
                          "text": "if"
                        },
                        {
                          "type": "comparison_operator",
                          "start": {
                            "row": 13,
                            "column": 15
                          },
                          "end": {
                            "row": 13,
                            "column": 55
                          },
                          "text": "self._state == WSParserState.READ_HEADER",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 13,
                                "column": 15
                              },
                              "end": {
                                "row": 13,
                                "column": 26
                              },
                              "text": "self._state",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 13,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 19
                                  },
                                  "text": "self"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 13,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 20
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 13,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 26
                                  },
                                  "text": "_state"
                                }
                              ]
                            },
                            {
                              "type": "==",
                              "start": {
                                "row": 13,
                                "column": 27
                              },
                              "end": {
                                "row": 13,
                                "column": 29
                              },
                              "text": "=="
                            },
                            {
                              "type": "attribute",
                              "start": {
                                "row": 13,
                                "column": 30
                              },
                              "end": {
                                "row": 13,
                                "column": 55
                              },
                              "text": "WSParserState.READ_HEADER",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 13,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 43
                                  },
                                  "text": "WSParserState"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 13,
                                    "column": 43
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 44
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 13,
                                    "column": 44
                                  },
                                  "end": {
                                    "row": 13,
                                    "column": 55
                                  },
                                  "text": "READ_HEADER"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 13,
                            "column": 55
                          },
                          "end": {
                            "row": 13,
                            "column": 56
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 14,
                            "column": 16
                          },
                          "end": {
                            "row": 72,
                            "column": 25
                          },
                          "text": "if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break",
                          "children": [
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 14,
                                "column": 16
                              },
                              "end": {
                                "row": 72,
                                "column": 25
                              },
                              "text": "if buf_length - start_pos >= 2:\n                    data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH\n                else:\n                    break",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 14,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 18
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "comparison_operator",
                                  "start": {
                                    "row": 14,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 46
                                  },
                                  "text": "buf_length - start_pos >= 2",
                                  "children": [
                                    {
                                      "type": "binary_operator",
                                      "start": {
                                        "row": 14,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 14,
                                        "column": 41
                                      },
                                      "text": "buf_length - start_pos",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 14,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 14,
                                            "column": 29
                                          },
                                          "text": "buf_length"
                                        },
                                        {
                                          "type": "-",
                                          "start": {
                                            "row": 14,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 14,
                                            "column": 31
                                          },
                                          "text": "-"
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 14,
                                            "column": 32
                                          },
                                          "end": {
                                            "row": 14,
                                            "column": 41
                                          },
                                          "text": "start_pos"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ">=",
                                      "start": {
                                        "row": 14,
                                        "column": 42
                                      },
                                      "end": {
                                        "row": 14,
                                        "column": 44
                                      },
                                      "text": ">="
                                    },
                                    {
                                      "type": "integer",
                                      "start": {
                                        "row": 14,
                                        "column": 45
                                      },
                                      "end": {
                                        "row": 14,
                                        "column": 46
                                      },
                                      "text": "2"
                                    }
                                  ]
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 14,
                                    "column": 46
                                  },
                                  "end": {
                                    "row": 14,
                                    "column": 47
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "block",
                                  "start": {
                                    "row": 15,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 70,
                                    "column": 67
                                  },
                                  "text": "data = buf[start_pos:start_pos+2]\n                    start_pos += 2\n                    first_byte, second_byte = data\n\n                    fin = (first_byte >> 7) & 1\n                    rsv1 = (first_byte >> 6) & 1\n                    rsv2 = (first_byte >> 5) & 1\n                    rsv3 = (first_byte >> 4) & 1\n                    opcode = first_byte & 0xf\n\n                    # frame-fin = %x0 ; more frames of this message follow\n                    #           / %x1 ; final frame of this message\n                    # frame-rsv1 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv2 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    # frame-rsv3 = %x0 ;\n                    #    1 bit, MUST be 0 unless negotiated otherwise\n                    #\n                    # Remove rsv1 from this test for deflate development\n                    if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')\n\n                    has_mask = (second_byte >> 7) & 1\n                    length = second_byte & 0x7f\n\n                    # Control frames MUST have a payload\n                    # length of 125 bytes or less\n                    if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')\n\n                    # Set compress status if last package is FIN\n                    # OR set compress status if this is first fragment\n                    # Raise error if not first fragment with rsv1 = 0x1\n                    if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')\n\n                    self._frame_fin = bool(fin)\n                    self._frame_opcode = opcode\n                    self._has_mask = bool(has_mask)\n                    self._payload_length_flag = length\n                    self._state = WSParserState.READ_PAYLOAD_LENGTH",
                                  "children": [
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 15,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 15,
                                        "column": 53
                                      },
                                      "text": "data = buf[start_pos:start_pos+2]",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 15,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 15,
                                            "column": 53
                                          },
                                          "text": "data = buf[start_pos:start_pos+2]",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 15,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 15,
                                                "column": 24
                                              },
                                              "text": "data"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 15,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 15,
                                                "column": 26
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "subscript",
                                              "start": {
                                                "row": 15,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 15,
                                                "column": 53
                                              },
                                              "text": "buf[start_pos:start_pos+2]",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 15,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 15,
                                                    "column": 30
                                                  },
                                                  "text": "buf"
                                                },
                                                {
                                                  "type": "[",
                                                  "start": {
                                                    "row": 15,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 15,
                                                    "column": 31
                                                  },
                                                  "text": "["
                                                },
                                                {
                                                  "type": "slice",
                                                  "start": {
                                                    "row": 15,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 15,
                                                    "column": 52
                                                  },
                                                  "text": "start_pos:start_pos+2",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 15,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 15,
                                                        "column": 40
                                                      },
                                                      "text": "start_pos"
                                                    },
                                                    {
                                                      "type": ":",
                                                      "start": {
                                                        "row": 15,
                                                        "column": 40
                                                      },
                                                      "end": {
                                                        "row": 15,
                                                        "column": 41
                                                      },
                                                      "text": ":"
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 15,
                                                        "column": 41
                                                      },
                                                      "end": {
                                                        "row": 15,
                                                        "column": 52
                                                      },
                                                      "text": "start_pos+2",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 15,
                                                            "column": 41
                                                          },
                                                          "end": {
                                                            "row": 15,
                                                            "column": 50
                                                          },
                                                          "text": "start_pos"
                                                        },
                                                        {
                                                          "type": "+",
                                                          "start": {
                                                            "row": 15,
                                                            "column": 50
                                                          },
                                                          "end": {
                                                            "row": 15,
                                                            "column": 51
                                                          },
                                                          "text": "+"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 15,
                                                            "column": 51
                                                          },
                                                          "end": {
                                                            "row": 15,
                                                            "column": 52
                                                          },
                                                          "text": "2"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "]",
                                                  "start": {
                                                    "row": 15,
                                                    "column": 52
                                                  },
                                                  "end": {
                                                    "row": 15,
                                                    "column": 53
                                                  },
                                                  "text": "]"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 16,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 16,
                                        "column": 34
                                      },
                                      "text": "start_pos += 2",
                                      "children": [
                                        {
                                          "type": "augmented_assignment",
                                          "start": {
                                            "row": 16,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 16,
                                            "column": 34
                                          },
                                          "text": "start_pos += 2",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 16,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 16,
                                                "column": 29
                                              },
                                              "text": "start_pos"
                                            },
                                            {
                                              "type": "+=",
                                              "start": {
                                                "row": 16,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 16,
                                                "column": 32
                                              },
                                              "text": "+="
                                            },
                                            {
                                              "type": "integer",
                                              "start": {
                                                "row": 16,
                                                "column": 33
                                              },
                                              "end": {
                                                "row": 16,
                                                "column": 34
                                              },
                                              "text": "2"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 17,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 17,
                                        "column": 50
                                      },
                                      "text": "first_byte, second_byte = data",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 17,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 17,
                                            "column": 50
                                          },
                                          "text": "first_byte, second_byte = data",
                                          "children": [
                                            {
                                              "type": "pattern_list",
                                              "start": {
                                                "row": 17,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 43
                                              },
                                              "text": "first_byte, second_byte",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 17,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 17,
                                                    "column": 30
                                                  },
                                                  "text": "first_byte"
                                                },
                                                {
                                                  "type": ",",
                                                  "start": {
                                                    "row": 17,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 17,
                                                    "column": 31
                                                  },
                                                  "text": ","
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 17,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 17,
                                                    "column": 43
                                                  },
                                                  "text": "second_byte"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 17,
                                                "column": 44
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 45
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 17,
                                                "column": 46
                                              },
                                              "end": {
                                                "row": 17,
                                                "column": 50
                                              },
                                              "text": "data"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 19,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 19,
                                        "column": 47
                                      },
                                      "text": "fin = (first_byte >> 7) & 1",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 19,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 19,
                                            "column": 47
                                          },
                                          "text": "fin = (first_byte >> 7) & 1",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 19,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 19,
                                                "column": 23
                                              },
                                              "text": "fin"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 19,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 19,
                                                "column": 25
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 19,
                                                "column": 26
                                              },
                                              "end": {
                                                "row": 19,
                                                "column": 47
                                              },
                                              "text": "(first_byte >> 7) & 1",
                                              "children": [
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 19,
                                                    "column": 26
                                                  },
                                                  "end": {
                                                    "row": 19,
                                                    "column": 43
                                                  },
                                                  "text": "(first_byte >> 7)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 19,
                                                        "column": 26
                                                      },
                                                      "end": {
                                                        "row": 19,
                                                        "column": 27
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 19,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 19,
                                                        "column": 42
                                                      },
                                                      "text": "first_byte >> 7",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 19,
                                                            "column": 27
                                                          },
                                                          "end": {
                                                            "row": 19,
                                                            "column": 37
                                                          },
                                                          "text": "first_byte"
                                                        },
                                                        {
                                                          "type": ">>",
                                                          "start": {
                                                            "row": 19,
                                                            "column": 38
                                                          },
                                                          "end": {
                                                            "row": 19,
                                                            "column": 40
                                                          },
                                                          "text": ">>"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 19,
                                                            "column": 41
                                                          },
                                                          "end": {
                                                            "row": 19,
                                                            "column": 42
                                                          },
                                                          "text": "7"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 19,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 19,
                                                        "column": 43
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 19,
                                                    "column": 44
                                                  },
                                                  "end": {
                                                    "row": 19,
                                                    "column": 45
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 19,
                                                    "column": 46
                                                  },
                                                  "end": {
                                                    "row": 19,
                                                    "column": 47
                                                  },
                                                  "text": "1"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 20,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 20,
                                        "column": 48
                                      },
                                      "text": "rsv1 = (first_byte >> 6) & 1",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 20,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 20,
                                            "column": 48
                                          },
                                          "text": "rsv1 = (first_byte >> 6) & 1",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 20,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 20,
                                                "column": 24
                                              },
                                              "text": "rsv1"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 20,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 20,
                                                "column": 26
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 20,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 20,
                                                "column": 48
                                              },
                                              "text": "(first_byte >> 6) & 1",
                                              "children": [
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 20,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 20,
                                                    "column": 44
                                                  },
                                                  "text": "(first_byte >> 6)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 20,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 20,
                                                        "column": 28
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 20,
                                                        "column": 28
                                                      },
                                                      "end": {
                                                        "row": 20,
                                                        "column": 43
                                                      },
                                                      "text": "first_byte >> 6",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 20,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 20,
                                                            "column": 38
                                                          },
                                                          "text": "first_byte"
                                                        },
                                                        {
                                                          "type": ">>",
                                                          "start": {
                                                            "row": 20,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 20,
                                                            "column": 41
                                                          },
                                                          "text": ">>"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 20,
                                                            "column": 42
                                                          },
                                                          "end": {
                                                            "row": 20,
                                                            "column": 43
                                                          },
                                                          "text": "6"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 20,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 20,
                                                        "column": 44
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 20,
                                                    "column": 45
                                                  },
                                                  "end": {
                                                    "row": 20,
                                                    "column": 46
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 20,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 20,
                                                    "column": 48
                                                  },
                                                  "text": "1"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 21,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 21,
                                        "column": 48
                                      },
                                      "text": "rsv2 = (first_byte >> 5) & 1",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 21,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 21,
                                            "column": 48
                                          },
                                          "text": "rsv2 = (first_byte >> 5) & 1",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 21,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 21,
                                                "column": 24
                                              },
                                              "text": "rsv2"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 21,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 21,
                                                "column": 26
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 21,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 21,
                                                "column": 48
                                              },
                                              "text": "(first_byte >> 5) & 1",
                                              "children": [
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 21,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 21,
                                                    "column": 44
                                                  },
                                                  "text": "(first_byte >> 5)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 21,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 21,
                                                        "column": 28
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 21,
                                                        "column": 28
                                                      },
                                                      "end": {
                                                        "row": 21,
                                                        "column": 43
                                                      },
                                                      "text": "first_byte >> 5",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 21,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 21,
                                                            "column": 38
                                                          },
                                                          "text": "first_byte"
                                                        },
                                                        {
                                                          "type": ">>",
                                                          "start": {
                                                            "row": 21,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 21,
                                                            "column": 41
                                                          },
                                                          "text": ">>"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 21,
                                                            "column": 42
                                                          },
                                                          "end": {
                                                            "row": 21,
                                                            "column": 43
                                                          },
                                                          "text": "5"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 21,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 21,
                                                        "column": 44
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 21,
                                                    "column": 45
                                                  },
                                                  "end": {
                                                    "row": 21,
                                                    "column": 46
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 21,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 21,
                                                    "column": 48
                                                  },
                                                  "text": "1"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 22,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 22,
                                        "column": 48
                                      },
                                      "text": "rsv3 = (first_byte >> 4) & 1",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 22,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 22,
                                            "column": 48
                                          },
                                          "text": "rsv3 = (first_byte >> 4) & 1",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 22,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 22,
                                                "column": 24
                                              },
                                              "text": "rsv3"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 22,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 22,
                                                "column": 26
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 22,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 22,
                                                "column": 48
                                              },
                                              "text": "(first_byte >> 4) & 1",
                                              "children": [
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 22,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 22,
                                                    "column": 44
                                                  },
                                                  "text": "(first_byte >> 4)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 22,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 22,
                                                        "column": 28
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 22,
                                                        "column": 28
                                                      },
                                                      "end": {
                                                        "row": 22,
                                                        "column": 43
                                                      },
                                                      "text": "first_byte >> 4",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 22,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 22,
                                                            "column": 38
                                                          },
                                                          "text": "first_byte"
                                                        },
                                                        {
                                                          "type": ">>",
                                                          "start": {
                                                            "row": 22,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 22,
                                                            "column": 41
                                                          },
                                                          "text": ">>"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 22,
                                                            "column": 42
                                                          },
                                                          "end": {
                                                            "row": 22,
                                                            "column": 43
                                                          },
                                                          "text": "4"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 22,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 22,
                                                        "column": 44
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 22,
                                                    "column": 45
                                                  },
                                                  "end": {
                                                    "row": 22,
                                                    "column": 46
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 22,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 22,
                                                    "column": 48
                                                  },
                                                  "text": "1"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 23,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 23,
                                        "column": 45
                                      },
                                      "text": "opcode = first_byte & 0xf",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 23,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 45
                                          },
                                          "text": "opcode = first_byte & 0xf",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 23,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 23,
                                                "column": 26
                                              },
                                              "text": "opcode"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 23,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 23,
                                                "column": 28
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 23,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 23,
                                                "column": 45
                                              },
                                              "text": "first_byte & 0xf",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 29
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 39
                                                  },
                                                  "text": "first_byte"
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 41
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 45
                                                  },
                                                  "text": "0xf"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 25,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 25,
                                        "column": 74
                                      },
                                      "text": "# frame-fin = %x0 ; more frames of this message follow"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 26,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 26,
                                        "column": 67
                                      },
                                      "text": "#           / %x1 ; final frame of this message"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 27,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 27,
                                        "column": 40
                                      },
                                      "text": "# frame-rsv1 = %x0 ;"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 28,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 28,
                                        "column": 69
                                      },
                                      "text": "#    1 bit, MUST be 0 unless negotiated otherwise"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 29,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 29,
                                        "column": 40
                                      },
                                      "text": "# frame-rsv2 = %x0 ;"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 30,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 30,
                                        "column": 69
                                      },
                                      "text": "#    1 bit, MUST be 0 unless negotiated otherwise"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 31,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 31,
                                        "column": 40
                                      },
                                      "text": "# frame-rsv3 = %x0 ;"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 32,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 32,
                                        "column": 69
                                      },
                                      "text": "#    1 bit, MUST be 0 unless negotiated otherwise"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 33,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 33,
                                        "column": 21
                                      },
                                      "text": "#"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 34,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 34,
                                        "column": 72
                                      },
                                      "text": "# Remove rsv1 from this test for deflate development"
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 35,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 38,
                                        "column": 73
                                      },
                                      "text": "if rsv2 or rsv3 or (rsv1 and not self._compress):\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 35,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 35,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "boolean_operator",
                                          "start": {
                                            "row": 35,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 35,
                                            "column": 68
                                          },
                                          "text": "rsv2 or rsv3 or (rsv1 and not self._compress)",
                                          "children": [
                                            {
                                              "type": "boolean_operator",
                                              "start": {
                                                "row": 35,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 35,
                                                "column": 35
                                              },
                                              "text": "rsv2 or rsv3",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 27
                                                  },
                                                  "text": "rsv2"
                                                },
                                                {
                                                  "type": "or",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 28
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 30
                                                  },
                                                  "text": "or"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 35
                                                  },
                                                  "text": "rsv3"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "or",
                                              "start": {
                                                "row": 35,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 35,
                                                "column": 38
                                              },
                                              "text": "or"
                                            },
                                            {
                                              "type": "parenthesized_expression",
                                              "start": {
                                                "row": 35,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 35,
                                                "column": 68
                                              },
                                              "text": "(rsv1 and not self._compress)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 39
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 40
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "boolean_operator",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 67
                                                  },
                                                  "text": "rsv1 and not self._compress",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 35,
                                                        "column": 40
                                                      },
                                                      "end": {
                                                        "row": 35,
                                                        "column": 44
                                                      },
                                                      "text": "rsv1"
                                                    },
                                                    {
                                                      "type": "and",
                                                      "start": {
                                                        "row": 35,
                                                        "column": 45
                                                      },
                                                      "end": {
                                                        "row": 35,
                                                        "column": 48
                                                      },
                                                      "text": "and"
                                                    },
                                                    {
                                                      "type": "not_operator",
                                                      "start": {
                                                        "row": 35,
                                                        "column": 49
                                                      },
                                                      "end": {
                                                        "row": 35,
                                                        "column": 67
                                                      },
                                                      "text": "not self._compress",
                                                      "children": [
                                                        {
                                                          "type": "not",
                                                          "start": {
                                                            "row": 35,
                                                            "column": 49
                                                          },
                                                          "end": {
                                                            "row": 35,
                                                            "column": 52
                                                          },
                                                          "text": "not"
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 35,
                                                            "column": 53
                                                          },
                                                          "end": {
                                                            "row": 35,
                                                            "column": 67
                                                          },
                                                          "text": "self._compress",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 35,
                                                                "column": 53
                                                              },
                                                              "end": {
                                                                "row": 35,
                                                                "column": 57
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 35,
                                                                "column": 57
                                                              },
                                                              "end": {
                                                                "row": 35,
                                                                "column": 58
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 35,
                                                                "column": 58
                                                              },
                                                              "end": {
                                                                "row": 35,
                                                                "column": 67
                                                              },
                                                              "text": "_compress"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 35,
                                                    "column": 67
                                                  },
                                                  "end": {
                                                    "row": 35,
                                                    "column": 68
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 35,
                                            "column": 68
                                          },
                                          "end": {
                                            "row": 35,
                                            "column": 69
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 36,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 38,
                                            "column": 73
                                          },
                                          "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                          "children": [
                                            {
                                              "type": "raise_statement",
                                              "start": {
                                                "row": 36,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 38,
                                                "column": 73
                                              },
                                              "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                              "children": [
                                                {
                                                  "type": "raise",
                                                  "start": {
                                                    "row": 36,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 36,
                                                    "column": 29
                                                  },
                                                  "text": "raise"
                                                },
                                                {
                                                  "type": "call",
                                                  "start": {
                                                    "row": 36,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 38,
                                                    "column": 73
                                                  },
                                                  "text": "WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 36,
                                                        "column": 30
                                                      },
                                                      "end": {
                                                        "row": 36,
                                                        "column": 44
                                                      },
                                                      "text": "WebSocketError"
                                                    },
                                                    {
                                                      "type": "argument_list",
                                                      "start": {
                                                        "row": 36,
                                                        "column": 44
                                                      },
                                                      "end": {
                                                        "row": 38,
                                                        "column": 73
                                                      },
                                                      "text": "(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 36,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 36,
                                                            "column": 45
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 37,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 37,
                                                            "column": 54
                                                          },
                                                          "text": "WSCloseCode.PROTOCOL_ERROR",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 37,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 37,
                                                                "column": 39
                                                              },
                                                              "text": "WSCloseCode"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 37,
                                                                "column": 39
                                                              },
                                                              "end": {
                                                                "row": 37,
                                                                "column": 40
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 37,
                                                                "column": 40
                                                              },
                                                              "end": {
                                                                "row": 37,
                                                                "column": 54
                                                              },
                                                              "text": "PROTOCOL_ERROR"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 37,
                                                            "column": 54
                                                          },
                                                          "end": {
                                                            "row": 37,
                                                            "column": 55
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "string",
                                                          "start": {
                                                            "row": 38,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 38,
                                                            "column": 72
                                                          },
                                                          "text": "'Received frame with non-zero reserved bits'",
                                                          "children": [
                                                            {
                                                              "type": "string_start",
                                                              "start": {
                                                                "row": 38,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 38,
                                                                "column": 29
                                                              },
                                                              "text": "'"
                                                            },
                                                            {
                                                              "type": "string_content",
                                                              "start": {
                                                                "row": 38,
                                                                "column": 29
                                                              },
                                                              "end": {
                                                                "row": 38,
                                                                "column": 71
                                                              },
                                                              "text": "Received frame with non-zero reserved bits"
                                                            },
                                                            {
                                                              "type": "string_end",
                                                              "start": {
                                                                "row": 38,
                                                                "column": 71
                                                              },
                                                              "end": {
                                                                "row": 38,
                                                                "column": 72
                                                              },
                                                              "text": "'"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 38,
                                                            "column": 72
                                                          },
                                                          "end": {
                                                            "row": 38,
                                                            "column": 73
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 40,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 43,
                                        "column": 64
                                      },
                                      "text": "if opcode > 0x7 and fin == 0:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 40,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 40,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "boolean_operator",
                                          "start": {
                                            "row": 40,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 40,
                                            "column": 48
                                          },
                                          "text": "opcode > 0x7 and fin == 0",
                                          "children": [
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 40,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 40,
                                                "column": 35
                                              },
                                              "text": "opcode > 0x7",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 29
                                                  },
                                                  "text": "opcode"
                                                },
                                                {
                                                  "type": ">",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 31
                                                  },
                                                  "text": ">"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 35
                                                  },
                                                  "text": "0x7"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "and",
                                              "start": {
                                                "row": 40,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 40,
                                                "column": 39
                                              },
                                              "text": "and"
                                            },
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 40,
                                                "column": 40
                                              },
                                              "end": {
                                                "row": 40,
                                                "column": 48
                                              },
                                              "text": "fin == 0",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 43
                                                  },
                                                  "text": "fin"
                                                },
                                                {
                                                  "type": "==",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 44
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 46
                                                  },
                                                  "text": "=="
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 40,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 40,
                                                    "column": 48
                                                  },
                                                  "text": "0"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 40,
                                            "column": 48
                                          },
                                          "end": {
                                            "row": 40,
                                            "column": 49
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 41,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 43,
                                            "column": 64
                                          },
                                          "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')",
                                          "children": [
                                            {
                                              "type": "raise_statement",
                                              "start": {
                                                "row": 41,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 43,
                                                "column": 64
                                              },
                                              "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')",
                                              "children": [
                                                {
                                                  "type": "raise",
                                                  "start": {
                                                    "row": 41,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 41,
                                                    "column": 29
                                                  },
                                                  "text": "raise"
                                                },
                                                {
                                                  "type": "call",
                                                  "start": {
                                                    "row": 41,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 43,
                                                    "column": 64
                                                  },
                                                  "text": "WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 41,
                                                        "column": 30
                                                      },
                                                      "end": {
                                                        "row": 41,
                                                        "column": 44
                                                      },
                                                      "text": "WebSocketError"
                                                    },
                                                    {
                                                      "type": "argument_list",
                                                      "start": {
                                                        "row": 41,
                                                        "column": 44
                                                      },
                                                      "end": {
                                                        "row": 43,
                                                        "column": 64
                                                      },
                                                      "text": "(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received fragmented control frame')",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 41,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 41,
                                                            "column": 45
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 42,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 42,
                                                            "column": 54
                                                          },
                                                          "text": "WSCloseCode.PROTOCOL_ERROR",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 42,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 42,
                                                                "column": 39
                                                              },
                                                              "text": "WSCloseCode"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 42,
                                                                "column": 39
                                                              },
                                                              "end": {
                                                                "row": 42,
                                                                "column": 40
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 42,
                                                                "column": 40
                                                              },
                                                              "end": {
                                                                "row": 42,
                                                                "column": 54
                                                              },
                                                              "text": "PROTOCOL_ERROR"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 42,
                                                            "column": 54
                                                          },
                                                          "end": {
                                                            "row": 42,
                                                            "column": 55
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "string",
                                                          "start": {
                                                            "row": 43,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 43,
                                                            "column": 63
                                                          },
                                                          "text": "'Received fragmented control frame'",
                                                          "children": [
                                                            {
                                                              "type": "string_start",
                                                              "start": {
                                                                "row": 43,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 43,
                                                                "column": 29
                                                              },
                                                              "text": "'"
                                                            },
                                                            {
                                                              "type": "string_content",
                                                              "start": {
                                                                "row": 43,
                                                                "column": 29
                                                              },
                                                              "end": {
                                                                "row": 43,
                                                                "column": 62
                                                              },
                                                              "text": "Received fragmented control frame"
                                                            },
                                                            {
                                                              "type": "string_end",
                                                              "start": {
                                                                "row": 43,
                                                                "column": 62
                                                              },
                                                              "end": {
                                                                "row": 43,
                                                                "column": 63
                                                              },
                                                              "text": "'"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 43,
                                                            "column": 63
                                                          },
                                                          "end": {
                                                            "row": 43,
                                                            "column": 64
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 45,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 45,
                                        "column": 53
                                      },
                                      "text": "has_mask = (second_byte >> 7) & 1",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 45,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 45,
                                            "column": 53
                                          },
                                          "text": "has_mask = (second_byte >> 7) & 1",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 45,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 45,
                                                "column": 28
                                              },
                                              "text": "has_mask"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 45,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 45,
                                                "column": 30
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 45,
                                                "column": 31
                                              },
                                              "end": {
                                                "row": 45,
                                                "column": 53
                                              },
                                              "text": "(second_byte >> 7) & 1",
                                              "children": [
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 45,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 45,
                                                    "column": 49
                                                  },
                                                  "text": "(second_byte >> 7)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 45,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 45,
                                                        "column": 32
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 45,
                                                        "column": 32
                                                      },
                                                      "end": {
                                                        "row": 45,
                                                        "column": 48
                                                      },
                                                      "text": "second_byte >> 7",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 45,
                                                            "column": 32
                                                          },
                                                          "end": {
                                                            "row": 45,
                                                            "column": 43
                                                          },
                                                          "text": "second_byte"
                                                        },
                                                        {
                                                          "type": ">>",
                                                          "start": {
                                                            "row": 45,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 45,
                                                            "column": 46
                                                          },
                                                          "text": ">>"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 45,
                                                            "column": 47
                                                          },
                                                          "end": {
                                                            "row": 45,
                                                            "column": 48
                                                          },
                                                          "text": "7"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 45,
                                                        "column": 48
                                                      },
                                                      "end": {
                                                        "row": 45,
                                                        "column": 49
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 45,
                                                    "column": 50
                                                  },
                                                  "end": {
                                                    "row": 45,
                                                    "column": 51
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 45,
                                                    "column": 52
                                                  },
                                                  "end": {
                                                    "row": 45,
                                                    "column": 53
                                                  },
                                                  "text": "1"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 46,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 46,
                                        "column": 47
                                      },
                                      "text": "length = second_byte & 0x7f",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 46,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 46,
                                            "column": 47
                                          },
                                          "text": "length = second_byte & 0x7f",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 46,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 46,
                                                "column": 26
                                              },
                                              "text": "length"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 46,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 46,
                                                "column": 28
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 46,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 46,
                                                "column": 47
                                              },
                                              "text": "second_byte & 0x7f",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 46,
                                                    "column": 29
                                                  },
                                                  "end": {
                                                    "row": 46,
                                                    "column": 40
                                                  },
                                                  "text": "second_byte"
                                                },
                                                {
                                                  "type": "&",
                                                  "start": {
                                                    "row": 46,
                                                    "column": 41
                                                  },
                                                  "end": {
                                                    "row": 46,
                                                    "column": 42
                                                  },
                                                  "text": "&"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 46,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 46,
                                                    "column": 47
                                                  },
                                                  "text": "0x7f"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 48,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 48,
                                        "column": 56
                                      },
                                      "text": "# Control frames MUST have a payload"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 49,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 49,
                                        "column": 49
                                      },
                                      "text": "# length of 125 bytes or less"
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 50,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 54,
                                        "column": 52
                                      },
                                      "text": "if opcode > 0x7 and length > 125:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 50,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "boolean_operator",
                                          "start": {
                                            "row": 50,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 52
                                          },
                                          "text": "opcode > 0x7 and length > 125",
                                          "children": [
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 50,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 50,
                                                "column": 35
                                              },
                                              "text": "opcode > 0x7",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 29
                                                  },
                                                  "text": "opcode"
                                                },
                                                {
                                                  "type": ">",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 31
                                                  },
                                                  "text": ">"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 35
                                                  },
                                                  "text": "0x7"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "and",
                                              "start": {
                                                "row": 50,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 50,
                                                "column": 39
                                              },
                                              "text": "and"
                                            },
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 50,
                                                "column": 40
                                              },
                                              "end": {
                                                "row": 50,
                                                "column": 52
                                              },
                                              "text": "length > 125",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 46
                                                  },
                                                  "text": "length"
                                                },
                                                {
                                                  "type": ">",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 48
                                                  },
                                                  "text": ">"
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 50,
                                                    "column": 49
                                                  },
                                                  "end": {
                                                    "row": 50,
                                                    "column": 52
                                                  },
                                                  "text": "125"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 50,
                                            "column": 52
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 53
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 51,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 54,
                                            "column": 52
                                          },
                                          "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')",
                                          "children": [
                                            {
                                              "type": "raise_statement",
                                              "start": {
                                                "row": 51,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 54,
                                                "column": 52
                                              },
                                              "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')",
                                              "children": [
                                                {
                                                  "type": "raise",
                                                  "start": {
                                                    "row": 51,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 51,
                                                    "column": 29
                                                  },
                                                  "text": "raise"
                                                },
                                                {
                                                  "type": "call",
                                                  "start": {
                                                    "row": 51,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 54,
                                                    "column": 52
                                                  },
                                                  "text": "WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 51,
                                                        "column": 30
                                                      },
                                                      "end": {
                                                        "row": 51,
                                                        "column": 44
                                                      },
                                                      "text": "WebSocketError"
                                                    },
                                                    {
                                                      "type": "argument_list",
                                                      "start": {
                                                        "row": 51,
                                                        "column": 44
                                                      },
                                                      "end": {
                                                        "row": 54,
                                                        "column": 52
                                                      },
                                                      "text": "(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Control frame payload cannot be '\n                            'larger than 125 bytes')",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 51,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 51,
                                                            "column": 45
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 52,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 52,
                                                            "column": 54
                                                          },
                                                          "text": "WSCloseCode.PROTOCOL_ERROR",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 52,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 52,
                                                                "column": 39
                                                              },
                                                              "text": "WSCloseCode"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 52,
                                                                "column": 39
                                                              },
                                                              "end": {
                                                                "row": 52,
                                                                "column": 40
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 52,
                                                                "column": 40
                                                              },
                                                              "end": {
                                                                "row": 52,
                                                                "column": 54
                                                              },
                                                              "text": "PROTOCOL_ERROR"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 52,
                                                            "column": 54
                                                          },
                                                          "end": {
                                                            "row": 52,
                                                            "column": 55
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "concatenated_string",
                                                          "start": {
                                                            "row": 53,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 54,
                                                            "column": 51
                                                          },
                                                          "text": "'Control frame payload cannot be '\n                            'larger than 125 bytes'",
                                                          "children": [
                                                            {
                                                              "type": "string",
                                                              "start": {
                                                                "row": 53,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 53,
                                                                "column": 62
                                                              },
                                                              "text": "'Control frame payload cannot be '",
                                                              "children": [
                                                                {
                                                                  "type": "string_start",
                                                                  "start": {
                                                                    "row": 53,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 53,
                                                                    "column": 29
                                                                  },
                                                                  "text": "'"
                                                                },
                                                                {
                                                                  "type": "string_content",
                                                                  "start": {
                                                                    "row": 53,
                                                                    "column": 29
                                                                  },
                                                                  "end": {
                                                                    "row": 53,
                                                                    "column": 61
                                                                  },
                                                                  "text": "Control frame payload cannot be "
                                                                },
                                                                {
                                                                  "type": "string_end",
                                                                  "start": {
                                                                    "row": 53,
                                                                    "column": 61
                                                                  },
                                                                  "end": {
                                                                    "row": 53,
                                                                    "column": 62
                                                                  },
                                                                  "text": "'"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "string",
                                                              "start": {
                                                                "row": 54,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 54,
                                                                "column": 51
                                                              },
                                                              "text": "'larger than 125 bytes'",
                                                              "children": [
                                                                {
                                                                  "type": "string_start",
                                                                  "start": {
                                                                    "row": 54,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 54,
                                                                    "column": 29
                                                                  },
                                                                  "text": "'"
                                                                },
                                                                {
                                                                  "type": "string_content",
                                                                  "start": {
                                                                    "row": 54,
                                                                    "column": 29
                                                                  },
                                                                  "end": {
                                                                    "row": 54,
                                                                    "column": 50
                                                                  },
                                                                  "text": "larger than 125 bytes"
                                                                },
                                                                {
                                                                  "type": "string_end",
                                                                  "start": {
                                                                    "row": 54,
                                                                    "column": 50
                                                                  },
                                                                  "end": {
                                                                    "row": 54,
                                                                    "column": 51
                                                                  },
                                                                  "text": "'"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 54,
                                                            "column": 51
                                                          },
                                                          "end": {
                                                            "row": 54,
                                                            "column": 52
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 56,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 56,
                                        "column": 64
                                      },
                                      "text": "# Set compress status if last package is FIN"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 57,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 57,
                                        "column": 70
                                      },
                                      "text": "# OR set compress status if this is first fragment"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 58,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 58,
                                        "column": 71
                                      },
                                      "text": "# Raise error if not first fragment with rsv1 = 0x1"
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 59,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 64,
                                        "column": 73
                                      },
                                      "text": "if self._frame_fin or self._compressed is None:\n                        self._compressed = True if rsv1 else False\n                    elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 59,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "boolean_operator",
                                          "start": {
                                            "row": 59,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 66
                                          },
                                          "text": "self._frame_fin or self._compressed is None",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 59,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 59,
                                                "column": 38
                                              },
                                              "text": "self._frame_fin",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 27
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 28
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 28
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 38
                                                  },
                                                  "text": "_frame_fin"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "or",
                                              "start": {
                                                "row": 59,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 59,
                                                "column": 41
                                              },
                                              "text": "or"
                                            },
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 59,
                                                "column": 42
                                              },
                                              "end": {
                                                "row": 59,
                                                "column": 66
                                              },
                                              "text": "self._compressed is None",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 58
                                                  },
                                                  "text": "self._compressed",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 59,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 59,
                                                        "column": 46
                                                      },
                                                      "text": "self"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 59,
                                                        "column": 46
                                                      },
                                                      "end": {
                                                        "row": 59,
                                                        "column": 47
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 59,
                                                        "column": 47
                                                      },
                                                      "end": {
                                                        "row": 59,
                                                        "column": 58
                                                      },
                                                      "text": "_compressed"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "is",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 59
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 61
                                                  },
                                                  "text": "is"
                                                },
                                                {
                                                  "type": "none",
                                                  "start": {
                                                    "row": 59,
                                                    "column": 62
                                                  },
                                                  "end": {
                                                    "row": 59,
                                                    "column": 66
                                                  },
                                                  "text": "None"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 59,
                                            "column": 66
                                          },
                                          "end": {
                                            "row": 59,
                                            "column": 67
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 60,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 60,
                                            "column": 66
                                          },
                                          "text": "self._compressed = True if rsv1 else False",
                                          "children": [
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 60,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 60,
                                                "column": 66
                                              },
                                              "text": "self._compressed = True if rsv1 else False",
                                              "children": [
                                                {
                                                  "type": "assignment",
                                                  "start": {
                                                    "row": 60,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 60,
                                                    "column": 66
                                                  },
                                                  "text": "self._compressed = True if rsv1 else False",
                                                  "children": [
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 60,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 60,
                                                        "column": 40
                                                      },
                                                      "text": "self._compressed",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 40
                                                          },
                                                          "text": "_compressed"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 60,
                                                        "column": 41
                                                      },
                                                      "end": {
                                                        "row": 60,
                                                        "column": 42
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "conditional_expression",
                                                      "start": {
                                                        "row": 60,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 60,
                                                        "column": 66
                                                      },
                                                      "text": "True if rsv1 else False",
                                                      "children": [
                                                        {
                                                          "type": "true",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 43
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 47
                                                          },
                                                          "text": "True"
                                                        },
                                                        {
                                                          "type": "if",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 48
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 50
                                                          },
                                                          "text": "if"
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 51
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 55
                                                          },
                                                          "text": "rsv1"
                                                        },
                                                        {
                                                          "type": "else",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 56
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 60
                                                          },
                                                          "text": "else"
                                                        },
                                                        {
                                                          "type": "false",
                                                          "start": {
                                                            "row": 60,
                                                            "column": 61
                                                          },
                                                          "end": {
                                                            "row": 60,
                                                            "column": 66
                                                          },
                                                          "text": "False"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "elif_clause",
                                          "start": {
                                            "row": 61,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 64,
                                            "column": 73
                                          },
                                          "text": "elif rsv1:\n                        raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                          "children": [
                                            {
                                              "type": "elif",
                                              "start": {
                                                "row": 61,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 61,
                                                "column": 24
                                              },
                                              "text": "elif"
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 61,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 61,
                                                "column": 29
                                              },
                                              "text": "rsv1"
                                            },
                                            {
                                              "type": ":",
                                              "start": {
                                                "row": 61,
                                                "column": 29
                                              },
                                              "end": {
                                                "row": 61,
                                                "column": 30
                                              },
                                              "text": ":"
                                            },
                                            {
                                              "type": "block",
                                              "start": {
                                                "row": 62,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 64,
                                                "column": 73
                                              },
                                              "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                              "children": [
                                                {
                                                  "type": "raise_statement",
                                                  "start": {
                                                    "row": 62,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 64,
                                                    "column": 73
                                                  },
                                                  "text": "raise WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                                  "children": [
                                                    {
                                                      "type": "raise",
                                                      "start": {
                                                        "row": 62,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 62,
                                                        "column": 29
                                                      },
                                                      "text": "raise"
                                                    },
                                                    {
                                                      "type": "call",
                                                      "start": {
                                                        "row": 62,
                                                        "column": 30
                                                      },
                                                      "end": {
                                                        "row": 64,
                                                        "column": 73
                                                      },
                                                      "text": "WebSocketError(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 62,
                                                            "column": 30
                                                          },
                                                          "end": {
                                                            "row": 62,
                                                            "column": 44
                                                          },
                                                          "text": "WebSocketError"
                                                        },
                                                        {
                                                          "type": "argument_list",
                                                          "start": {
                                                            "row": 62,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 64,
                                                            "column": 73
                                                          },
                                                          "text": "(\n                            WSCloseCode.PROTOCOL_ERROR,\n                            'Received frame with non-zero reserved bits')",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 62,
                                                                "column": 44
                                                              },
                                                              "end": {
                                                                "row": 62,
                                                                "column": 45
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": "attribute",
                                                              "start": {
                                                                "row": 63,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 63,
                                                                "column": 54
                                                              },
                                                              "text": "WSCloseCode.PROTOCOL_ERROR",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 63,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 63,
                                                                    "column": 39
                                                                  },
                                                                  "text": "WSCloseCode"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 63,
                                                                    "column": 39
                                                                  },
                                                                  "end": {
                                                                    "row": 63,
                                                                    "column": 40
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 63,
                                                                    "column": 40
                                                                  },
                                                                  "end": {
                                                                    "row": 63,
                                                                    "column": 54
                                                                  },
                                                                  "text": "PROTOCOL_ERROR"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ",",
                                                              "start": {
                                                                "row": 63,
                                                                "column": 54
                                                              },
                                                              "end": {
                                                                "row": 63,
                                                                "column": 55
                                                              },
                                                              "text": ","
                                                            },
                                                            {
                                                              "type": "string",
                                                              "start": {
                                                                "row": 64,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 64,
                                                                "column": 72
                                                              },
                                                              "text": "'Received frame with non-zero reserved bits'",
                                                              "children": [
                                                                {
                                                                  "type": "string_start",
                                                                  "start": {
                                                                    "row": 64,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 64,
                                                                    "column": 29
                                                                  },
                                                                  "text": "'"
                                                                },
                                                                {
                                                                  "type": "string_content",
                                                                  "start": {
                                                                    "row": 64,
                                                                    "column": 29
                                                                  },
                                                                  "end": {
                                                                    "row": 64,
                                                                    "column": 71
                                                                  },
                                                                  "text": "Received frame with non-zero reserved bits"
                                                                },
                                                                {
                                                                  "type": "string_end",
                                                                  "start": {
                                                                    "row": 64,
                                                                    "column": 71
                                                                  },
                                                                  "end": {
                                                                    "row": 64,
                                                                    "column": 72
                                                                  },
                                                                  "text": "'"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 64,
                                                                "column": 72
                                                              },
                                                              "end": {
                                                                "row": 64,
                                                                "column": 73
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 66,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 66,
                                        "column": 47
                                      },
                                      "text": "self._frame_fin = bool(fin)",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 66,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 66,
                                            "column": 47
                                          },
                                          "text": "self._frame_fin = bool(fin)",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 66,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 66,
                                                "column": 35
                                              },
                                              "text": "self._frame_fin",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 66,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 66,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 66,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 66,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 66,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 66,
                                                    "column": 35
                                                  },
                                                  "text": "_frame_fin"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 66,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 66,
                                                "column": 37
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 66,
                                                "column": 38
                                              },
                                              "end": {
                                                "row": 66,
                                                "column": 47
                                              },
                                              "text": "bool(fin)",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 66,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 66,
                                                    "column": 42
                                                  },
                                                  "text": "bool"
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 66,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 66,
                                                    "column": 47
                                                  },
                                                  "text": "(fin)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 66,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 66,
                                                        "column": 43
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 66,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 66,
                                                        "column": 46
                                                      },
                                                      "text": "fin"
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 66,
                                                        "column": 46
                                                      },
                                                      "end": {
                                                        "row": 66,
                                                        "column": 47
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 67,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 67,
                                        "column": 47
                                      },
                                      "text": "self._frame_opcode = opcode",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 67,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 67,
                                            "column": 47
                                          },
                                          "text": "self._frame_opcode = opcode",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 67,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 38
                                              },
                                              "text": "self._frame_opcode",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 38
                                                  },
                                                  "text": "_frame_opcode"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 67,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 40
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 67,
                                                "column": 41
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 47
                                              },
                                              "text": "opcode"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 68,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 51
                                      },
                                      "text": "self._has_mask = bool(has_mask)",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 68,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 51
                                          },
                                          "text": "self._has_mask = bool(has_mask)",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 68,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 68,
                                                "column": 34
                                              },
                                              "text": "self._has_mask",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 68,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 68,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 68,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 68,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 68,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 68,
                                                    "column": 34
                                                  },
                                                  "text": "_has_mask"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 68,
                                                "column": 35
                                              },
                                              "end": {
                                                "row": 68,
                                                "column": 36
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 68,
                                                "column": 37
                                              },
                                              "end": {
                                                "row": 68,
                                                "column": 51
                                              },
                                              "text": "bool(has_mask)",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 68,
                                                    "column": 37
                                                  },
                                                  "end": {
                                                    "row": 68,
                                                    "column": 41
                                                  },
                                                  "text": "bool"
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 68,
                                                    "column": 41
                                                  },
                                                  "end": {
                                                    "row": 68,
                                                    "column": 51
                                                  },
                                                  "text": "(has_mask)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 68,
                                                        "column": 41
                                                      },
                                                      "end": {
                                                        "row": 68,
                                                        "column": 42
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 68,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 68,
                                                        "column": 50
                                                      },
                                                      "text": "has_mask"
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 68,
                                                        "column": 50
                                                      },
                                                      "end": {
                                                        "row": 68,
                                                        "column": 51
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 69,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 69,
                                        "column": 54
                                      },
                                      "text": "self._payload_length_flag = length",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 69,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 69,
                                            "column": 54
                                          },
                                          "text": "self._payload_length_flag = length",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 69,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 69,
                                                "column": 45
                                              },
                                              "text": "self._payload_length_flag",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 69,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 69,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 69,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 69,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 69,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 69,
                                                    "column": 45
                                                  },
                                                  "text": "_payload_length_flag"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 69,
                                                "column": 46
                                              },
                                              "end": {
                                                "row": 69,
                                                "column": 47
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 69,
                                                "column": 48
                                              },
                                              "end": {
                                                "row": 69,
                                                "column": 54
                                              },
                                              "text": "length"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 70,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 70,
                                        "column": 67
                                      },
                                      "text": "self._state = WSParserState.READ_PAYLOAD_LENGTH",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 70,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 70,
                                            "column": 67
                                          },
                                          "text": "self._state = WSParserState.READ_PAYLOAD_LENGTH",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 70,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 70,
                                                "column": 31
                                              },
                                              "text": "self._state",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 31
                                                  },
                                                  "text": "_state"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 70,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 70,
                                                "column": 33
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 70,
                                                "column": 34
                                              },
                                              "end": {
                                                "row": 70,
                                                "column": 67
                                              },
                                              "text": "WSParserState.READ_PAYLOAD_LENGTH",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 47
                                                  },
                                                  "text": "WSParserState"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 48
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 70,
                                                    "column": 48
                                                  },
                                                  "end": {
                                                    "row": 70,
                                                    "column": 67
                                                  },
                                                  "text": "READ_PAYLOAD_LENGTH"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 71,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 72,
                                    "column": 25
                                  },
                                  "text": "else:\n                    break",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 71,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 71,
                                        "column": 20
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 71,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 71,
                                        "column": 21
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 72,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 72,
                                        "column": 25
                                      },
                                      "text": "break",
                                      "children": [
                                        {
                                          "type": "break_statement",
                                          "start": {
                                            "row": 72,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 72,
                                            "column": 25
                                          },
                                          "text": "break",
                                          "children": [
                                            {
                                              "type": "break",
                                              "start": {
                                                "row": 72,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 72,
                                                "column": 25
                                              },
                                              "text": "break"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 74,
                        "column": 12
                      },
                      "end": {
                        "row": 74,
                        "column": 33
                      },
                      "text": "# read payload length"
                    },
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 75,
                        "column": 12
                      },
                      "end": {
                        "row": 106,
                        "column": 56
                      },
                      "text": "if self._state == WSParserState.READ_PAYLOAD_LENGTH:\n                length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 75,
                            "column": 12
                          },
                          "end": {
                            "row": 75,
                            "column": 14
                          },
                          "text": "if"
                        },
                        {
                          "type": "comparison_operator",
                          "start": {
                            "row": 75,
                            "column": 15
                          },
                          "end": {
                            "row": 75,
                            "column": 63
                          },
                          "text": "self._state == WSParserState.READ_PAYLOAD_LENGTH",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 75,
                                "column": 15
                              },
                              "end": {
                                "row": 75,
                                "column": 26
                              },
                              "text": "self._state",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 75,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 19
                                  },
                                  "text": "self"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 75,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 20
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 75,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 26
                                  },
                                  "text": "_state"
                                }
                              ]
                            },
                            {
                              "type": "==",
                              "start": {
                                "row": 75,
                                "column": 27
                              },
                              "end": {
                                "row": 75,
                                "column": 29
                              },
                              "text": "=="
                            },
                            {
                              "type": "attribute",
                              "start": {
                                "row": 75,
                                "column": 30
                              },
                              "end": {
                                "row": 75,
                                "column": 63
                              },
                              "text": "WSParserState.READ_PAYLOAD_LENGTH",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 75,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 43
                                  },
                                  "text": "WSParserState"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 75,
                                    "column": 43
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 44
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 75,
                                    "column": 44
                                  },
                                  "end": {
                                    "row": 75,
                                    "column": 63
                                  },
                                  "text": "READ_PAYLOAD_LENGTH"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 75,
                            "column": 63
                          },
                          "end": {
                            "row": 75,
                            "column": 64
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 76,
                            "column": 16
                          },
                          "end": {
                            "row": 106,
                            "column": 56
                          },
                          "text": "length = self._payload_length_flag\n                if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                          "children": [
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 76,
                                "column": 16
                              },
                              "end": {
                                "row": 76,
                                "column": 50
                              },
                              "text": "length = self._payload_length_flag",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 76,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 76,
                                    "column": 50
                                  },
                                  "text": "length = self._payload_length_flag",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 76,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 76,
                                        "column": 22
                                      },
                                      "text": "length"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 76,
                                        "column": 23
                                      },
                                      "end": {
                                        "row": 76,
                                        "column": 24
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 76,
                                        "column": 25
                                      },
                                      "end": {
                                        "row": 76,
                                        "column": 50
                                      },
                                      "text": "self._payload_length_flag",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 76,
                                            "column": 25
                                          },
                                          "end": {
                                            "row": 76,
                                            "column": 29
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 76,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 76,
                                            "column": 30
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 76,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 76,
                                            "column": 50
                                          },
                                          "text": "_payload_length_flag"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 77,
                                "column": 16
                              },
                              "end": {
                                "row": 106,
                                "column": 56
                              },
                              "text": "if length == 126:\n                    if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break\n                else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 77,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 77,
                                    "column": 18
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "comparison_operator",
                                  "start": {
                                    "row": 77,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 77,
                                    "column": 32
                                  },
                                  "text": "length == 126",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 77,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 77,
                                        "column": 25
                                      },
                                      "text": "length"
                                    },
                                    {
                                      "type": "==",
                                      "start": {
                                        "row": 77,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 77,
                                        "column": 28
                                      },
                                      "text": "=="
                                    },
                                    {
                                      "type": "integer",
                                      "start": {
                                        "row": 77,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 77,
                                        "column": 32
                                      },
                                      "text": "126"
                                    }
                                  ]
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 77,
                                    "column": 32
                                  },
                                  "end": {
                                    "row": 77,
                                    "column": 33
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "block",
                                  "start": {
                                    "row": 78,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 88,
                                    "column": 29
                                  },
                                  "text": "if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break",
                                  "children": [
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 78,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 88,
                                        "column": 29
                                      },
                                      "text": "if buf_length - start_pos >= 2:\n                        data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 78,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 78,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "comparison_operator",
                                          "start": {
                                            "row": 78,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 78,
                                            "column": 50
                                          },
                                          "text": "buf_length - start_pos >= 2",
                                          "children": [
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 78,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 78,
                                                "column": 45
                                              },
                                              "text": "buf_length - start_pos",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 78,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 78,
                                                    "column": 33
                                                  },
                                                  "text": "buf_length"
                                                },
                                                {
                                                  "type": "-",
                                                  "start": {
                                                    "row": 78,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 78,
                                                    "column": 35
                                                  },
                                                  "text": "-"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 78,
                                                    "column": 36
                                                  },
                                                  "end": {
                                                    "row": 78,
                                                    "column": 45
                                                  },
                                                  "text": "start_pos"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ">=",
                                              "start": {
                                                "row": 78,
                                                "column": 46
                                              },
                                              "end": {
                                                "row": 78,
                                                "column": 48
                                              },
                                              "text": ">="
                                            },
                                            {
                                              "type": "integer",
                                              "start": {
                                                "row": 78,
                                                "column": 49
                                              },
                                              "end": {
                                                "row": 78,
                                                "column": 50
                                              },
                                              "text": "2"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 78,
                                            "column": 50
                                          },
                                          "end": {
                                            "row": 78,
                                            "column": 51
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 79,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 86,
                                            "column": 60
                                          },
                                          "text": "data = buf[start_pos:start_pos+2]\n                        start_pos += 2\n                        length = UNPACK_LEN2(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                          "children": [
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 79,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 79,
                                                "column": 57
                                              },
                                              "text": "data = buf[start_pos:start_pos+2]",
                                              "children": [
                                                {
                                                  "type": "assignment",
                                                  "start": {
                                                    "row": 79,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 79,
                                                    "column": 57
                                                  },
                                                  "text": "data = buf[start_pos:start_pos+2]",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 79,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 79,
                                                        "column": 28
                                                      },
                                                      "text": "data"
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 79,
                                                        "column": 29
                                                      },
                                                      "end": {
                                                        "row": 79,
                                                        "column": 30
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "subscript",
                                                      "start": {
                                                        "row": 79,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 79,
                                                        "column": 57
                                                      },
                                                      "text": "buf[start_pos:start_pos+2]",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 79,
                                                            "column": 31
                                                          },
                                                          "end": {
                                                            "row": 79,
                                                            "column": 34
                                                          },
                                                          "text": "buf"
                                                        },
                                                        {
                                                          "type": "[",
                                                          "start": {
                                                            "row": 79,
                                                            "column": 34
                                                          },
                                                          "end": {
                                                            "row": 79,
                                                            "column": 35
                                                          },
                                                          "text": "["
                                                        },
                                                        {
                                                          "type": "slice",
                                                          "start": {
                                                            "row": 79,
                                                            "column": 35
                                                          },
                                                          "end": {
                                                            "row": 79,
                                                            "column": 56
                                                          },
                                                          "text": "start_pos:start_pos+2",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 79,
                                                                "column": 35
                                                              },
                                                              "end": {
                                                                "row": 79,
                                                                "column": 44
                                                              },
                                                              "text": "start_pos"
                                                            },
                                                            {
                                                              "type": ":",
                                                              "start": {
                                                                "row": 79,
                                                                "column": 44
                                                              },
                                                              "end": {
                                                                "row": 79,
                                                                "column": 45
                                                              },
                                                              "text": ":"
                                                            },
                                                            {
                                                              "type": "binary_operator",
                                                              "start": {
                                                                "row": 79,
                                                                "column": 45
                                                              },
                                                              "end": {
                                                                "row": 79,
                                                                "column": 56
                                                              },
                                                              "text": "start_pos+2",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 79,
                                                                    "column": 45
                                                                  },
                                                                  "end": {
                                                                    "row": 79,
                                                                    "column": 54
                                                                  },
                                                                  "text": "start_pos"
                                                                },
                                                                {
                                                                  "type": "+",
                                                                  "start": {
                                                                    "row": 79,
                                                                    "column": 54
                                                                  },
                                                                  "end": {
                                                                    "row": 79,
                                                                    "column": 55
                                                                  },
                                                                  "text": "+"
                                                                },
                                                                {
                                                                  "type": "integer",
                                                                  "start": {
                                                                    "row": 79,
                                                                    "column": 55
                                                                  },
                                                                  "end": {
                                                                    "row": 79,
                                                                    "column": 56
                                                                  },
                                                                  "text": "2"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "]",
                                                          "start": {
                                                            "row": 79,
                                                            "column": 56
                                                          },
                                                          "end": {
                                                            "row": 79,
                                                            "column": 57
                                                          },
                                                          "text": "]"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 80,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 80,
                                                "column": 38
                                              },
                                              "text": "start_pos += 2",
                                              "children": [
                                                {
                                                  "type": "augmented_assignment",
                                                  "start": {
                                                    "row": 80,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 80,
                                                    "column": 38
                                                  },
                                                  "text": "start_pos += 2",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 80,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 80,
                                                        "column": 33
                                                      },
                                                      "text": "start_pos"
                                                    },
                                                    {
                                                      "type": "+=",
                                                      "start": {
                                                        "row": 80,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 80,
                                                        "column": 36
                                                      },
                                                      "text": "+="
                                                    },
                                                    {
                                                      "type": "integer",
                                                      "start": {
                                                        "row": 80,
                                                        "column": 37
                                                      },
                                                      "end": {
                                                        "row": 80,
                                                        "column": 38
                                                      },
                                                      "text": "2"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 81,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 81,
                                                "column": 53
                                              },
                                              "text": "length = UNPACK_LEN2(data)[0]",
                                              "children": [
                                                {
                                                  "type": "assignment",
                                                  "start": {
                                                    "row": 81,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 81,
                                                    "column": 53
                                                  },
                                                  "text": "length = UNPACK_LEN2(data)[0]",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 81,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 81,
                                                        "column": 30
                                                      },
                                                      "text": "length"
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 81,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 81,
                                                        "column": 32
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "subscript",
                                                      "start": {
                                                        "row": 81,
                                                        "column": 33
                                                      },
                                                      "end": {
                                                        "row": 81,
                                                        "column": 53
                                                      },
                                                      "text": "UNPACK_LEN2(data)[0]",
                                                      "children": [
                                                        {
                                                          "type": "call",
                                                          "start": {
                                                            "row": 81,
                                                            "column": 33
                                                          },
                                                          "end": {
                                                            "row": 81,
                                                            "column": 50
                                                          },
                                                          "text": "UNPACK_LEN2(data)",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 81,
                                                                "column": 33
                                                              },
                                                              "end": {
                                                                "row": 81,
                                                                "column": 44
                                                              },
                                                              "text": "UNPACK_LEN2"
                                                            },
                                                            {
                                                              "type": "argument_list",
                                                              "start": {
                                                                "row": 81,
                                                                "column": 44
                                                              },
                                                              "end": {
                                                                "row": 81,
                                                                "column": 50
                                                              },
                                                              "text": "(data)",
                                                              "children": [
                                                                {
                                                                  "type": "(",
                                                                  "start": {
                                                                    "row": 81,
                                                                    "column": 44
                                                                  },
                                                                  "end": {
                                                                    "row": 81,
                                                                    "column": 45
                                                                  },
                                                                  "text": "("
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 81,
                                                                    "column": 45
                                                                  },
                                                                  "end": {
                                                                    "row": 81,
                                                                    "column": 49
                                                                  },
                                                                  "text": "data"
                                                                },
                                                                {
                                                                  "type": ")",
                                                                  "start": {
                                                                    "row": 81,
                                                                    "column": 49
                                                                  },
                                                                  "end": {
                                                                    "row": 81,
                                                                    "column": 50
                                                                  },
                                                                  "text": ")"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "[",
                                                          "start": {
                                                            "row": 81,
                                                            "column": 50
                                                          },
                                                          "end": {
                                                            "row": 81,
                                                            "column": 51
                                                          },
                                                          "text": "["
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 81,
                                                            "column": 51
                                                          },
                                                          "end": {
                                                            "row": 81,
                                                            "column": 52
                                                          },
                                                          "text": "0"
                                                        },
                                                        {
                                                          "type": "]",
                                                          "start": {
                                                            "row": 81,
                                                            "column": 52
                                                          },
                                                          "end": {
                                                            "row": 81,
                                                            "column": 53
                                                          },
                                                          "text": "]"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 82,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 82,
                                                "column": 53
                                              },
                                              "text": "self._payload_length = length",
                                              "children": [
                                                {
                                                  "type": "assignment",
                                                  "start": {
                                                    "row": 82,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 82,
                                                    "column": 53
                                                  },
                                                  "text": "self._payload_length = length",
                                                  "children": [
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 82,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 82,
                                                        "column": 44
                                                      },
                                                      "text": "self._payload_length",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 82,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 82,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 82,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 82,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 82,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 82,
                                                            "column": 44
                                                          },
                                                          "text": "_payload_length"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 82,
                                                        "column": 45
                                                      },
                                                      "end": {
                                                        "row": 82,
                                                        "column": 46
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 82,
                                                        "column": 47
                                                      },
                                                      "end": {
                                                        "row": 82,
                                                        "column": 53
                                                      },
                                                      "text": "length"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 83,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 86,
                                                "column": 60
                                              },
                                              "text": "self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                              "children": [
                                                {
                                                  "type": "assignment",
                                                  "start": {
                                                    "row": 83,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 86,
                                                    "column": 60
                                                  },
                                                  "text": "self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                                  "children": [
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 83,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 83,
                                                        "column": 35
                                                      },
                                                      "text": "self._state",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 83,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 83,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 83,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 83,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 83,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 83,
                                                            "column": 35
                                                          },
                                                          "text": "_state"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 83,
                                                        "column": 36
                                                      },
                                                      "end": {
                                                        "row": 83,
                                                        "column": 37
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "parenthesized_expression",
                                                      "start": {
                                                        "row": 83,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 86,
                                                        "column": 60
                                                      },
                                                      "text": "(\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 83,
                                                            "column": 38
                                                          },
                                                          "end": {
                                                            "row": 83,
                                                            "column": 39
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "conditional_expression",
                                                          "start": {
                                                            "row": 84,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 86,
                                                            "column": 59
                                                          },
                                                          "text": "WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD",
                                                          "children": [
                                                            {
                                                              "type": "attribute",
                                                              "start": {
                                                                "row": 84,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 84,
                                                                "column": 59
                                                              },
                                                              "text": "WSParserState.READ_PAYLOAD_MASK",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 84,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 84,
                                                                    "column": 41
                                                                  },
                                                                  "text": "WSParserState"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 84,
                                                                    "column": 41
                                                                  },
                                                                  "end": {
                                                                    "row": 84,
                                                                    "column": 42
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 84,
                                                                    "column": 42
                                                                  },
                                                                  "end": {
                                                                    "row": 84,
                                                                    "column": 59
                                                                  },
                                                                  "text": "READ_PAYLOAD_MASK"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "if",
                                                              "start": {
                                                                "row": 85,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 85,
                                                                "column": 30
                                                              },
                                                              "text": "if"
                                                            },
                                                            {
                                                              "type": "attribute",
                                                              "start": {
                                                                "row": 85,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 85,
                                                                "column": 45
                                                              },
                                                              "text": "self._has_mask",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 85,
                                                                    "column": 31
                                                                  },
                                                                  "end": {
                                                                    "row": 85,
                                                                    "column": 35
                                                                  },
                                                                  "text": "self"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 85,
                                                                    "column": 35
                                                                  },
                                                                  "end": {
                                                                    "row": 85,
                                                                    "column": 36
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 85,
                                                                    "column": 36
                                                                  },
                                                                  "end": {
                                                                    "row": 85,
                                                                    "column": 45
                                                                  },
                                                                  "text": "_has_mask"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "else",
                                                              "start": {
                                                                "row": 86,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 86,
                                                                "column": 32
                                                              },
                                                              "text": "else"
                                                            },
                                                            {
                                                              "type": "attribute",
                                                              "start": {
                                                                "row": 86,
                                                                "column": 33
                                                              },
                                                              "end": {
                                                                "row": 86,
                                                                "column": 59
                                                              },
                                                              "text": "WSParserState.READ_PAYLOAD",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 86,
                                                                    "column": 33
                                                                  },
                                                                  "end": {
                                                                    "row": 86,
                                                                    "column": 46
                                                                  },
                                                                  "text": "WSParserState"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 86,
                                                                    "column": 46
                                                                  },
                                                                  "end": {
                                                                    "row": 86,
                                                                    "column": 47
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 86,
                                                                    "column": 47
                                                                  },
                                                                  "end": {
                                                                    "row": 86,
                                                                    "column": 59
                                                                  },
                                                                  "text": "READ_PAYLOAD"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 86,
                                                            "column": 59
                                                          },
                                                          "end": {
                                                            "row": 86,
                                                            "column": 60
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "else_clause",
                                          "start": {
                                            "row": 87,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 88,
                                            "column": 29
                                          },
                                          "text": "else:\n                        break",
                                          "children": [
                                            {
                                              "type": "else",
                                              "start": {
                                                "row": 87,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 87,
                                                "column": 24
                                              },
                                              "text": "else"
                                            },
                                            {
                                              "type": ":",
                                              "start": {
                                                "row": 87,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 87,
                                                "column": 25
                                              },
                                              "text": ":"
                                            },
                                            {
                                              "type": "block",
                                              "start": {
                                                "row": 88,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 88,
                                                "column": 29
                                              },
                                              "text": "break",
                                              "children": [
                                                {
                                                  "type": "break_statement",
                                                  "start": {
                                                    "row": 88,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 88,
                                                    "column": 29
                                                  },
                                                  "text": "break",
                                                  "children": [
                                                    {
                                                      "type": "break",
                                                      "start": {
                                                        "row": 88,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 88,
                                                        "column": 29
                                                      },
                                                      "text": "break"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "elif_clause",
                                  "start": {
                                    "row": 89,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 100,
                                    "column": 29
                                  },
                                  "text": "elif length > 126:\n                    if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break",
                                  "children": [
                                    {
                                      "type": "elif",
                                      "start": {
                                        "row": 89,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 89,
                                        "column": 20
                                      },
                                      "text": "elif"
                                    },
                                    {
                                      "type": "comparison_operator",
                                      "start": {
                                        "row": 89,
                                        "column": 21
                                      },
                                      "end": {
                                        "row": 89,
                                        "column": 33
                                      },
                                      "text": "length > 126",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 89,
                                            "column": 21
                                          },
                                          "end": {
                                            "row": 89,
                                            "column": 27
                                          },
                                          "text": "length"
                                        },
                                        {
                                          "type": ">",
                                          "start": {
                                            "row": 89,
                                            "column": 28
                                          },
                                          "end": {
                                            "row": 89,
                                            "column": 29
                                          },
                                          "text": ">"
                                        },
                                        {
                                          "type": "integer",
                                          "start": {
                                            "row": 89,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 89,
                                            "column": 33
                                          },
                                          "text": "126"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 89,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 89,
                                        "column": 34
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 90,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 100,
                                        "column": 29
                                      },
                                      "text": "if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break",
                                      "children": [
                                        {
                                          "type": "if_statement",
                                          "start": {
                                            "row": 90,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 100,
                                            "column": 29
                                          },
                                          "text": "if buf_length - start_pos >= 8:\n                        data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)\n                    else:\n                        break",
                                          "children": [
                                            {
                                              "type": "if",
                                              "start": {
                                                "row": 90,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 22
                                              },
                                              "text": "if"
                                            },
                                            {
                                              "type": "comparison_operator",
                                              "start": {
                                                "row": 90,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 50
                                              },
                                              "text": "buf_length - start_pos >= 8",
                                              "children": [
                                                {
                                                  "type": "binary_operator",
                                                  "start": {
                                                    "row": 90,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 90,
                                                    "column": 45
                                                  },
                                                  "text": "buf_length - start_pos",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 90,
                                                        "column": 23
                                                      },
                                                      "end": {
                                                        "row": 90,
                                                        "column": 33
                                                      },
                                                      "text": "buf_length"
                                                    },
                                                    {
                                                      "type": "-",
                                                      "start": {
                                                        "row": 90,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 90,
                                                        "column": 35
                                                      },
                                                      "text": "-"
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 90,
                                                        "column": 36
                                                      },
                                                      "end": {
                                                        "row": 90,
                                                        "column": 45
                                                      },
                                                      "text": "start_pos"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ">=",
                                                  "start": {
                                                    "row": 90,
                                                    "column": 46
                                                  },
                                                  "end": {
                                                    "row": 90,
                                                    "column": 48
                                                  },
                                                  "text": ">="
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 90,
                                                    "column": 49
                                                  },
                                                  "end": {
                                                    "row": 90,
                                                    "column": 50
                                                  },
                                                  "text": "8"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ":",
                                              "start": {
                                                "row": 90,
                                                "column": 50
                                              },
                                              "end": {
                                                "row": 90,
                                                "column": 51
                                              },
                                              "text": ":"
                                            },
                                            {
                                              "type": "block",
                                              "start": {
                                                "row": 91,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 98,
                                                "column": 60
                                              },
                                              "text": "data = buf[start_pos:start_pos+8]\n                        start_pos += 8\n                        length = UNPACK_LEN3(data)[0]\n                        self._payload_length = length\n                        self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                              "children": [
                                                {
                                                  "type": "expression_statement",
                                                  "start": {
                                                    "row": 91,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 91,
                                                    "column": 57
                                                  },
                                                  "text": "data = buf[start_pos:start_pos+8]",
                                                  "children": [
                                                    {
                                                      "type": "assignment",
                                                      "start": {
                                                        "row": 91,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 91,
                                                        "column": 57
                                                      },
                                                      "text": "data = buf[start_pos:start_pos+8]",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 91,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 91,
                                                            "column": 28
                                                          },
                                                          "text": "data"
                                                        },
                                                        {
                                                          "type": "=",
                                                          "start": {
                                                            "row": 91,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 91,
                                                            "column": 30
                                                          },
                                                          "text": "="
                                                        },
                                                        {
                                                          "type": "subscript",
                                                          "start": {
                                                            "row": 91,
                                                            "column": 31
                                                          },
                                                          "end": {
                                                            "row": 91,
                                                            "column": 57
                                                          },
                                                          "text": "buf[start_pos:start_pos+8]",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 91,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 91,
                                                                "column": 34
                                                              },
                                                              "text": "buf"
                                                            },
                                                            {
                                                              "type": "[",
                                                              "start": {
                                                                "row": 91,
                                                                "column": 34
                                                              },
                                                              "end": {
                                                                "row": 91,
                                                                "column": 35
                                                              },
                                                              "text": "["
                                                            },
                                                            {
                                                              "type": "slice",
                                                              "start": {
                                                                "row": 91,
                                                                "column": 35
                                                              },
                                                              "end": {
                                                                "row": 91,
                                                                "column": 56
                                                              },
                                                              "text": "start_pos:start_pos+8",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 91,
                                                                    "column": 35
                                                                  },
                                                                  "end": {
                                                                    "row": 91,
                                                                    "column": 44
                                                                  },
                                                                  "text": "start_pos"
                                                                },
                                                                {
                                                                  "type": ":",
                                                                  "start": {
                                                                    "row": 91,
                                                                    "column": 44
                                                                  },
                                                                  "end": {
                                                                    "row": 91,
                                                                    "column": 45
                                                                  },
                                                                  "text": ":"
                                                                },
                                                                {
                                                                  "type": "binary_operator",
                                                                  "start": {
                                                                    "row": 91,
                                                                    "column": 45
                                                                  },
                                                                  "end": {
                                                                    "row": 91,
                                                                    "column": 56
                                                                  },
                                                                  "text": "start_pos+8",
                                                                  "children": [
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 91,
                                                                        "column": 45
                                                                      },
                                                                      "end": {
                                                                        "row": 91,
                                                                        "column": 54
                                                                      },
                                                                      "text": "start_pos"
                                                                    },
                                                                    {
                                                                      "type": "+",
                                                                      "start": {
                                                                        "row": 91,
                                                                        "column": 54
                                                                      },
                                                                      "end": {
                                                                        "row": 91,
                                                                        "column": 55
                                                                      },
                                                                      "text": "+"
                                                                    },
                                                                    {
                                                                      "type": "integer",
                                                                      "start": {
                                                                        "row": 91,
                                                                        "column": 55
                                                                      },
                                                                      "end": {
                                                                        "row": 91,
                                                                        "column": 56
                                                                      },
                                                                      "text": "8"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "]",
                                                              "start": {
                                                                "row": 91,
                                                                "column": 56
                                                              },
                                                              "end": {
                                                                "row": 91,
                                                                "column": 57
                                                              },
                                                              "text": "]"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "expression_statement",
                                                  "start": {
                                                    "row": 92,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 92,
                                                    "column": 38
                                                  },
                                                  "text": "start_pos += 8",
                                                  "children": [
                                                    {
                                                      "type": "augmented_assignment",
                                                      "start": {
                                                        "row": 92,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 92,
                                                        "column": 38
                                                      },
                                                      "text": "start_pos += 8",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 92,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 92,
                                                            "column": 33
                                                          },
                                                          "text": "start_pos"
                                                        },
                                                        {
                                                          "type": "+=",
                                                          "start": {
                                                            "row": 92,
                                                            "column": 34
                                                          },
                                                          "end": {
                                                            "row": 92,
                                                            "column": 36
                                                          },
                                                          "text": "+="
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 92,
                                                            "column": 37
                                                          },
                                                          "end": {
                                                            "row": 92,
                                                            "column": 38
                                                          },
                                                          "text": "8"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "expression_statement",
                                                  "start": {
                                                    "row": 93,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 93,
                                                    "column": 53
                                                  },
                                                  "text": "length = UNPACK_LEN3(data)[0]",
                                                  "children": [
                                                    {
                                                      "type": "assignment",
                                                      "start": {
                                                        "row": 93,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 93,
                                                        "column": 53
                                                      },
                                                      "text": "length = UNPACK_LEN3(data)[0]",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 93,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 93,
                                                            "column": 30
                                                          },
                                                          "text": "length"
                                                        },
                                                        {
                                                          "type": "=",
                                                          "start": {
                                                            "row": 93,
                                                            "column": 31
                                                          },
                                                          "end": {
                                                            "row": 93,
                                                            "column": 32
                                                          },
                                                          "text": "="
                                                        },
                                                        {
                                                          "type": "subscript",
                                                          "start": {
                                                            "row": 93,
                                                            "column": 33
                                                          },
                                                          "end": {
                                                            "row": 93,
                                                            "column": 53
                                                          },
                                                          "text": "UNPACK_LEN3(data)[0]",
                                                          "children": [
                                                            {
                                                              "type": "call",
                                                              "start": {
                                                                "row": 93,
                                                                "column": 33
                                                              },
                                                              "end": {
                                                                "row": 93,
                                                                "column": 50
                                                              },
                                                              "text": "UNPACK_LEN3(data)",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 93,
                                                                    "column": 33
                                                                  },
                                                                  "end": {
                                                                    "row": 93,
                                                                    "column": 44
                                                                  },
                                                                  "text": "UNPACK_LEN3"
                                                                },
                                                                {
                                                                  "type": "argument_list",
                                                                  "start": {
                                                                    "row": 93,
                                                                    "column": 44
                                                                  },
                                                                  "end": {
                                                                    "row": 93,
                                                                    "column": 50
                                                                  },
                                                                  "text": "(data)",
                                                                  "children": [
                                                                    {
                                                                      "type": "(",
                                                                      "start": {
                                                                        "row": 93,
                                                                        "column": 44
                                                                      },
                                                                      "end": {
                                                                        "row": 93,
                                                                        "column": 45
                                                                      },
                                                                      "text": "("
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 93,
                                                                        "column": 45
                                                                      },
                                                                      "end": {
                                                                        "row": 93,
                                                                        "column": 49
                                                                      },
                                                                      "text": "data"
                                                                    },
                                                                    {
                                                                      "type": ")",
                                                                      "start": {
                                                                        "row": 93,
                                                                        "column": 49
                                                                      },
                                                                      "end": {
                                                                        "row": 93,
                                                                        "column": 50
                                                                      },
                                                                      "text": ")"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "[",
                                                              "start": {
                                                                "row": 93,
                                                                "column": 50
                                                              },
                                                              "end": {
                                                                "row": 93,
                                                                "column": 51
                                                              },
                                                              "text": "["
                                                            },
                                                            {
                                                              "type": "integer",
                                                              "start": {
                                                                "row": 93,
                                                                "column": 51
                                                              },
                                                              "end": {
                                                                "row": 93,
                                                                "column": 52
                                                              },
                                                              "text": "0"
                                                            },
                                                            {
                                                              "type": "]",
                                                              "start": {
                                                                "row": 93,
                                                                "column": 52
                                                              },
                                                              "end": {
                                                                "row": 93,
                                                                "column": 53
                                                              },
                                                              "text": "]"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "expression_statement",
                                                  "start": {
                                                    "row": 94,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 94,
                                                    "column": 53
                                                  },
                                                  "text": "self._payload_length = length",
                                                  "children": [
                                                    {
                                                      "type": "assignment",
                                                      "start": {
                                                        "row": 94,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 94,
                                                        "column": 53
                                                      },
                                                      "text": "self._payload_length = length",
                                                      "children": [
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 94,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 94,
                                                            "column": 44
                                                          },
                                                          "text": "self._payload_length",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 94,
                                                                "column": 24
                                                              },
                                                              "end": {
                                                                "row": 94,
                                                                "column": 28
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 94,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 94,
                                                                "column": 29
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 94,
                                                                "column": 29
                                                              },
                                                              "end": {
                                                                "row": 94,
                                                                "column": 44
                                                              },
                                                              "text": "_payload_length"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "=",
                                                          "start": {
                                                            "row": 94,
                                                            "column": 45
                                                          },
                                                          "end": {
                                                            "row": 94,
                                                            "column": 46
                                                          },
                                                          "text": "="
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 94,
                                                            "column": 47
                                                          },
                                                          "end": {
                                                            "row": 94,
                                                            "column": 53
                                                          },
                                                          "text": "length"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "expression_statement",
                                                  "start": {
                                                    "row": 95,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 98,
                                                    "column": 60
                                                  },
                                                  "text": "self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                                  "children": [
                                                    {
                                                      "type": "assignment",
                                                      "start": {
                                                        "row": 95,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 98,
                                                        "column": 60
                                                      },
                                                      "text": "self._state = (\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                                      "children": [
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 95,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 95,
                                                            "column": 35
                                                          },
                                                          "text": "self._state",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 95,
                                                                "column": 24
                                                              },
                                                              "end": {
                                                                "row": 95,
                                                                "column": 28
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 95,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 95,
                                                                "column": 29
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 95,
                                                                "column": 29
                                                              },
                                                              "end": {
                                                                "row": 95,
                                                                "column": 35
                                                              },
                                                              "text": "_state"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "=",
                                                          "start": {
                                                            "row": 95,
                                                            "column": 36
                                                          },
                                                          "end": {
                                                            "row": 95,
                                                            "column": 37
                                                          },
                                                          "text": "="
                                                        },
                                                        {
                                                          "type": "parenthesized_expression",
                                                          "start": {
                                                            "row": 95,
                                                            "column": 38
                                                          },
                                                          "end": {
                                                            "row": 98,
                                                            "column": 60
                                                          },
                                                          "text": "(\n                            WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD)",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 95,
                                                                "column": 38
                                                              },
                                                              "end": {
                                                                "row": 95,
                                                                "column": 39
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": "conditional_expression",
                                                              "start": {
                                                                "row": 96,
                                                                "column": 28
                                                              },
                                                              "end": {
                                                                "row": 98,
                                                                "column": 59
                                                              },
                                                              "text": "WSParserState.READ_PAYLOAD_MASK\n                            if self._has_mask\n                            else WSParserState.READ_PAYLOAD",
                                                              "children": [
                                                                {
                                                                  "type": "attribute",
                                                                  "start": {
                                                                    "row": 96,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 96,
                                                                    "column": 59
                                                                  },
                                                                  "text": "WSParserState.READ_PAYLOAD_MASK",
                                                                  "children": [
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 96,
                                                                        "column": 28
                                                                      },
                                                                      "end": {
                                                                        "row": 96,
                                                                        "column": 41
                                                                      },
                                                                      "text": "WSParserState"
                                                                    },
                                                                    {
                                                                      "type": ".",
                                                                      "start": {
                                                                        "row": 96,
                                                                        "column": 41
                                                                      },
                                                                      "end": {
                                                                        "row": 96,
                                                                        "column": 42
                                                                      },
                                                                      "text": "."
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 96,
                                                                        "column": 42
                                                                      },
                                                                      "end": {
                                                                        "row": 96,
                                                                        "column": 59
                                                                      },
                                                                      "text": "READ_PAYLOAD_MASK"
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "if",
                                                                  "start": {
                                                                    "row": 97,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 97,
                                                                    "column": 30
                                                                  },
                                                                  "text": "if"
                                                                },
                                                                {
                                                                  "type": "attribute",
                                                                  "start": {
                                                                    "row": 97,
                                                                    "column": 31
                                                                  },
                                                                  "end": {
                                                                    "row": 97,
                                                                    "column": 45
                                                                  },
                                                                  "text": "self._has_mask",
                                                                  "children": [
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 97,
                                                                        "column": 31
                                                                      },
                                                                      "end": {
                                                                        "row": 97,
                                                                        "column": 35
                                                                      },
                                                                      "text": "self"
                                                                    },
                                                                    {
                                                                      "type": ".",
                                                                      "start": {
                                                                        "row": 97,
                                                                        "column": 35
                                                                      },
                                                                      "end": {
                                                                        "row": 97,
                                                                        "column": 36
                                                                      },
                                                                      "text": "."
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 97,
                                                                        "column": 36
                                                                      },
                                                                      "end": {
                                                                        "row": 97,
                                                                        "column": 45
                                                                      },
                                                                      "text": "_has_mask"
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "else",
                                                                  "start": {
                                                                    "row": 98,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 98,
                                                                    "column": 32
                                                                  },
                                                                  "text": "else"
                                                                },
                                                                {
                                                                  "type": "attribute",
                                                                  "start": {
                                                                    "row": 98,
                                                                    "column": 33
                                                                  },
                                                                  "end": {
                                                                    "row": 98,
                                                                    "column": 59
                                                                  },
                                                                  "text": "WSParserState.READ_PAYLOAD",
                                                                  "children": [
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 98,
                                                                        "column": 33
                                                                      },
                                                                      "end": {
                                                                        "row": 98,
                                                                        "column": 46
                                                                      },
                                                                      "text": "WSParserState"
                                                                    },
                                                                    {
                                                                      "type": ".",
                                                                      "start": {
                                                                        "row": 98,
                                                                        "column": 46
                                                                      },
                                                                      "end": {
                                                                        "row": 98,
                                                                        "column": 47
                                                                      },
                                                                      "text": "."
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 98,
                                                                        "column": 47
                                                                      },
                                                                      "end": {
                                                                        "row": 98,
                                                                        "column": 59
                                                                      },
                                                                      "text": "READ_PAYLOAD"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 98,
                                                                "column": 59
                                                              },
                                                              "end": {
                                                                "row": 98,
                                                                "column": 60
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "else_clause",
                                              "start": {
                                                "row": 99,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 100,
                                                "column": 29
                                              },
                                              "text": "else:\n                        break",
                                              "children": [
                                                {
                                                  "type": "else",
                                                  "start": {
                                                    "row": 99,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 99,
                                                    "column": 24
                                                  },
                                                  "text": "else"
                                                },
                                                {
                                                  "type": ":",
                                                  "start": {
                                                    "row": 99,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 99,
                                                    "column": 25
                                                  },
                                                  "text": ":"
                                                },
                                                {
                                                  "type": "block",
                                                  "start": {
                                                    "row": 100,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 100,
                                                    "column": 29
                                                  },
                                                  "text": "break",
                                                  "children": [
                                                    {
                                                      "type": "break_statement",
                                                      "start": {
                                                        "row": 100,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 100,
                                                        "column": 29
                                                      },
                                                      "text": "break",
                                                      "children": [
                                                        {
                                                          "type": "break",
                                                          "start": {
                                                            "row": 100,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 100,
                                                            "column": 29
                                                          },
                                                          "text": "break"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 101,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 106,
                                    "column": 56
                                  },
                                  "text": "else:\n                    self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 101,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 101,
                                        "column": 20
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 101,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 101,
                                        "column": 21
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 102,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 56
                                      },
                                      "text": "self._payload_length = length\n                    self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                                      "children": [
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 102,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 102,
                                            "column": 49
                                          },
                                          "text": "self._payload_length = length",
                                          "children": [
                                            {
                                              "type": "assignment",
                                              "start": {
                                                "row": 102,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 102,
                                                "column": 49
                                              },
                                              "text": "self._payload_length = length",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 102,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 102,
                                                    "column": 40
                                                  },
                                                  "text": "self._payload_length",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 102,
                                                        "column": 20
                                                      },
                                                      "end": {
                                                        "row": 102,
                                                        "column": 24
                                                      },
                                                      "text": "self"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 102,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 102,
                                                        "column": 25
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 102,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 102,
                                                        "column": 40
                                                      },
                                                      "text": "_payload_length"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 102,
                                                    "column": 41
                                                  },
                                                  "end": {
                                                    "row": 102,
                                                    "column": 42
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 102,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 102,
                                                    "column": 49
                                                  },
                                                  "text": "length"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 103,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 56
                                          },
                                          "text": "self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                                          "children": [
                                            {
                                              "type": "assignment",
                                              "start": {
                                                "row": 103,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 56
                                              },
                                              "text": "self._state = (\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 103,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 103,
                                                    "column": 31
                                                  },
                                                  "text": "self._state",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 103,
                                                        "column": 20
                                                      },
                                                      "end": {
                                                        "row": 103,
                                                        "column": 24
                                                      },
                                                      "text": "self"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 103,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 103,
                                                        "column": 25
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 103,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 103,
                                                        "column": 31
                                                      },
                                                      "text": "_state"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 103,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 103,
                                                    "column": 33
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 103,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 106,
                                                    "column": 56
                                                  },
                                                  "text": "(\n                        WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 103,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 103,
                                                        "column": 35
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "conditional_expression",
                                                      "start": {
                                                        "row": 104,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 106,
                                                        "column": 55
                                                      },
                                                      "text": "WSParserState.READ_PAYLOAD_MASK\n                        if self._has_mask\n                        else WSParserState.READ_PAYLOAD",
                                                      "children": [
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 104,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 104,
                                                            "column": 55
                                                          },
                                                          "text": "WSParserState.READ_PAYLOAD_MASK",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 104,
                                                                "column": 24
                                                              },
                                                              "end": {
                                                                "row": 104,
                                                                "column": 37
                                                              },
                                                              "text": "WSParserState"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 104,
                                                                "column": 37
                                                              },
                                                              "end": {
                                                                "row": 104,
                                                                "column": 38
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 104,
                                                                "column": 38
                                                              },
                                                              "end": {
                                                                "row": 104,
                                                                "column": 55
                                                              },
                                                              "text": "READ_PAYLOAD_MASK"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "if",
                                                          "start": {
                                                            "row": 105,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 105,
                                                            "column": 26
                                                          },
                                                          "text": "if"
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 105,
                                                            "column": 27
                                                          },
                                                          "end": {
                                                            "row": 105,
                                                            "column": 41
                                                          },
                                                          "text": "self._has_mask",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 105,
                                                                "column": 27
                                                              },
                                                              "end": {
                                                                "row": 105,
                                                                "column": 31
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 105,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 105,
                                                                "column": 32
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 105,
                                                                "column": 32
                                                              },
                                                              "end": {
                                                                "row": 105,
                                                                "column": 41
                                                              },
                                                              "text": "_has_mask"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "else",
                                                          "start": {
                                                            "row": 106,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 106,
                                                            "column": 28
                                                          },
                                                          "text": "else"
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 106,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 106,
                                                            "column": 55
                                                          },
                                                          "text": "WSParserState.READ_PAYLOAD",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 106,
                                                                "column": 29
                                                              },
                                                              "end": {
                                                                "row": 106,
                                                                "column": 42
                                                              },
                                                              "text": "WSParserState"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 106,
                                                                "column": 42
                                                              },
                                                              "end": {
                                                                "row": 106,
                                                                "column": 43
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 106,
                                                                "column": 43
                                                              },
                                                              "end": {
                                                                "row": 106,
                                                                "column": 55
                                                              },
                                                              "text": "READ_PAYLOAD"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 106,
                                                        "column": 55
                                                      },
                                                      "end": {
                                                        "row": 106,
                                                        "column": 56
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 108,
                        "column": 12
                      },
                      "end": {
                        "row": 108,
                        "column": 31
                      },
                      "text": "# read payload mask"
                    },
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 109,
                        "column": 12
                      },
                      "end": {
                        "row": 115,
                        "column": 25
                      },
                      "text": "if self._state == WSParserState.READ_PAYLOAD_MASK:\n                if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 109,
                            "column": 12
                          },
                          "end": {
                            "row": 109,
                            "column": 14
                          },
                          "text": "if"
                        },
                        {
                          "type": "comparison_operator",
                          "start": {
                            "row": 109,
                            "column": 15
                          },
                          "end": {
                            "row": 109,
                            "column": 61
                          },
                          "text": "self._state == WSParserState.READ_PAYLOAD_MASK",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 109,
                                "column": 15
                              },
                              "end": {
                                "row": 109,
                                "column": 26
                              },
                              "text": "self._state",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 109,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 19
                                  },
                                  "text": "self"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 109,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 20
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 109,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 26
                                  },
                                  "text": "_state"
                                }
                              ]
                            },
                            {
                              "type": "==",
                              "start": {
                                "row": 109,
                                "column": 27
                              },
                              "end": {
                                "row": 109,
                                "column": 29
                              },
                              "text": "=="
                            },
                            {
                              "type": "attribute",
                              "start": {
                                "row": 109,
                                "column": 30
                              },
                              "end": {
                                "row": 109,
                                "column": 61
                              },
                              "text": "WSParserState.READ_PAYLOAD_MASK",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 109,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 43
                                  },
                                  "text": "WSParserState"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 109,
                                    "column": 43
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 44
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 109,
                                    "column": 44
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 61
                                  },
                                  "text": "READ_PAYLOAD_MASK"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 109,
                            "column": 61
                          },
                          "end": {
                            "row": 109,
                            "column": 62
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 110,
                            "column": 16
                          },
                          "end": {
                            "row": 115,
                            "column": 25
                          },
                          "text": "if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break",
                          "children": [
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 110,
                                "column": 16
                              },
                              "end": {
                                "row": 115,
                                "column": 25
                              },
                              "text": "if buf_length - start_pos >= 4:\n                    self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD\n                else:\n                    break",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 110,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 110,
                                    "column": 18
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "comparison_operator",
                                  "start": {
                                    "row": 110,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 110,
                                    "column": 46
                                  },
                                  "text": "buf_length - start_pos >= 4",
                                  "children": [
                                    {
                                      "type": "binary_operator",
                                      "start": {
                                        "row": 110,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 110,
                                        "column": 41
                                      },
                                      "text": "buf_length - start_pos",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 110,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 29
                                          },
                                          "text": "buf_length"
                                        },
                                        {
                                          "type": "-",
                                          "start": {
                                            "row": 110,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 31
                                          },
                                          "text": "-"
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 110,
                                            "column": 32
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 41
                                          },
                                          "text": "start_pos"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ">=",
                                      "start": {
                                        "row": 110,
                                        "column": 42
                                      },
                                      "end": {
                                        "row": 110,
                                        "column": 44
                                      },
                                      "text": ">="
                                    },
                                    {
                                      "type": "integer",
                                      "start": {
                                        "row": 110,
                                        "column": 45
                                      },
                                      "end": {
                                        "row": 110,
                                        "column": 46
                                      },
                                      "text": "4"
                                    }
                                  ]
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 110,
                                    "column": 46
                                  },
                                  "end": {
                                    "row": 110,
                                    "column": 47
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "block",
                                  "start": {
                                    "row": 111,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 113,
                                    "column": 60
                                  },
                                  "text": "self._frame_mask = buf[start_pos:start_pos+4]\n                    start_pos += 4\n                    self._state = WSParserState.READ_PAYLOAD",
                                  "children": [
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 111,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 111,
                                        "column": 65
                                      },
                                      "text": "self._frame_mask = buf[start_pos:start_pos+4]",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 111,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 111,
                                            "column": 65
                                          },
                                          "text": "self._frame_mask = buf[start_pos:start_pos+4]",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 111,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 111,
                                                "column": 36
                                              },
                                              "text": "self._frame_mask",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 36
                                                  },
                                                  "text": "_frame_mask"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 111,
                                                "column": 37
                                              },
                                              "end": {
                                                "row": 111,
                                                "column": 38
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "subscript",
                                              "start": {
                                                "row": 111,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 111,
                                                "column": 65
                                              },
                                              "text": "buf[start_pos:start_pos+4]",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 39
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 42
                                                  },
                                                  "text": "buf"
                                                },
                                                {
                                                  "type": "[",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 43
                                                  },
                                                  "text": "["
                                                },
                                                {
                                                  "type": "slice",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 64
                                                  },
                                                  "text": "start_pos:start_pos+4",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 111,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 111,
                                                        "column": 52
                                                      },
                                                      "text": "start_pos"
                                                    },
                                                    {
                                                      "type": ":",
                                                      "start": {
                                                        "row": 111,
                                                        "column": 52
                                                      },
                                                      "end": {
                                                        "row": 111,
                                                        "column": 53
                                                      },
                                                      "text": ":"
                                                    },
                                                    {
                                                      "type": "binary_operator",
                                                      "start": {
                                                        "row": 111,
                                                        "column": 53
                                                      },
                                                      "end": {
                                                        "row": 111,
                                                        "column": 64
                                                      },
                                                      "text": "start_pos+4",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 111,
                                                            "column": 53
                                                          },
                                                          "end": {
                                                            "row": 111,
                                                            "column": 62
                                                          },
                                                          "text": "start_pos"
                                                        },
                                                        {
                                                          "type": "+",
                                                          "start": {
                                                            "row": 111,
                                                            "column": 62
                                                          },
                                                          "end": {
                                                            "row": 111,
                                                            "column": 63
                                                          },
                                                          "text": "+"
                                                        },
                                                        {
                                                          "type": "integer",
                                                          "start": {
                                                            "row": 111,
                                                            "column": 63
                                                          },
                                                          "end": {
                                                            "row": 111,
                                                            "column": 64
                                                          },
                                                          "text": "4"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "]",
                                                  "start": {
                                                    "row": 111,
                                                    "column": 64
                                                  },
                                                  "end": {
                                                    "row": 111,
                                                    "column": 65
                                                  },
                                                  "text": "]"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 112,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 112,
                                        "column": 34
                                      },
                                      "text": "start_pos += 4",
                                      "children": [
                                        {
                                          "type": "augmented_assignment",
                                          "start": {
                                            "row": 112,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 112,
                                            "column": 34
                                          },
                                          "text": "start_pos += 4",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 112,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 112,
                                                "column": 29
                                              },
                                              "text": "start_pos"
                                            },
                                            {
                                              "type": "+=",
                                              "start": {
                                                "row": 112,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 112,
                                                "column": 32
                                              },
                                              "text": "+="
                                            },
                                            {
                                              "type": "integer",
                                              "start": {
                                                "row": 112,
                                                "column": 33
                                              },
                                              "end": {
                                                "row": 112,
                                                "column": 34
                                              },
                                              "text": "4"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 113,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 113,
                                        "column": 60
                                      },
                                      "text": "self._state = WSParserState.READ_PAYLOAD",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 113,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 113,
                                            "column": 60
                                          },
                                          "text": "self._state = WSParserState.READ_PAYLOAD",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 113,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 113,
                                                "column": 31
                                              },
                                              "text": "self._state",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 31
                                                  },
                                                  "text": "_state"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 113,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 113,
                                                "column": 33
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 113,
                                                "column": 34
                                              },
                                              "end": {
                                                "row": 113,
                                                "column": 60
                                              },
                                              "text": "WSParserState.READ_PAYLOAD",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 47
                                                  },
                                                  "text": "WSParserState"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 48
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 113,
                                                    "column": 48
                                                  },
                                                  "end": {
                                                    "row": 113,
                                                    "column": 60
                                                  },
                                                  "text": "READ_PAYLOAD"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 114,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 115,
                                    "column": 25
                                  },
                                  "text": "else:\n                    break",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 114,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 114,
                                        "column": 20
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 114,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 114,
                                        "column": 21
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 115,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 115,
                                        "column": 25
                                      },
                                      "text": "break",
                                      "children": [
                                        {
                                          "type": "break_statement",
                                          "start": {
                                            "row": 115,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 115,
                                            "column": 25
                                          },
                                          "text": "break",
                                          "children": [
                                            {
                                              "type": "break",
                                              "start": {
                                                "row": 115,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 115,
                                                "column": 25
                                              },
                                              "text": "break"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 117,
                        "column": 12
                      },
                      "end": {
                        "row": 145,
                        "column": 25
                      },
                      "text": "if self._state == WSParserState.READ_PAYLOAD:\n                length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 117,
                            "column": 12
                          },
                          "end": {
                            "row": 117,
                            "column": 14
                          },
                          "text": "if"
                        },
                        {
                          "type": "comparison_operator",
                          "start": {
                            "row": 117,
                            "column": 15
                          },
                          "end": {
                            "row": 117,
                            "column": 56
                          },
                          "text": "self._state == WSParserState.READ_PAYLOAD",
                          "children": [
                            {
                              "type": "attribute",
                              "start": {
                                "row": 117,
                                "column": 15
                              },
                              "end": {
                                "row": 117,
                                "column": 26
                              },
                              "text": "self._state",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 117,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 19
                                  },
                                  "text": "self"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 117,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 20
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 117,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 26
                                  },
                                  "text": "_state"
                                }
                              ]
                            },
                            {
                              "type": "==",
                              "start": {
                                "row": 117,
                                "column": 27
                              },
                              "end": {
                                "row": 117,
                                "column": 29
                              },
                              "text": "=="
                            },
                            {
                              "type": "attribute",
                              "start": {
                                "row": 117,
                                "column": 30
                              },
                              "end": {
                                "row": 117,
                                "column": 56
                              },
                              "text": "WSParserState.READ_PAYLOAD",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 117,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 43
                                  },
                                  "text": "WSParserState"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 117,
                                    "column": 43
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 44
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 117,
                                    "column": 44
                                  },
                                  "end": {
                                    "row": 117,
                                    "column": 56
                                  },
                                  "text": "READ_PAYLOAD"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 117,
                            "column": 56
                          },
                          "end": {
                            "row": 117,
                            "column": 57
                          },
                          "text": ":"
                        },
                        {
                          "type": "block",
                          "start": {
                            "row": 118,
                            "column": 16
                          },
                          "end": {
                            "row": 145,
                            "column": 25
                          },
                          "text": "length = self._payload_length\n                payload = self._frame_payload\n\n                chunk_len = buf_length - start_pos\n                if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length\n\n                if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break",
                          "children": [
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 118,
                                "column": 16
                              },
                              "end": {
                                "row": 118,
                                "column": 45
                              },
                              "text": "length = self._payload_length",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 118,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 118,
                                    "column": 45
                                  },
                                  "text": "length = self._payload_length",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 118,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 118,
                                        "column": 22
                                      },
                                      "text": "length"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 118,
                                        "column": 23
                                      },
                                      "end": {
                                        "row": 118,
                                        "column": 24
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 118,
                                        "column": 25
                                      },
                                      "end": {
                                        "row": 118,
                                        "column": 45
                                      },
                                      "text": "self._payload_length",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 118,
                                            "column": 25
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 29
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 118,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 30
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 118,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 45
                                          },
                                          "text": "_payload_length"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 119,
                                "column": 16
                              },
                              "end": {
                                "row": 119,
                                "column": 45
                              },
                              "text": "payload = self._frame_payload",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 119,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 119,
                                    "column": 45
                                  },
                                  "text": "payload = self._frame_payload",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 119,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 119,
                                        "column": 23
                                      },
                                      "text": "payload"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 119,
                                        "column": 24
                                      },
                                      "end": {
                                        "row": 119,
                                        "column": 25
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 119,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 119,
                                        "column": 45
                                      },
                                      "text": "self._frame_payload",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 119,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 119,
                                            "column": 30
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 119,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 119,
                                            "column": 31
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 119,
                                            "column": 31
                                          },
                                          "end": {
                                            "row": 119,
                                            "column": 45
                                          },
                                          "text": "_frame_payload"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 121,
                                "column": 16
                              },
                              "end": {
                                "row": 121,
                                "column": 50
                              },
                              "text": "chunk_len = buf_length - start_pos",
                              "children": [
                                {
                                  "type": "assignment",
                                  "start": {
                                    "row": 121,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 121,
                                    "column": 50
                                  },
                                  "text": "chunk_len = buf_length - start_pos",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 121,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 121,
                                        "column": 25
                                      },
                                      "text": "chunk_len"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 121,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 121,
                                        "column": 27
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "binary_operator",
                                      "start": {
                                        "row": 121,
                                        "column": 28
                                      },
                                      "end": {
                                        "row": 121,
                                        "column": 50
                                      },
                                      "text": "buf_length - start_pos",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 121,
                                            "column": 28
                                          },
                                          "end": {
                                            "row": 121,
                                            "column": 38
                                          },
                                          "text": "buf_length"
                                        },
                                        {
                                          "type": "-",
                                          "start": {
                                            "row": 121,
                                            "column": 39
                                          },
                                          "end": {
                                            "row": 121,
                                            "column": 40
                                          },
                                          "text": "-"
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 121,
                                            "column": 41
                                          },
                                          "end": {
                                            "row": 121,
                                            "column": 50
                                          },
                                          "text": "start_pos"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 122,
                                "column": 16
                              },
                              "end": {
                                "row": 129,
                                "column": 50
                              },
                              "text": "if length >= chunk_len:\n                    self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length\n                else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 122,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 122,
                                    "column": 18
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "comparison_operator",
                                  "start": {
                                    "row": 122,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 122,
                                    "column": 38
                                  },
                                  "text": "length >= chunk_len",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 122,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 122,
                                        "column": 25
                                      },
                                      "text": "length"
                                    },
                                    {
                                      "type": ">=",
                                      "start": {
                                        "row": 122,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 122,
                                        "column": 28
                                      },
                                      "text": ">="
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 122,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 122,
                                        "column": 38
                                      },
                                      "text": "chunk_len"
                                    }
                                  ]
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 122,
                                    "column": 38
                                  },
                                  "end": {
                                    "row": 122,
                                    "column": 39
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "block",
                                  "start": {
                                    "row": 123,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 125,
                                    "column": 42
                                  },
                                  "text": "self._payload_length = length - chunk_len\n                    payload.extend(buf[start_pos:])\n                    start_pos = buf_length",
                                  "children": [
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 123,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 123,
                                        "column": 61
                                      },
                                      "text": "self._payload_length = length - chunk_len",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 123,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 123,
                                            "column": 61
                                          },
                                          "text": "self._payload_length = length - chunk_len",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 123,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 123,
                                                "column": 40
                                              },
                                              "text": "self._payload_length",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 40
                                                  },
                                                  "text": "_payload_length"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 123,
                                                "column": 41
                                              },
                                              "end": {
                                                "row": 123,
                                                "column": 42
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_operator",
                                              "start": {
                                                "row": 123,
                                                "column": 43
                                              },
                                              "end": {
                                                "row": 123,
                                                "column": 61
                                              },
                                              "text": "length - chunk_len",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 49
                                                  },
                                                  "text": "length"
                                                },
                                                {
                                                  "type": "-",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 50
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 51
                                                  },
                                                  "text": "-"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 123,
                                                    "column": 52
                                                  },
                                                  "end": {
                                                    "row": 123,
                                                    "column": 61
                                                  },
                                                  "text": "chunk_len"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 124,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 124,
                                        "column": 51
                                      },
                                      "text": "payload.extend(buf[start_pos:])",
                                      "children": [
                                        {
                                          "type": "call",
                                          "start": {
                                            "row": 124,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 124,
                                            "column": 51
                                          },
                                          "text": "payload.extend(buf[start_pos:])",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 124,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 124,
                                                "column": 34
                                              },
                                              "text": "payload.extend",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 27
                                                  },
                                                  "text": "payload"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 28
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 28
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 34
                                                  },
                                                  "text": "extend"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "argument_list",
                                              "start": {
                                                "row": 124,
                                                "column": 34
                                              },
                                              "end": {
                                                "row": 124,
                                                "column": 51
                                              },
                                              "text": "(buf[start_pos:])",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 35
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "subscript",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 35
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 50
                                                  },
                                                  "text": "buf[start_pos:]",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 124,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 124,
                                                        "column": 38
                                                      },
                                                      "text": "buf"
                                                    },
                                                    {
                                                      "type": "[",
                                                      "start": {
                                                        "row": 124,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 124,
                                                        "column": 39
                                                      },
                                                      "text": "["
                                                    },
                                                    {
                                                      "type": "slice",
                                                      "start": {
                                                        "row": 124,
                                                        "column": 39
                                                      },
                                                      "end": {
                                                        "row": 124,
                                                        "column": 49
                                                      },
                                                      "text": "start_pos:",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 124,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 124,
                                                            "column": 48
                                                          },
                                                          "text": "start_pos"
                                                        },
                                                        {
                                                          "type": ":",
                                                          "start": {
                                                            "row": 124,
                                                            "column": 48
                                                          },
                                                          "end": {
                                                            "row": 124,
                                                            "column": 49
                                                          },
                                                          "text": ":"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "]",
                                                      "start": {
                                                        "row": 124,
                                                        "column": 49
                                                      },
                                                      "end": {
                                                        "row": 124,
                                                        "column": 50
                                                      },
                                                      "text": "]"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 124,
                                                    "column": 50
                                                  },
                                                  "end": {
                                                    "row": 124,
                                                    "column": 51
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 125,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 125,
                                        "column": 42
                                      },
                                      "text": "start_pos = buf_length",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 125,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 125,
                                            "column": 42
                                          },
                                          "text": "start_pos = buf_length",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 125,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 29
                                              },
                                              "text": "start_pos"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 125,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 31
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 125,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 42
                                              },
                                              "text": "buf_length"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 126,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 129,
                                    "column": 50
                                  },
                                  "text": "else:\n                    self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 126,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 126,
                                        "column": 20
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 126,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 126,
                                        "column": 21
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 127,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 129,
                                        "column": 50
                                      },
                                      "text": "self._payload_length = 0\n                    payload.extend(buf[start_pos:start_pos+length])\n                    start_pos = start_pos + length",
                                      "children": [
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 127,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 127,
                                            "column": 44
                                          },
                                          "text": "self._payload_length = 0",
                                          "children": [
                                            {
                                              "type": "assignment",
                                              "start": {
                                                "row": 127,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 127,
                                                "column": 44
                                              },
                                              "text": "self._payload_length = 0",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 127,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 127,
                                                    "column": 40
                                                  },
                                                  "text": "self._payload_length",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 127,
                                                        "column": 20
                                                      },
                                                      "end": {
                                                        "row": 127,
                                                        "column": 24
                                                      },
                                                      "text": "self"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 127,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 127,
                                                        "column": 25
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 127,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 127,
                                                        "column": 40
                                                      },
                                                      "text": "_payload_length"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 127,
                                                    "column": 41
                                                  },
                                                  "end": {
                                                    "row": 127,
                                                    "column": 42
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "integer",
                                                  "start": {
                                                    "row": 127,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 127,
                                                    "column": 44
                                                  },
                                                  "text": "0"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 128,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 128,
                                            "column": 67
                                          },
                                          "text": "payload.extend(buf[start_pos:start_pos+length])",
                                          "children": [
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 128,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 128,
                                                "column": 67
                                              },
                                              "text": "payload.extend(buf[start_pos:start_pos+length])",
                                              "children": [
                                                {
                                                  "type": "attribute",
                                                  "start": {
                                                    "row": 128,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 128,
                                                    "column": 34
                                                  },
                                                  "text": "payload.extend",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 20
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 27
                                                      },
                                                      "text": "payload"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 28
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 28
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 34
                                                      },
                                                      "text": "extend"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 128,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 128,
                                                    "column": 67
                                                  },
                                                  "text": "(buf[start_pos:start_pos+length])",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 35
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "subscript",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 66
                                                      },
                                                      "text": "buf[start_pos:start_pos+length]",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 128,
                                                            "column": 35
                                                          },
                                                          "end": {
                                                            "row": 128,
                                                            "column": 38
                                                          },
                                                          "text": "buf"
                                                        },
                                                        {
                                                          "type": "[",
                                                          "start": {
                                                            "row": 128,
                                                            "column": 38
                                                          },
                                                          "end": {
                                                            "row": 128,
                                                            "column": 39
                                                          },
                                                          "text": "["
                                                        },
                                                        {
                                                          "type": "slice",
                                                          "start": {
                                                            "row": 128,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 128,
                                                            "column": 65
                                                          },
                                                          "text": "start_pos:start_pos+length",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 128,
                                                                "column": 39
                                                              },
                                                              "end": {
                                                                "row": 128,
                                                                "column": 48
                                                              },
                                                              "text": "start_pos"
                                                            },
                                                            {
                                                              "type": ":",
                                                              "start": {
                                                                "row": 128,
                                                                "column": 48
                                                              },
                                                              "end": {
                                                                "row": 128,
                                                                "column": 49
                                                              },
                                                              "text": ":"
                                                            },
                                                            {
                                                              "type": "binary_operator",
                                                              "start": {
                                                                "row": 128,
                                                                "column": 49
                                                              },
                                                              "end": {
                                                                "row": 128,
                                                                "column": 65
                                                              },
                                                              "text": "start_pos+length",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 128,
                                                                    "column": 49
                                                                  },
                                                                  "end": {
                                                                    "row": 128,
                                                                    "column": 58
                                                                  },
                                                                  "text": "start_pos"
                                                                },
                                                                {
                                                                  "type": "+",
                                                                  "start": {
                                                                    "row": 128,
                                                                    "column": 58
                                                                  },
                                                                  "end": {
                                                                    "row": 128,
                                                                    "column": 59
                                                                  },
                                                                  "text": "+"
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 128,
                                                                    "column": 59
                                                                  },
                                                                  "end": {
                                                                    "row": 128,
                                                                    "column": 65
                                                                  },
                                                                  "text": "length"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "]",
                                                          "start": {
                                                            "row": 128,
                                                            "column": 65
                                                          },
                                                          "end": {
                                                            "row": 128,
                                                            "column": 66
                                                          },
                                                          "text": "]"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 128,
                                                        "column": 66
                                                      },
                                                      "end": {
                                                        "row": 128,
                                                        "column": 67
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 129,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 129,
                                            "column": 50
                                          },
                                          "text": "start_pos = start_pos + length",
                                          "children": [
                                            {
                                              "type": "assignment",
                                              "start": {
                                                "row": 129,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 129,
                                                "column": 50
                                              },
                                              "text": "start_pos = start_pos + length",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 129,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 129,
                                                    "column": 29
                                                  },
                                                  "text": "start_pos"
                                                },
                                                {
                                                  "type": "=",
                                                  "start": {
                                                    "row": 129,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 129,
                                                    "column": 31
                                                  },
                                                  "text": "="
                                                },
                                                {
                                                  "type": "binary_operator",
                                                  "start": {
                                                    "row": 129,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 129,
                                                    "column": 50
                                                  },
                                                  "text": "start_pos + length",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 32
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 41
                                                      },
                                                      "text": "start_pos"
                                                    },
                                                    {
                                                      "type": "+",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 43
                                                      },
                                                      "text": "+"
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 44
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 50
                                                      },
                                                      "text": "length"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 131,
                                "column": 16
                              },
                              "end": {
                                "row": 145,
                                "column": 25
                              },
                              "text": "if self._payload_length == 0:\n                    if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER\n                else:\n                    break",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 131,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 131,
                                    "column": 18
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "comparison_operator",
                                  "start": {
                                    "row": 131,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 131,
                                    "column": 44
                                  },
                                  "text": "self._payload_length == 0",
                                  "children": [
                                    {
                                      "type": "attribute",
                                      "start": {
                                        "row": 131,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 131,
                                        "column": 39
                                      },
                                      "text": "self._payload_length",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 131,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 131,
                                            "column": 23
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 131,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 131,
                                            "column": 24
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 131,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 131,
                                            "column": 39
                                          },
                                          "text": "_payload_length"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "==",
                                      "start": {
                                        "row": 131,
                                        "column": 40
                                      },
                                      "end": {
                                        "row": 131,
                                        "column": 42
                                      },
                                      "text": "=="
                                    },
                                    {
                                      "type": "integer",
                                      "start": {
                                        "row": 131,
                                        "column": 43
                                      },
                                      "end": {
                                        "row": 131,
                                        "column": 44
                                      },
                                      "text": "0"
                                    }
                                  ]
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 131,
                                    "column": 44
                                  },
                                  "end": {
                                    "row": 131,
                                    "column": 45
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "block",
                                  "start": {
                                    "row": 132,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 143,
                                    "column": 59
                                  },
                                  "text": "if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)\n\n                    frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))\n\n                    self._frame_payload = bytearray()\n                    self._state = WSParserState.READ_HEADER",
                                  "children": [
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 132,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 134,
                                        "column": 66
                                      },
                                      "text": "if self._has_mask:\n                        assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 132,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 132,
                                            "column": 22
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "attribute",
                                          "start": {
                                            "row": 132,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 132,
                                            "column": 37
                                          },
                                          "text": "self._has_mask",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 132,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 132,
                                                "column": 27
                                              },
                                              "text": "self"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 132,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 132,
                                                "column": 28
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 132,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 132,
                                                "column": 37
                                              },
                                              "text": "_has_mask"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ":",
                                          "start": {
                                            "row": 132,
                                            "column": 37
                                          },
                                          "end": {
                                            "row": 132,
                                            "column": 38
                                          },
                                          "text": ":"
                                        },
                                        {
                                          "type": "block",
                                          "start": {
                                            "row": 133,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 134,
                                            "column": 66
                                          },
                                          "text": "assert self._frame_mask is not None\n                        _websocket_mask(self._frame_mask, payload)",
                                          "children": [
                                            {
                                              "type": "assert_statement",
                                              "start": {
                                                "row": 133,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 133,
                                                "column": 59
                                              },
                                              "text": "assert self._frame_mask is not None",
                                              "children": [
                                                {
                                                  "type": "assert",
                                                  "start": {
                                                    "row": 133,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 133,
                                                    "column": 30
                                                  },
                                                  "text": "assert"
                                                },
                                                {
                                                  "type": "comparison_operator",
                                                  "start": {
                                                    "row": 133,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 133,
                                                    "column": 59
                                                  },
                                                  "text": "self._frame_mask is not None",
                                                  "children": [
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 133,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 133,
                                                        "column": 47
                                                      },
                                                      "text": "self._frame_mask",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 133,
                                                            "column": 31
                                                          },
                                                          "end": {
                                                            "row": 133,
                                                            "column": 35
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 133,
                                                            "column": 35
                                                          },
                                                          "end": {
                                                            "row": 133,
                                                            "column": 36
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 133,
                                                            "column": 36
                                                          },
                                                          "end": {
                                                            "row": 133,
                                                            "column": 47
                                                          },
                                                          "text": "_frame_mask"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "is not",
                                                      "start": {
                                                        "row": 133,
                                                        "column": 48
                                                      },
                                                      "end": {
                                                        "row": 133,
                                                        "column": 50
                                                      },
                                                      "text": "is"
                                                    },
                                                    {
                                                      "type": "is not",
                                                      "start": {
                                                        "row": 133,
                                                        "column": 51
                                                      },
                                                      "end": {
                                                        "row": 133,
                                                        "column": 54
                                                      },
                                                      "text": "not"
                                                    },
                                                    {
                                                      "type": "none",
                                                      "start": {
                                                        "row": 133,
                                                        "column": 55
                                                      },
                                                      "end": {
                                                        "row": 133,
                                                        "column": 59
                                                      },
                                                      "text": "None"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 134,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 134,
                                                "column": 66
                                              },
                                              "text": "_websocket_mask(self._frame_mask, payload)",
                                              "children": [
                                                {
                                                  "type": "call",
                                                  "start": {
                                                    "row": 134,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 134,
                                                    "column": 66
                                                  },
                                                  "text": "_websocket_mask(self._frame_mask, payload)",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 134,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 134,
                                                        "column": 39
                                                      },
                                                      "text": "_websocket_mask"
                                                    },
                                                    {
                                                      "type": "argument_list",
                                                      "start": {
                                                        "row": 134,
                                                        "column": 39
                                                      },
                                                      "end": {
                                                        "row": 134,
                                                        "column": 66
                                                      },
                                                      "text": "(self._frame_mask, payload)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 40
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "attribute",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 40
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 56
                                                          },
                                                          "text": "self._frame_mask",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 134,
                                                                "column": 40
                                                              },
                                                              "end": {
                                                                "row": 134,
                                                                "column": 44
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 134,
                                                                "column": 44
                                                              },
                                                              "end": {
                                                                "row": 134,
                                                                "column": 45
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 134,
                                                                "column": 45
                                                              },
                                                              "end": {
                                                                "row": 134,
                                                                "column": 56
                                                              },
                                                              "text": "_frame_mask"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 56
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 57
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 58
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 65
                                                          },
                                                          "text": "payload"
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 65
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 66
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 136,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 140,
                                        "column": 42
                                      },
                                      "text": "frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))",
                                      "children": [
                                        {
                                          "type": "call",
                                          "start": {
                                            "row": 136,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 140,
                                            "column": 42
                                          },
                                          "text": "frames.append((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 136,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 136,
                                                "column": 33
                                              },
                                              "text": "frames.append",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 136,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 136,
                                                    "column": 26
                                                  },
                                                  "text": "frames"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 136,
                                                    "column": 26
                                                  },
                                                  "end": {
                                                    "row": 136,
                                                    "column": 27
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 136,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 136,
                                                    "column": 33
                                                  },
                                                  "text": "append"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "argument_list",
                                              "start": {
                                                "row": 136,
                                                "column": 33
                                              },
                                              "end": {
                                                "row": 140,
                                                "column": 42
                                              },
                                              "text": "((\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed))",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 136,
                                                    "column": 33
                                                  },
                                                  "end": {
                                                    "row": 136,
                                                    "column": 34
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "tuple",
                                                  "start": {
                                                    "row": 136,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 140,
                                                    "column": 41
                                                  },
                                                  "text": "(\n                        self._frame_fin,\n                        self._frame_opcode,\n                        payload,\n                        self._compressed)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 136,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 136,
                                                        "column": 35
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 137,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 137,
                                                        "column": 39
                                                      },
                                                      "text": "self._frame_fin",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 137,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 137,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 137,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 137,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 137,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 137,
                                                            "column": 39
                                                          },
                                                          "text": "_frame_fin"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ",",
                                                      "start": {
                                                        "row": 137,
                                                        "column": 39
                                                      },
                                                      "end": {
                                                        "row": 137,
                                                        "column": 40
                                                      },
                                                      "text": ","
                                                    },
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 138,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 138,
                                                        "column": 42
                                                      },
                                                      "text": "self._frame_opcode",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 138,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 138,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 138,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 138,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 138,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 138,
                                                            "column": 42
                                                          },
                                                          "text": "_frame_opcode"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ",",
                                                      "start": {
                                                        "row": 138,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 138,
                                                        "column": 43
                                                      },
                                                      "text": ","
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 139,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 139,
                                                        "column": 31
                                                      },
                                                      "text": "payload"
                                                    },
                                                    {
                                                      "type": ",",
                                                      "start": {
                                                        "row": 139,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 139,
                                                        "column": 32
                                                      },
                                                      "text": ","
                                                    },
                                                    {
                                                      "type": "attribute",
                                                      "start": {
                                                        "row": 140,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 140,
                                                        "column": 40
                                                      },
                                                      "text": "self._compressed",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 140,
                                                            "column": 24
                                                          },
                                                          "end": {
                                                            "row": 140,
                                                            "column": 28
                                                          },
                                                          "text": "self"
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 140,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 140,
                                                            "column": 29
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 140,
                                                            "column": 29
                                                          },
                                                          "end": {
                                                            "row": 140,
                                                            "column": 40
                                                          },
                                                          "text": "_compressed"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 140,
                                                        "column": 40
                                                      },
                                                      "end": {
                                                        "row": 140,
                                                        "column": 41
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 140,
                                                    "column": 41
                                                  },
                                                  "end": {
                                                    "row": 140,
                                                    "column": 42
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 142,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 142,
                                        "column": 53
                                      },
                                      "text": "self._frame_payload = bytearray()",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 142,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 142,
                                            "column": 53
                                          },
                                          "text": "self._frame_payload = bytearray()",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 142,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 142,
                                                "column": 39
                                              },
                                              "text": "self._frame_payload",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 142,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 142,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 142,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 142,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 142,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 142,
                                                    "column": 39
                                                  },
                                                  "text": "_frame_payload"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 142,
                                                "column": 40
                                              },
                                              "end": {
                                                "row": 142,
                                                "column": 41
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "call",
                                              "start": {
                                                "row": 142,
                                                "column": 42
                                              },
                                              "end": {
                                                "row": 142,
                                                "column": 53
                                              },
                                              "text": "bytearray()",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 142,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 142,
                                                    "column": 51
                                                  },
                                                  "text": "bytearray"
                                                },
                                                {
                                                  "type": "argument_list",
                                                  "start": {
                                                    "row": 142,
                                                    "column": 51
                                                  },
                                                  "end": {
                                                    "row": 142,
                                                    "column": 53
                                                  },
                                                  "text": "()",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 142,
                                                        "column": 51
                                                      },
                                                      "end": {
                                                        "row": 142,
                                                        "column": 52
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 142,
                                                        "column": 52
                                                      },
                                                      "end": {
                                                        "row": 142,
                                                        "column": 53
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 143,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 143,
                                        "column": 59
                                      },
                                      "text": "self._state = WSParserState.READ_HEADER",
                                      "children": [
                                        {
                                          "type": "assignment",
                                          "start": {
                                            "row": 143,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 143,
                                            "column": 59
                                          },
                                          "text": "self._state = WSParserState.READ_HEADER",
                                          "children": [
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 143,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 143,
                                                "column": 31
                                              },
                                              "text": "self._state",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 24
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 31
                                                  },
                                                  "text": "_state"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 143,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 143,
                                                "column": 33
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "attribute",
                                              "start": {
                                                "row": 143,
                                                "column": 34
                                              },
                                              "end": {
                                                "row": 143,
                                                "column": 59
                                              },
                                              "text": "WSParserState.READ_HEADER",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 34
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 47
                                                  },
                                                  "text": "WSParserState"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 47
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 48
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 143,
                                                    "column": 48
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 59
                                                  },
                                                  "text": "READ_HEADER"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 144,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 145,
                                    "column": 25
                                  },
                                  "text": "else:\n                    break",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 144,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 144,
                                        "column": 20
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 144,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 144,
                                        "column": 21
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "block",
                                      "start": {
                                        "row": 145,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 145,
                                        "column": 25
                                      },
                                      "text": "break",
                                      "children": [
                                        {
                                          "type": "break_statement",
                                          "start": {
                                            "row": 145,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 145,
                                            "column": 25
                                          },
                                          "text": "break",
                                          "children": [
                                            {
                                              "type": "break",
                                              "start": {
                                                "row": 145,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 145,
                                                "column": 25
                                              },
                                              "text": "break"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 147,
                "column": 8
              },
              "end": {
                "row": 147,
                "column": 36
              },
              "text": "self._tail = buf[start_pos:]",
              "children": [
                {
                  "type": "assignment",
                  "start": {
                    "row": 147,
                    "column": 8
                  },
                  "end": {
                    "row": 147,
                    "column": 36
                  },
                  "text": "self._tail = buf[start_pos:]",
                  "children": [
                    {
                      "type": "attribute",
                      "start": {
                        "row": 147,
                        "column": 8
                      },
                      "end": {
                        "row": 147,
                        "column": 18
                      },
                      "text": "self._tail",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 147,
                            "column": 8
                          },
                          "end": {
                            "row": 147,
                            "column": 12
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 147,
                            "column": 12
                          },
                          "end": {
                            "row": 147,
                            "column": 13
                          },
                          "text": "."
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 147,
                            "column": 13
                          },
                          "end": {
                            "row": 147,
                            "column": 18
                          },
                          "text": "_tail"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 147,
                        "column": 19
                      },
                      "end": {
                        "row": 147,
                        "column": 20
                      },
                      "text": "="
                    },
                    {
                      "type": "subscript",
                      "start": {
                        "row": 147,
                        "column": 21
                      },
                      "end": {
                        "row": 147,
                        "column": 36
                      },
                      "text": "buf[start_pos:]",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 147,
                            "column": 21
                          },
                          "end": {
                            "row": 147,
                            "column": 24
                          },
                          "text": "buf"
                        },
                        {
                          "type": "[",
                          "start": {
                            "row": 147,
                            "column": 24
                          },
                          "end": {
                            "row": 147,
                            "column": 25
                          },
                          "text": "["
                        },
                        {
                          "type": "slice",
                          "start": {
                            "row": 147,
                            "column": 25
                          },
                          "end": {
                            "row": 147,
                            "column": 35
                          },
                          "text": "start_pos:",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 147,
                                "column": 25
                              },
                              "end": {
                                "row": 147,
                                "column": 34
                              },
                              "text": "start_pos"
                            },
                            {
                              "type": ":",
                              "start": {
                                "row": 147,
                                "column": 34
                              },
                              "end": {
                                "row": 147,
                                "column": 35
                              },
                              "text": ":"
                            }
                          ]
                        },
                        {
                          "type": "]",
                          "start": {
                            "row": 147,
                            "column": 35
                          },
                          "end": {
                            "row": 147,
                            "column": 36
                          },
                          "text": "]"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "return_statement",
              "start": {
                "row": 149,
                "column": 8
              },
              "end": {
                "row": 149,
                "column": 21
              },
              "text": "return frames",
              "children": [
                {
                  "type": "return",
                  "start": {
                    "row": 149,
                    "column": 8
                  },
                  "end": {
                    "row": 149,
                    "column": 14
                  },
                  "text": "return"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 149,
                    "column": 15
                  },
                  "end": {
                    "row": 149,
                    "column": 21
                  },
                  "text": "frames"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}