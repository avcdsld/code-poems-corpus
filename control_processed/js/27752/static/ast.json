{
  "type": "program",
  "start": {
    "row": 0,
    "column": 0
  },
  "end": {
    "row": 326,
    "column": 1
  },
  "text": "function Browser(window, document, $log, $sniffer) {\n  var self = this,\n      location = window.location,\n      history = window.history,\n      setTimeout = window.setTimeout,\n      clearTimeout = window.clearTimeout,\n      pendingDeferIds = {};\n\n  self.isMock = false;\n\n  var outstandingRequestCount = 0;\n  var outstandingRequestCallbacks = [];\n\n  // TODO(vojta): remove this temporary api\n  self.$$completeOutstandingRequest = completeOutstandingRequest;\n  self.$$incOutstandingRequestCount = function() { outstandingRequestCount++; };\n\n  /**\n   * Executes the `fn` function(supports currying) and decrements the `outstandingRequestCallbacks`\n   * counter. If the counter reaches 0, all the `outstandingRequestCallbacks` are executed.\n   */\n  function completeOutstandingRequest(fn) {\n    try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }\n  }\n\n  function getHash(url) {\n    var index = url.indexOf('#');\n    return index === -1 ? '' : url.substr(index);\n  }\n\n  /**\n   * @private\n   * Note: this method is used only by scenario runner\n   * TODO(vojta): prefix this method with $$ ?\n   * @param {function()} callback Function that will be called when no outstanding request\n   */\n  self.notifyWhenNoOutstandingRequests = function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  };\n\n  //////////////////////////////////////////////////////////////\n  // URL API\n  //////////////////////////////////////////////////////////////\n\n  var cachedState, lastHistoryState,\n      lastBrowserUrl = location.href,\n      baseElement = document.find('base'),\n      pendingLocation = null,\n      getCurrentState = !$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      };\n\n  cacheState();\n  lastHistoryState = cachedState;\n\n  /**\n   * @name $browser#url\n   *\n   * @description\n   * GETTER:\n   * Without any argument, this method just returns current value of location.href.\n   *\n   * SETTER:\n   * With at least one argument, this method sets url to new value.\n   * If html5 history api supported, pushState/replaceState is used, otherwise\n   * location.href/location.replace is used.\n   * Returns its own instance to allow chaining\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to change url.\n   *\n   * @param {string} url New url (when used as setter)\n   * @param {boolean=} replace Should new url replace current history record?\n   * @param {object=} state object to use with pushState/replaceState\n   */\n  self.url = function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  };\n\n  /**\n   * @name $browser#state\n   *\n   * @description\n   * This method is a getter.\n   *\n   * Return history.state or null if history.state is undefined.\n   *\n   * @returns {object} state\n   */\n  self.state = function() {\n    return cachedState;\n  };\n\n  var urlChangeListeners = [],\n      urlChangeInit = false;\n\n  function cacheStateAndFireUrlChange() {\n    pendingLocation = null;\n    cacheState();\n    fireUrlChange();\n  }\n\n  // This variable should be used *only* inside the cacheState function.\n  var lastCachedState = null;\n  function cacheState() {\n    // This should be the only place in $browser where `history.state` is read.\n    cachedState = getCurrentState();\n    cachedState = isUndefined(cachedState) ? null : cachedState;\n\n    // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n    if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }\n    lastCachedState = cachedState;\n  }\n\n  function fireUrlChange() {\n    if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }\n\n    lastBrowserUrl = self.url();\n    lastHistoryState = cachedState;\n    forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });\n  }\n\n  /**\n   * @name $browser#onUrlChange\n   *\n   * @description\n   * Register callback function that will be called, when url changes.\n   *\n   * It's only called when the url is changed from outside of angular:\n   * - user types different url into address bar\n   * - user clicks on history (forward/back) button\n   * - user clicks on a link\n   *\n   * It's not called when url is changed by $browser.url() method\n   *\n   * The listener gets called with new url as parameter.\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to monitor url changes in angular apps.\n   *\n   * @param {function(string)} listener Listener function to be called when url changes.\n   * @return {function(string)} Returns the registered listener fn - handy if the fn is anonymous.\n   */\n  self.onUrlChange = function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  };\n\n  /**\n   * @private\n   * Remove popstate and hashchange handler from window.\n   *\n   * NOTE: this api is intended for use only by $rootScope.\n   */\n  self.$$applicationDestroyed = function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  };\n\n  /**\n   * Checks whether the url has changed outside of Angular.\n   * Needs to be exported to be able to check for changes that have been done in sync,\n   * as hashchange/popstate events fire in async.\n   */\n  self.$$checkUrlChange = fireUrlChange;\n\n  //////////////////////////////////////////////////////////////\n  // Misc API\n  //////////////////////////////////////////////////////////////\n\n  /**\n   * @name $browser#baseHref\n   *\n   * @description\n   * Returns current <base href>\n   * (always relative - without domain)\n   *\n   * @returns {string} The current base href\n   */\n  self.baseHref = function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  };\n\n  /**\n   * @name $browser#defer\n   * @param {function()} fn A function, who's execution should be deferred.\n   * @param {number=} [delay=0] of milliseconds to defer the function execution.\n   * @returns {*} DeferId that can be used to cancel the task via `$browser.defer.cancel()`.\n   *\n   * @description\n   * Executes a fn asynchronously via `setTimeout(fn, delay)`.\n   *\n   * Unlike when calling `setTimeout` directly, in test this function is mocked and instead of using\n   * `setTimeout` in tests, the fns are queued in an array, which can be programmatically flushed\n   * via `$browser.defer.flush()`.\n   *\n   */\n  self.defer = function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  };\n\n\n  /**\n   * @name $browser#defer.cancel\n   *\n   * @description\n   * Cancels a deferred task identified with `deferId`.\n   *\n   * @param {*} deferId Token returned by the `$browser.defer` function.\n   * @returns {boolean} Returns `true` if the task hasn't executed yet and was successfully\n   *                    canceled.\n   */\n  self.defer.cancel = function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  };\n\n}",
  "children": [
    {
      "type": "function_declaration",
      "start": {
        "row": 0,
        "column": 0
      },
      "end": {
        "row": 326,
        "column": 1
      },
      "text": "function Browser(window, document, $log, $sniffer) {\n  var self = this,\n      location = window.location,\n      history = window.history,\n      setTimeout = window.setTimeout,\n      clearTimeout = window.clearTimeout,\n      pendingDeferIds = {};\n\n  self.isMock = false;\n\n  var outstandingRequestCount = 0;\n  var outstandingRequestCallbacks = [];\n\n  // TODO(vojta): remove this temporary api\n  self.$$completeOutstandingRequest = completeOutstandingRequest;\n  self.$$incOutstandingRequestCount = function() { outstandingRequestCount++; };\n\n  /**\n   * Executes the `fn` function(supports currying) and decrements the `outstandingRequestCallbacks`\n   * counter. If the counter reaches 0, all the `outstandingRequestCallbacks` are executed.\n   */\n  function completeOutstandingRequest(fn) {\n    try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }\n  }\n\n  function getHash(url) {\n    var index = url.indexOf('#');\n    return index === -1 ? '' : url.substr(index);\n  }\n\n  /**\n   * @private\n   * Note: this method is used only by scenario runner\n   * TODO(vojta): prefix this method with $$ ?\n   * @param {function()} callback Function that will be called when no outstanding request\n   */\n  self.notifyWhenNoOutstandingRequests = function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  };\n\n  //////////////////////////////////////////////////////////////\n  // URL API\n  //////////////////////////////////////////////////////////////\n\n  var cachedState, lastHistoryState,\n      lastBrowserUrl = location.href,\n      baseElement = document.find('base'),\n      pendingLocation = null,\n      getCurrentState = !$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      };\n\n  cacheState();\n  lastHistoryState = cachedState;\n\n  /**\n   * @name $browser#url\n   *\n   * @description\n   * GETTER:\n   * Without any argument, this method just returns current value of location.href.\n   *\n   * SETTER:\n   * With at least one argument, this method sets url to new value.\n   * If html5 history api supported, pushState/replaceState is used, otherwise\n   * location.href/location.replace is used.\n   * Returns its own instance to allow chaining\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to change url.\n   *\n   * @param {string} url New url (when used as setter)\n   * @param {boolean=} replace Should new url replace current history record?\n   * @param {object=} state object to use with pushState/replaceState\n   */\n  self.url = function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  };\n\n  /**\n   * @name $browser#state\n   *\n   * @description\n   * This method is a getter.\n   *\n   * Return history.state or null if history.state is undefined.\n   *\n   * @returns {object} state\n   */\n  self.state = function() {\n    return cachedState;\n  };\n\n  var urlChangeListeners = [],\n      urlChangeInit = false;\n\n  function cacheStateAndFireUrlChange() {\n    pendingLocation = null;\n    cacheState();\n    fireUrlChange();\n  }\n\n  // This variable should be used *only* inside the cacheState function.\n  var lastCachedState = null;\n  function cacheState() {\n    // This should be the only place in $browser where `history.state` is read.\n    cachedState = getCurrentState();\n    cachedState = isUndefined(cachedState) ? null : cachedState;\n\n    // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n    if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }\n    lastCachedState = cachedState;\n  }\n\n  function fireUrlChange() {\n    if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }\n\n    lastBrowserUrl = self.url();\n    lastHistoryState = cachedState;\n    forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });\n  }\n\n  /**\n   * @name $browser#onUrlChange\n   *\n   * @description\n   * Register callback function that will be called, when url changes.\n   *\n   * It's only called when the url is changed from outside of angular:\n   * - user types different url into address bar\n   * - user clicks on history (forward/back) button\n   * - user clicks on a link\n   *\n   * It's not called when url is changed by $browser.url() method\n   *\n   * The listener gets called with new url as parameter.\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to monitor url changes in angular apps.\n   *\n   * @param {function(string)} listener Listener function to be called when url changes.\n   * @return {function(string)} Returns the registered listener fn - handy if the fn is anonymous.\n   */\n  self.onUrlChange = function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  };\n\n  /**\n   * @private\n   * Remove popstate and hashchange handler from window.\n   *\n   * NOTE: this api is intended for use only by $rootScope.\n   */\n  self.$$applicationDestroyed = function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  };\n\n  /**\n   * Checks whether the url has changed outside of Angular.\n   * Needs to be exported to be able to check for changes that have been done in sync,\n   * as hashchange/popstate events fire in async.\n   */\n  self.$$checkUrlChange = fireUrlChange;\n\n  //////////////////////////////////////////////////////////////\n  // Misc API\n  //////////////////////////////////////////////////////////////\n\n  /**\n   * @name $browser#baseHref\n   *\n   * @description\n   * Returns current <base href>\n   * (always relative - without domain)\n   *\n   * @returns {string} The current base href\n   */\n  self.baseHref = function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  };\n\n  /**\n   * @name $browser#defer\n   * @param {function()} fn A function, who's execution should be deferred.\n   * @param {number=} [delay=0] of milliseconds to defer the function execution.\n   * @returns {*} DeferId that can be used to cancel the task via `$browser.defer.cancel()`.\n   *\n   * @description\n   * Executes a fn asynchronously via `setTimeout(fn, delay)`.\n   *\n   * Unlike when calling `setTimeout` directly, in test this function is mocked and instead of using\n   * `setTimeout` in tests, the fns are queued in an array, which can be programmatically flushed\n   * via `$browser.defer.flush()`.\n   *\n   */\n  self.defer = function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  };\n\n\n  /**\n   * @name $browser#defer.cancel\n   *\n   * @description\n   * Cancels a deferred task identified with `deferId`.\n   *\n   * @param {*} deferId Token returned by the `$browser.defer` function.\n   * @returns {boolean} Returns `true` if the task hasn't executed yet and was successfully\n   *                    canceled.\n   */\n  self.defer.cancel = function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  };\n\n}",
      "children": [
        {
          "type": "function",
          "start": {
            "row": 0,
            "column": 0
          },
          "end": {
            "row": 0,
            "column": 8
          },
          "text": "function"
        },
        {
          "type": "identifier",
          "start": {
            "row": 0,
            "column": 9
          },
          "end": {
            "row": 0,
            "column": 16
          },
          "text": "Browser"
        },
        {
          "type": "formal_parameters",
          "start": {
            "row": 0,
            "column": 16
          },
          "end": {
            "row": 0,
            "column": 50
          },
          "text": "(window, document, $log, $sniffer)",
          "children": [
            {
              "type": "(",
              "start": {
                "row": 0,
                "column": 16
              },
              "end": {
                "row": 0,
                "column": 17
              },
              "text": "("
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 17
              },
              "end": {
                "row": 0,
                "column": 23
              },
              "text": "window"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 23
              },
              "end": {
                "row": 0,
                "column": 24
              },
              "text": ","
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 25
              },
              "end": {
                "row": 0,
                "column": 33
              },
              "text": "document"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 33
              },
              "end": {
                "row": 0,
                "column": 34
              },
              "text": ","
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 35
              },
              "end": {
                "row": 0,
                "column": 39
              },
              "text": "$log"
            },
            {
              "type": ",",
              "start": {
                "row": 0,
                "column": 39
              },
              "end": {
                "row": 0,
                "column": 40
              },
              "text": ","
            },
            {
              "type": "identifier",
              "start": {
                "row": 0,
                "column": 41
              },
              "end": {
                "row": 0,
                "column": 49
              },
              "text": "$sniffer"
            },
            {
              "type": ")",
              "start": {
                "row": 0,
                "column": 49
              },
              "end": {
                "row": 0,
                "column": 50
              },
              "text": ")"
            }
          ]
        },
        {
          "type": "statement_block",
          "start": {
            "row": 0,
            "column": 51
          },
          "end": {
            "row": 326,
            "column": 1
          },
          "text": "{\n  var self = this,\n      location = window.location,\n      history = window.history,\n      setTimeout = window.setTimeout,\n      clearTimeout = window.clearTimeout,\n      pendingDeferIds = {};\n\n  self.isMock = false;\n\n  var outstandingRequestCount = 0;\n  var outstandingRequestCallbacks = [];\n\n  // TODO(vojta): remove this temporary api\n  self.$$completeOutstandingRequest = completeOutstandingRequest;\n  self.$$incOutstandingRequestCount = function() { outstandingRequestCount++; };\n\n  /**\n   * Executes the `fn` function(supports currying) and decrements the `outstandingRequestCallbacks`\n   * counter. If the counter reaches 0, all the `outstandingRequestCallbacks` are executed.\n   */\n  function completeOutstandingRequest(fn) {\n    try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }\n  }\n\n  function getHash(url) {\n    var index = url.indexOf('#');\n    return index === -1 ? '' : url.substr(index);\n  }\n\n  /**\n   * @private\n   * Note: this method is used only by scenario runner\n   * TODO(vojta): prefix this method with $$ ?\n   * @param {function()} callback Function that will be called when no outstanding request\n   */\n  self.notifyWhenNoOutstandingRequests = function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  };\n\n  //////////////////////////////////////////////////////////////\n  // URL API\n  //////////////////////////////////////////////////////////////\n\n  var cachedState, lastHistoryState,\n      lastBrowserUrl = location.href,\n      baseElement = document.find('base'),\n      pendingLocation = null,\n      getCurrentState = !$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      };\n\n  cacheState();\n  lastHistoryState = cachedState;\n\n  /**\n   * @name $browser#url\n   *\n   * @description\n   * GETTER:\n   * Without any argument, this method just returns current value of location.href.\n   *\n   * SETTER:\n   * With at least one argument, this method sets url to new value.\n   * If html5 history api supported, pushState/replaceState is used, otherwise\n   * location.href/location.replace is used.\n   * Returns its own instance to allow chaining\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to change url.\n   *\n   * @param {string} url New url (when used as setter)\n   * @param {boolean=} replace Should new url replace current history record?\n   * @param {object=} state object to use with pushState/replaceState\n   */\n  self.url = function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  };\n\n  /**\n   * @name $browser#state\n   *\n   * @description\n   * This method is a getter.\n   *\n   * Return history.state or null if history.state is undefined.\n   *\n   * @returns {object} state\n   */\n  self.state = function() {\n    return cachedState;\n  };\n\n  var urlChangeListeners = [],\n      urlChangeInit = false;\n\n  function cacheStateAndFireUrlChange() {\n    pendingLocation = null;\n    cacheState();\n    fireUrlChange();\n  }\n\n  // This variable should be used *only* inside the cacheState function.\n  var lastCachedState = null;\n  function cacheState() {\n    // This should be the only place in $browser where `history.state` is read.\n    cachedState = getCurrentState();\n    cachedState = isUndefined(cachedState) ? null : cachedState;\n\n    // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n    if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }\n    lastCachedState = cachedState;\n  }\n\n  function fireUrlChange() {\n    if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }\n\n    lastBrowserUrl = self.url();\n    lastHistoryState = cachedState;\n    forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });\n  }\n\n  /**\n   * @name $browser#onUrlChange\n   *\n   * @description\n   * Register callback function that will be called, when url changes.\n   *\n   * It's only called when the url is changed from outside of angular:\n   * - user types different url into address bar\n   * - user clicks on history (forward/back) button\n   * - user clicks on a link\n   *\n   * It's not called when url is changed by $browser.url() method\n   *\n   * The listener gets called with new url as parameter.\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to monitor url changes in angular apps.\n   *\n   * @param {function(string)} listener Listener function to be called when url changes.\n   * @return {function(string)} Returns the registered listener fn - handy if the fn is anonymous.\n   */\n  self.onUrlChange = function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  };\n\n  /**\n   * @private\n   * Remove popstate and hashchange handler from window.\n   *\n   * NOTE: this api is intended for use only by $rootScope.\n   */\n  self.$$applicationDestroyed = function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  };\n\n  /**\n   * Checks whether the url has changed outside of Angular.\n   * Needs to be exported to be able to check for changes that have been done in sync,\n   * as hashchange/popstate events fire in async.\n   */\n  self.$$checkUrlChange = fireUrlChange;\n\n  //////////////////////////////////////////////////////////////\n  // Misc API\n  //////////////////////////////////////////////////////////////\n\n  /**\n   * @name $browser#baseHref\n   *\n   * @description\n   * Returns current <base href>\n   * (always relative - without domain)\n   *\n   * @returns {string} The current base href\n   */\n  self.baseHref = function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  };\n\n  /**\n   * @name $browser#defer\n   * @param {function()} fn A function, who's execution should be deferred.\n   * @param {number=} [delay=0] of milliseconds to defer the function execution.\n   * @returns {*} DeferId that can be used to cancel the task via `$browser.defer.cancel()`.\n   *\n   * @description\n   * Executes a fn asynchronously via `setTimeout(fn, delay)`.\n   *\n   * Unlike when calling `setTimeout` directly, in test this function is mocked and instead of using\n   * `setTimeout` in tests, the fns are queued in an array, which can be programmatically flushed\n   * via `$browser.defer.flush()`.\n   *\n   */\n  self.defer = function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  };\n\n\n  /**\n   * @name $browser#defer.cancel\n   *\n   * @description\n   * Cancels a deferred task identified with `deferId`.\n   *\n   * @param {*} deferId Token returned by the `$browser.defer` function.\n   * @returns {boolean} Returns `true` if the task hasn't executed yet and was successfully\n   *                    canceled.\n   */\n  self.defer.cancel = function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  };\n\n}",
          "children": [
            {
              "type": "{",
              "start": {
                "row": 0,
                "column": 51
              },
              "end": {
                "row": 0,
                "column": 52
              },
              "text": "{"
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 1,
                "column": 2
              },
              "end": {
                "row": 6,
                "column": 27
              },
              "text": "var self = this,\n      location = window.location,\n      history = window.history,\n      setTimeout = window.setTimeout,\n      clearTimeout = window.clearTimeout,\n      pendingDeferIds = {};",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 1,
                    "column": 2
                  },
                  "end": {
                    "row": 1,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 1,
                    "column": 6
                  },
                  "end": {
                    "row": 1,
                    "column": 17
                  },
                  "text": "self = this",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 1,
                        "column": 6
                      },
                      "end": {
                        "row": 1,
                        "column": 10
                      },
                      "text": "self"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 1,
                        "column": 11
                      },
                      "end": {
                        "row": 1,
                        "column": 12
                      },
                      "text": "="
                    },
                    {
                      "type": "this",
                      "start": {
                        "row": 1,
                        "column": 13
                      },
                      "end": {
                        "row": 1,
                        "column": 17
                      },
                      "text": "this"
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 1,
                    "column": 17
                  },
                  "end": {
                    "row": 1,
                    "column": 18
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 2,
                    "column": 6
                  },
                  "end": {
                    "row": 2,
                    "column": 32
                  },
                  "text": "location = window.location",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 2,
                        "column": 6
                      },
                      "end": {
                        "row": 2,
                        "column": 14
                      },
                      "text": "location"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 2,
                        "column": 15
                      },
                      "end": {
                        "row": 2,
                        "column": 16
                      },
                      "text": "="
                    },
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 2,
                        "column": 17
                      },
                      "end": {
                        "row": 2,
                        "column": 32
                      },
                      "text": "window.location",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 2,
                            "column": 17
                          },
                          "end": {
                            "row": 2,
                            "column": 23
                          },
                          "text": "window"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 2,
                            "column": 23
                          },
                          "end": {
                            "row": 2,
                            "column": 24
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 2,
                            "column": 24
                          },
                          "end": {
                            "row": 2,
                            "column": 32
                          },
                          "text": "location"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 2,
                    "column": 32
                  },
                  "end": {
                    "row": 2,
                    "column": 33
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 3,
                    "column": 6
                  },
                  "end": {
                    "row": 3,
                    "column": 30
                  },
                  "text": "history = window.history",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 3,
                        "column": 6
                      },
                      "end": {
                        "row": 3,
                        "column": 13
                      },
                      "text": "history"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 3,
                        "column": 14
                      },
                      "end": {
                        "row": 3,
                        "column": 15
                      },
                      "text": "="
                    },
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 3,
                        "column": 16
                      },
                      "end": {
                        "row": 3,
                        "column": 30
                      },
                      "text": "window.history",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 3,
                            "column": 16
                          },
                          "end": {
                            "row": 3,
                            "column": 22
                          },
                          "text": "window"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 3,
                            "column": 22
                          },
                          "end": {
                            "row": 3,
                            "column": 23
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 3,
                            "column": 23
                          },
                          "end": {
                            "row": 3,
                            "column": 30
                          },
                          "text": "history"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 3,
                    "column": 30
                  },
                  "end": {
                    "row": 3,
                    "column": 31
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 4,
                    "column": 6
                  },
                  "end": {
                    "row": 4,
                    "column": 36
                  },
                  "text": "setTimeout = window.setTimeout",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 4,
                        "column": 6
                      },
                      "end": {
                        "row": 4,
                        "column": 16
                      },
                      "text": "setTimeout"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 4,
                        "column": 17
                      },
                      "end": {
                        "row": 4,
                        "column": 18
                      },
                      "text": "="
                    },
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 4,
                        "column": 19
                      },
                      "end": {
                        "row": 4,
                        "column": 36
                      },
                      "text": "window.setTimeout",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 4,
                            "column": 19
                          },
                          "end": {
                            "row": 4,
                            "column": 25
                          },
                          "text": "window"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 4,
                            "column": 25
                          },
                          "end": {
                            "row": 4,
                            "column": 26
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 4,
                            "column": 26
                          },
                          "end": {
                            "row": 4,
                            "column": 36
                          },
                          "text": "setTimeout"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 4,
                    "column": 36
                  },
                  "end": {
                    "row": 4,
                    "column": 37
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 5,
                    "column": 6
                  },
                  "end": {
                    "row": 5,
                    "column": 40
                  },
                  "text": "clearTimeout = window.clearTimeout",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 5,
                        "column": 6
                      },
                      "end": {
                        "row": 5,
                        "column": 18
                      },
                      "text": "clearTimeout"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 5,
                        "column": 19
                      },
                      "end": {
                        "row": 5,
                        "column": 20
                      },
                      "text": "="
                    },
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 5,
                        "column": 21
                      },
                      "end": {
                        "row": 5,
                        "column": 40
                      },
                      "text": "window.clearTimeout",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 5,
                            "column": 21
                          },
                          "end": {
                            "row": 5,
                            "column": 27
                          },
                          "text": "window"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 5,
                            "column": 27
                          },
                          "end": {
                            "row": 5,
                            "column": 28
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 5,
                            "column": 28
                          },
                          "end": {
                            "row": 5,
                            "column": 40
                          },
                          "text": "clearTimeout"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 5,
                    "column": 40
                  },
                  "end": {
                    "row": 5,
                    "column": 41
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 6,
                    "column": 6
                  },
                  "end": {
                    "row": 6,
                    "column": 26
                  },
                  "text": "pendingDeferIds = {}",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 6,
                        "column": 6
                      },
                      "end": {
                        "row": 6,
                        "column": 21
                      },
                      "text": "pendingDeferIds"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 6,
                        "column": 22
                      },
                      "end": {
                        "row": 6,
                        "column": 23
                      },
                      "text": "="
                    },
                    {
                      "type": "object",
                      "start": {
                        "row": 6,
                        "column": 24
                      },
                      "end": {
                        "row": 6,
                        "column": 26
                      },
                      "text": "{}",
                      "children": [
                        {
                          "type": "{",
                          "start": {
                            "row": 6,
                            "column": 24
                          },
                          "end": {
                            "row": 6,
                            "column": 25
                          },
                          "text": "{"
                        },
                        {
                          "type": "}",
                          "start": {
                            "row": 6,
                            "column": 25
                          },
                          "end": {
                            "row": 6,
                            "column": 26
                          },
                          "text": "}"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 6,
                    "column": 26
                  },
                  "end": {
                    "row": 6,
                    "column": 27
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 8,
                "column": 2
              },
              "end": {
                "row": 8,
                "column": 22
              },
              "text": "self.isMock = false;",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 8,
                    "column": 2
                  },
                  "end": {
                    "row": 8,
                    "column": 21
                  },
                  "text": "self.isMock = false",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 8,
                        "column": 2
                      },
                      "end": {
                        "row": 8,
                        "column": 13
                      },
                      "text": "self.isMock",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 8,
                            "column": 2
                          },
                          "end": {
                            "row": 8,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 8,
                            "column": 6
                          },
                          "end": {
                            "row": 8,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 8,
                            "column": 7
                          },
                          "end": {
                            "row": 8,
                            "column": 13
                          },
                          "text": "isMock"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 8,
                        "column": 14
                      },
                      "end": {
                        "row": 8,
                        "column": 15
                      },
                      "text": "="
                    },
                    {
                      "type": "false",
                      "start": {
                        "row": 8,
                        "column": 16
                      },
                      "end": {
                        "row": 8,
                        "column": 21
                      },
                      "text": "false"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 8,
                    "column": 21
                  },
                  "end": {
                    "row": 8,
                    "column": 22
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 10,
                "column": 2
              },
              "end": {
                "row": 10,
                "column": 34
              },
              "text": "var outstandingRequestCount = 0;",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 10,
                    "column": 2
                  },
                  "end": {
                    "row": 10,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 10,
                    "column": 6
                  },
                  "end": {
                    "row": 10,
                    "column": 33
                  },
                  "text": "outstandingRequestCount = 0",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 10,
                        "column": 6
                      },
                      "end": {
                        "row": 10,
                        "column": 29
                      },
                      "text": "outstandingRequestCount"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 10,
                        "column": 30
                      },
                      "end": {
                        "row": 10,
                        "column": 31
                      },
                      "text": "="
                    },
                    {
                      "type": "number",
                      "start": {
                        "row": 10,
                        "column": 32
                      },
                      "end": {
                        "row": 10,
                        "column": 33
                      },
                      "text": "0"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 10,
                    "column": 33
                  },
                  "end": {
                    "row": 10,
                    "column": 34
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 11,
                "column": 2
              },
              "end": {
                "row": 11,
                "column": 39
              },
              "text": "var outstandingRequestCallbacks = [];",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 11,
                    "column": 2
                  },
                  "end": {
                    "row": 11,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 11,
                    "column": 6
                  },
                  "end": {
                    "row": 11,
                    "column": 38
                  },
                  "text": "outstandingRequestCallbacks = []",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 11,
                        "column": 6
                      },
                      "end": {
                        "row": 11,
                        "column": 33
                      },
                      "text": "outstandingRequestCallbacks"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 11,
                        "column": 34
                      },
                      "end": {
                        "row": 11,
                        "column": 35
                      },
                      "text": "="
                    },
                    {
                      "type": "array",
                      "start": {
                        "row": 11,
                        "column": 36
                      },
                      "end": {
                        "row": 11,
                        "column": 38
                      },
                      "text": "[]",
                      "children": [
                        {
                          "type": "[",
                          "start": {
                            "row": 11,
                            "column": 36
                          },
                          "end": {
                            "row": 11,
                            "column": 37
                          },
                          "text": "["
                        },
                        {
                          "type": "]",
                          "start": {
                            "row": 11,
                            "column": 37
                          },
                          "end": {
                            "row": 11,
                            "column": 38
                          },
                          "text": "]"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 11,
                    "column": 38
                  },
                  "end": {
                    "row": 11,
                    "column": 39
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 13,
                "column": 2
              },
              "end": {
                "row": 13,
                "column": 43
              },
              "text": "// TODO(vojta): remove this temporary api"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 14,
                "column": 2
              },
              "end": {
                "row": 14,
                "column": 65
              },
              "text": "self.$$completeOutstandingRequest = completeOutstandingRequest;",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 14,
                    "column": 2
                  },
                  "end": {
                    "row": 14,
                    "column": 64
                  },
                  "text": "self.$$completeOutstandingRequest = completeOutstandingRequest",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 14,
                        "column": 2
                      },
                      "end": {
                        "row": 14,
                        "column": 35
                      },
                      "text": "self.$$completeOutstandingRequest",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 14,
                            "column": 2
                          },
                          "end": {
                            "row": 14,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 14,
                            "column": 6
                          },
                          "end": {
                            "row": 14,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 14,
                            "column": 7
                          },
                          "end": {
                            "row": 14,
                            "column": 35
                          },
                          "text": "$$completeOutstandingRequest"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 14,
                        "column": 36
                      },
                      "end": {
                        "row": 14,
                        "column": 37
                      },
                      "text": "="
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 14,
                        "column": 38
                      },
                      "end": {
                        "row": 14,
                        "column": 64
                      },
                      "text": "completeOutstandingRequest"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 14,
                    "column": 64
                  },
                  "end": {
                    "row": 14,
                    "column": 65
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 15,
                "column": 2
              },
              "end": {
                "row": 15,
                "column": 80
              },
              "text": "self.$$incOutstandingRequestCount = function() { outstandingRequestCount++; };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 15,
                    "column": 2
                  },
                  "end": {
                    "row": 15,
                    "column": 79
                  },
                  "text": "self.$$incOutstandingRequestCount = function() { outstandingRequestCount++; }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 15,
                        "column": 2
                      },
                      "end": {
                        "row": 15,
                        "column": 35
                      },
                      "text": "self.$$incOutstandingRequestCount",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 15,
                            "column": 2
                          },
                          "end": {
                            "row": 15,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 15,
                            "column": 6
                          },
                          "end": {
                            "row": 15,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 15,
                            "column": 7
                          },
                          "end": {
                            "row": 15,
                            "column": 35
                          },
                          "text": "$$incOutstandingRequestCount"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 15,
                        "column": 36
                      },
                      "end": {
                        "row": 15,
                        "column": 37
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 15,
                        "column": 38
                      },
                      "end": {
                        "row": 15,
                        "column": 79
                      },
                      "text": "function() { outstandingRequestCount++; }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 15,
                            "column": 38
                          },
                          "end": {
                            "row": 15,
                            "column": 46
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 15,
                            "column": 46
                          },
                          "end": {
                            "row": 15,
                            "column": 48
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 15,
                                "column": 46
                              },
                              "end": {
                                "row": 15,
                                "column": 47
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 15,
                                "column": 47
                              },
                              "end": {
                                "row": 15,
                                "column": 48
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 15,
                            "column": 49
                          },
                          "end": {
                            "row": 15,
                            "column": 79
                          },
                          "text": "{ outstandingRequestCount++; }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 15,
                                "column": 49
                              },
                              "end": {
                                "row": 15,
                                "column": 50
                              },
                              "text": "{"
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 15,
                                "column": 51
                              },
                              "end": {
                                "row": 15,
                                "column": 77
                              },
                              "text": "outstandingRequestCount++;",
                              "children": [
                                {
                                  "type": "update_expression",
                                  "start": {
                                    "row": 15,
                                    "column": 51
                                  },
                                  "end": {
                                    "row": 15,
                                    "column": 76
                                  },
                                  "text": "outstandingRequestCount++",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 15,
                                        "column": 51
                                      },
                                      "end": {
                                        "row": 15,
                                        "column": 74
                                      },
                                      "text": "outstandingRequestCount"
                                    },
                                    {
                                      "type": "++",
                                      "start": {
                                        "row": 15,
                                        "column": 74
                                      },
                                      "end": {
                                        "row": 15,
                                        "column": 76
                                      },
                                      "text": "++"
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 15,
                                    "column": 76
                                  },
                                  "end": {
                                    "row": 15,
                                    "column": 77
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 15,
                                "column": 78
                              },
                              "end": {
                                "row": 15,
                                "column": 79
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 15,
                    "column": 79
                  },
                  "end": {
                    "row": 15,
                    "column": 80
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 17,
                "column": 2
              },
              "end": {
                "row": 20,
                "column": 5
              },
              "text": "/**\n   * Executes the `fn` function(supports currying) and decrements the `outstandingRequestCallbacks`\n   * counter. If the counter reaches 0, all the `outstandingRequestCallbacks` are executed.\n   */"
            },
            {
              "type": "function_declaration",
              "start": {
                "row": 21,
                "column": 2
              },
              "end": {
                "row": 36,
                "column": 3
              },
              "text": "function completeOutstandingRequest(fn) {\n    try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }\n  }",
              "children": [
                {
                  "type": "function",
                  "start": {
                    "row": 21,
                    "column": 2
                  },
                  "end": {
                    "row": 21,
                    "column": 10
                  },
                  "text": "function"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 21,
                    "column": 11
                  },
                  "end": {
                    "row": 21,
                    "column": 37
                  },
                  "text": "completeOutstandingRequest"
                },
                {
                  "type": "formal_parameters",
                  "start": {
                    "row": 21,
                    "column": 37
                  },
                  "end": {
                    "row": 21,
                    "column": 41
                  },
                  "text": "(fn)",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 21,
                        "column": 37
                      },
                      "end": {
                        "row": 21,
                        "column": 38
                      },
                      "text": "("
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 21,
                        "column": 38
                      },
                      "end": {
                        "row": 21,
                        "column": 40
                      },
                      "text": "fn"
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 21,
                        "column": 40
                      },
                      "end": {
                        "row": 21,
                        "column": 41
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": "statement_block",
                  "start": {
                    "row": 21,
                    "column": 42
                  },
                  "end": {
                    "row": 36,
                    "column": 3
                  },
                  "text": "{\n    try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }\n  }",
                  "children": [
                    {
                      "type": "{",
                      "start": {
                        "row": 21,
                        "column": 42
                      },
                      "end": {
                        "row": 21,
                        "column": 43
                      },
                      "text": "{"
                    },
                    {
                      "type": "try_statement",
                      "start": {
                        "row": 22,
                        "column": 4
                      },
                      "end": {
                        "row": 35,
                        "column": 5
                      },
                      "text": "try {\n      fn.apply(null, sliceArgs(arguments, 1));\n    } finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }",
                      "children": [
                        {
                          "type": "try",
                          "start": {
                            "row": 22,
                            "column": 4
                          },
                          "end": {
                            "row": 22,
                            "column": 7
                          },
                          "text": "try"
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 22,
                            "column": 8
                          },
                          "end": {
                            "row": 24,
                            "column": 5
                          },
                          "text": "{\n      fn.apply(null, sliceArgs(arguments, 1));\n    }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 22,
                                "column": 8
                              },
                              "end": {
                                "row": 22,
                                "column": 9
                              },
                              "text": "{"
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 23,
                                "column": 6
                              },
                              "end": {
                                "row": 23,
                                "column": 46
                              },
                              "text": "fn.apply(null, sliceArgs(arguments, 1));",
                              "children": [
                                {
                                  "type": "call_expression",
                                  "start": {
                                    "row": 23,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 23,
                                    "column": 45
                                  },
                                  "text": "fn.apply(null, sliceArgs(arguments, 1))",
                                  "children": [
                                    {
                                      "type": "member_expression",
                                      "start": {
                                        "row": 23,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 23,
                                        "column": 14
                                      },
                                      "text": "fn.apply",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 23,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 8
                                          },
                                          "text": "fn"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 23,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 9
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "property_identifier",
                                          "start": {
                                            "row": 23,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 14
                                          },
                                          "text": "apply"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "arguments",
                                      "start": {
                                        "row": 23,
                                        "column": 14
                                      },
                                      "end": {
                                        "row": 23,
                                        "column": 45
                                      },
                                      "text": "(null, sliceArgs(arguments, 1))",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 23,
                                            "column": 14
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 15
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "null",
                                          "start": {
                                            "row": 23,
                                            "column": 15
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 19
                                          },
                                          "text": "null"
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 23,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 20
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 23,
                                            "column": 21
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 44
                                          },
                                          "text": "sliceArgs(arguments, 1)",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 23,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 23,
                                                "column": 30
                                              },
                                              "text": "sliceArgs"
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 23,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 23,
                                                "column": 44
                                              },
                                              "text": "(arguments, 1)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 31
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 40
                                                  },
                                                  "text": "arguments"
                                                },
                                                {
                                                  "type": ",",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 40
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 41
                                                  },
                                                  "text": ","
                                                },
                                                {
                                                  "type": "number",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 42
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 43
                                                  },
                                                  "text": "1"
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 23,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 23,
                                                    "column": 44
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 23,
                                            "column": 44
                                          },
                                          "end": {
                                            "row": 23,
                                            "column": 45
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 23,
                                    "column": 45
                                  },
                                  "end": {
                                    "row": 23,
                                    "column": 46
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 24,
                                "column": 4
                              },
                              "end": {
                                "row": 24,
                                "column": 5
                              },
                              "text": "}"
                            }
                          ]
                        },
                        {
                          "type": "finally_clause",
                          "start": {
                            "row": 24,
                            "column": 6
                          },
                          "end": {
                            "row": 35,
                            "column": 5
                          },
                          "text": "finally {\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }",
                          "children": [
                            {
                              "type": "finally",
                              "start": {
                                "row": 24,
                                "column": 6
                              },
                              "end": {
                                "row": 24,
                                "column": 13
                              },
                              "text": "finally"
                            },
                            {
                              "type": "statement_block",
                              "start": {
                                "row": 24,
                                "column": 14
                              },
                              "end": {
                                "row": 35,
                                "column": 5
                              },
                              "text": "{\n      outstandingRequestCount--;\n      if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }\n    }",
                              "children": [
                                {
                                  "type": "{",
                                  "start": {
                                    "row": 24,
                                    "column": 14
                                  },
                                  "end": {
                                    "row": 24,
                                    "column": 15
                                  },
                                  "text": "{"
                                },
                                {
                                  "type": "expression_statement",
                                  "start": {
                                    "row": 25,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 25,
                                    "column": 32
                                  },
                                  "text": "outstandingRequestCount--;",
                                  "children": [
                                    {
                                      "type": "update_expression",
                                      "start": {
                                        "row": 25,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 25,
                                        "column": 31
                                      },
                                      "text": "outstandingRequestCount--",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 25,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 25,
                                            "column": 29
                                          },
                                          "text": "outstandingRequestCount"
                                        },
                                        {
                                          "type": "--",
                                          "start": {
                                            "row": 25,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 25,
                                            "column": 31
                                          },
                                          "text": "--"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ";",
                                      "start": {
                                        "row": 25,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 25,
                                        "column": 32
                                      },
                                      "text": ";"
                                    }
                                  ]
                                },
                                {
                                  "type": "if_statement",
                                  "start": {
                                    "row": 26,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 34,
                                    "column": 7
                                  },
                                  "text": "if (outstandingRequestCount === 0) {\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }",
                                  "children": [
                                    {
                                      "type": "if",
                                      "start": {
                                        "row": 26,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 26,
                                        "column": 8
                                      },
                                      "text": "if"
                                    },
                                    {
                                      "type": "parenthesized_expression",
                                      "start": {
                                        "row": 26,
                                        "column": 9
                                      },
                                      "end": {
                                        "row": 26,
                                        "column": 40
                                      },
                                      "text": "(outstandingRequestCount === 0)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 26,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 26,
                                            "column": 10
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "binary_expression",
                                          "start": {
                                            "row": 26,
                                            "column": 10
                                          },
                                          "end": {
                                            "row": 26,
                                            "column": 39
                                          },
                                          "text": "outstandingRequestCount === 0",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 26,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 26,
                                                "column": 33
                                              },
                                              "text": "outstandingRequestCount"
                                            },
                                            {
                                              "type": "===",
                                              "start": {
                                                "row": 26,
                                                "column": 34
                                              },
                                              "end": {
                                                "row": 26,
                                                "column": 37
                                              },
                                              "text": "==="
                                            },
                                            {
                                              "type": "number",
                                              "start": {
                                                "row": 26,
                                                "column": 38
                                              },
                                              "end": {
                                                "row": 26,
                                                "column": 39
                                              },
                                              "text": "0"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 26,
                                            "column": 39
                                          },
                                          "end": {
                                            "row": 26,
                                            "column": 40
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "statement_block",
                                      "start": {
                                        "row": 26,
                                        "column": 41
                                      },
                                      "end": {
                                        "row": 34,
                                        "column": 7
                                      },
                                      "text": "{\n        while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }\n      }",
                                      "children": [
                                        {
                                          "type": "{",
                                          "start": {
                                            "row": 26,
                                            "column": 41
                                          },
                                          "end": {
                                            "row": 26,
                                            "column": 42
                                          },
                                          "text": "{"
                                        },
                                        {
                                          "type": "while_statement",
                                          "start": {
                                            "row": 27,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 33,
                                            "column": 9
                                          },
                                          "text": "while (outstandingRequestCallbacks.length) {\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }",
                                          "children": [
                                            {
                                              "type": "while",
                                              "start": {
                                                "row": 27,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 27,
                                                "column": 13
                                              },
                                              "text": "while"
                                            },
                                            {
                                              "type": "parenthesized_expression",
                                              "start": {
                                                "row": 27,
                                                "column": 14
                                              },
                                              "end": {
                                                "row": 27,
                                                "column": 50
                                              },
                                              "text": "(outstandingRequestCallbacks.length)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 27,
                                                    "column": 14
                                                  },
                                                  "end": {
                                                    "row": 27,
                                                    "column": 15
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "member_expression",
                                                  "start": {
                                                    "row": 27,
                                                    "column": 15
                                                  },
                                                  "end": {
                                                    "row": 27,
                                                    "column": 49
                                                  },
                                                  "text": "outstandingRequestCallbacks.length",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 27,
                                                        "column": 15
                                                      },
                                                      "end": {
                                                        "row": 27,
                                                        "column": 42
                                                      },
                                                      "text": "outstandingRequestCallbacks"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 27,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 27,
                                                        "column": 43
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "property_identifier",
                                                      "start": {
                                                        "row": 27,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 27,
                                                        "column": 49
                                                      },
                                                      "text": "length"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 27,
                                                    "column": 49
                                                  },
                                                  "end": {
                                                    "row": 27,
                                                    "column": 50
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "statement_block",
                                              "start": {
                                                "row": 27,
                                                "column": 51
                                              },
                                              "end": {
                                                "row": 33,
                                                "column": 9
                                              },
                                              "text": "{\n          try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }\n        }",
                                              "children": [
                                                {
                                                  "type": "{",
                                                  "start": {
                                                    "row": 27,
                                                    "column": 51
                                                  },
                                                  "end": {
                                                    "row": 27,
                                                    "column": 52
                                                  },
                                                  "text": "{"
                                                },
                                                {
                                                  "type": "try_statement",
                                                  "start": {
                                                    "row": 28,
                                                    "column": 10
                                                  },
                                                  "end": {
                                                    "row": 32,
                                                    "column": 11
                                                  },
                                                  "text": "try {\n            outstandingRequestCallbacks.pop()();\n          } catch (e) {\n            $log.error(e);\n          }",
                                                  "children": [
                                                    {
                                                      "type": "try",
                                                      "start": {
                                                        "row": 28,
                                                        "column": 10
                                                      },
                                                      "end": {
                                                        "row": 28,
                                                        "column": 13
                                                      },
                                                      "text": "try"
                                                    },
                                                    {
                                                      "type": "statement_block",
                                                      "start": {
                                                        "row": 28,
                                                        "column": 14
                                                      },
                                                      "end": {
                                                        "row": 30,
                                                        "column": 11
                                                      },
                                                      "text": "{\n            outstandingRequestCallbacks.pop()();\n          }",
                                                      "children": [
                                                        {
                                                          "type": "{",
                                                          "start": {
                                                            "row": 28,
                                                            "column": 14
                                                          },
                                                          "end": {
                                                            "row": 28,
                                                            "column": 15
                                                          },
                                                          "text": "{"
                                                        },
                                                        {
                                                          "type": "expression_statement",
                                                          "start": {
                                                            "row": 29,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 29,
                                                            "column": 48
                                                          },
                                                          "text": "outstandingRequestCallbacks.pop()();",
                                                          "children": [
                                                            {
                                                              "type": "call_expression",
                                                              "start": {
                                                                "row": 29,
                                                                "column": 12
                                                              },
                                                              "end": {
                                                                "row": 29,
                                                                "column": 47
                                                              },
                                                              "text": "outstandingRequestCallbacks.pop()()",
                                                              "children": [
                                                                {
                                                                  "type": "call_expression",
                                                                  "start": {
                                                                    "row": 29,
                                                                    "column": 12
                                                                  },
                                                                  "end": {
                                                                    "row": 29,
                                                                    "column": 45
                                                                  },
                                                                  "text": "outstandingRequestCallbacks.pop()",
                                                                  "children": [
                                                                    {
                                                                      "type": "member_expression",
                                                                      "start": {
                                                                        "row": 29,
                                                                        "column": 12
                                                                      },
                                                                      "end": {
                                                                        "row": 29,
                                                                        "column": 43
                                                                      },
                                                                      "text": "outstandingRequestCallbacks.pop",
                                                                      "children": [
                                                                        {
                                                                          "type": "identifier",
                                                                          "start": {
                                                                            "row": 29,
                                                                            "column": 12
                                                                          },
                                                                          "end": {
                                                                            "row": 29,
                                                                            "column": 39
                                                                          },
                                                                          "text": "outstandingRequestCallbacks"
                                                                        },
                                                                        {
                                                                          "type": ".",
                                                                          "start": {
                                                                            "row": 29,
                                                                            "column": 39
                                                                          },
                                                                          "end": {
                                                                            "row": 29,
                                                                            "column": 40
                                                                          },
                                                                          "text": "."
                                                                        },
                                                                        {
                                                                          "type": "property_identifier",
                                                                          "start": {
                                                                            "row": 29,
                                                                            "column": 40
                                                                          },
                                                                          "end": {
                                                                            "row": 29,
                                                                            "column": 43
                                                                          },
                                                                          "text": "pop"
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "arguments",
                                                                      "start": {
                                                                        "row": 29,
                                                                        "column": 43
                                                                      },
                                                                      "end": {
                                                                        "row": 29,
                                                                        "column": 45
                                                                      },
                                                                      "text": "()",
                                                                      "children": [
                                                                        {
                                                                          "type": "(",
                                                                          "start": {
                                                                            "row": 29,
                                                                            "column": 43
                                                                          },
                                                                          "end": {
                                                                            "row": 29,
                                                                            "column": 44
                                                                          },
                                                                          "text": "("
                                                                        },
                                                                        {
                                                                          "type": ")",
                                                                          "start": {
                                                                            "row": 29,
                                                                            "column": 44
                                                                          },
                                                                          "end": {
                                                                            "row": 29,
                                                                            "column": 45
                                                                          },
                                                                          "text": ")"
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "arguments",
                                                                  "start": {
                                                                    "row": 29,
                                                                    "column": 45
                                                                  },
                                                                  "end": {
                                                                    "row": 29,
                                                                    "column": 47
                                                                  },
                                                                  "text": "()",
                                                                  "children": [
                                                                    {
                                                                      "type": "(",
                                                                      "start": {
                                                                        "row": 29,
                                                                        "column": 45
                                                                      },
                                                                      "end": {
                                                                        "row": 29,
                                                                        "column": 46
                                                                      },
                                                                      "text": "("
                                                                    },
                                                                    {
                                                                      "type": ")",
                                                                      "start": {
                                                                        "row": 29,
                                                                        "column": 46
                                                                      },
                                                                      "end": {
                                                                        "row": 29,
                                                                        "column": 47
                                                                      },
                                                                      "text": ")"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ";",
                                                              "start": {
                                                                "row": 29,
                                                                "column": 47
                                                              },
                                                              "end": {
                                                                "row": 29,
                                                                "column": 48
                                                              },
                                                              "text": ";"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "}",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 10
                                                          },
                                                          "end": {
                                                            "row": 30,
                                                            "column": 11
                                                          },
                                                          "text": "}"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "catch_clause",
                                                      "start": {
                                                        "row": 30,
                                                        "column": 12
                                                      },
                                                      "end": {
                                                        "row": 32,
                                                        "column": 11
                                                      },
                                                      "text": "catch (e) {\n            $log.error(e);\n          }",
                                                      "children": [
                                                        {
                                                          "type": "catch",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 30,
                                                            "column": 17
                                                          },
                                                          "text": "catch"
                                                        },
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 18
                                                          },
                                                          "end": {
                                                            "row": 30,
                                                            "column": 19
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 19
                                                          },
                                                          "end": {
                                                            "row": 30,
                                                            "column": 20
                                                          },
                                                          "text": "e"
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 20
                                                          },
                                                          "end": {
                                                            "row": 30,
                                                            "column": 21
                                                          },
                                                          "text": ")"
                                                        },
                                                        {
                                                          "type": "statement_block",
                                                          "start": {
                                                            "row": 30,
                                                            "column": 22
                                                          },
                                                          "end": {
                                                            "row": 32,
                                                            "column": 11
                                                          },
                                                          "text": "{\n            $log.error(e);\n          }",
                                                          "children": [
                                                            {
                                                              "type": "{",
                                                              "start": {
                                                                "row": 30,
                                                                "column": 22
                                                              },
                                                              "end": {
                                                                "row": 30,
                                                                "column": 23
                                                              },
                                                              "text": "{"
                                                            },
                                                            {
                                                              "type": "expression_statement",
                                                              "start": {
                                                                "row": 31,
                                                                "column": 12
                                                              },
                                                              "end": {
                                                                "row": 31,
                                                                "column": 26
                                                              },
                                                              "text": "$log.error(e);",
                                                              "children": [
                                                                {
                                                                  "type": "call_expression",
                                                                  "start": {
                                                                    "row": 31,
                                                                    "column": 12
                                                                  },
                                                                  "end": {
                                                                    "row": 31,
                                                                    "column": 25
                                                                  },
                                                                  "text": "$log.error(e)",
                                                                  "children": [
                                                                    {
                                                                      "type": "member_expression",
                                                                      "start": {
                                                                        "row": 31,
                                                                        "column": 12
                                                                      },
                                                                      "end": {
                                                                        "row": 31,
                                                                        "column": 22
                                                                      },
                                                                      "text": "$log.error",
                                                                      "children": [
                                                                        {
                                                                          "type": "identifier",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 12
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 16
                                                                          },
                                                                          "text": "$log"
                                                                        },
                                                                        {
                                                                          "type": ".",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 16
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 17
                                                                          },
                                                                          "text": "."
                                                                        },
                                                                        {
                                                                          "type": "property_identifier",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 17
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 22
                                                                          },
                                                                          "text": "error"
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "arguments",
                                                                      "start": {
                                                                        "row": 31,
                                                                        "column": 22
                                                                      },
                                                                      "end": {
                                                                        "row": 31,
                                                                        "column": 25
                                                                      },
                                                                      "text": "(e)",
                                                                      "children": [
                                                                        {
                                                                          "type": "(",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 22
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 23
                                                                          },
                                                                          "text": "("
                                                                        },
                                                                        {
                                                                          "type": "identifier",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 23
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 24
                                                                          },
                                                                          "text": "e"
                                                                        },
                                                                        {
                                                                          "type": ")",
                                                                          "start": {
                                                                            "row": 31,
                                                                            "column": 24
                                                                          },
                                                                          "end": {
                                                                            "row": 31,
                                                                            "column": 25
                                                                          },
                                                                          "text": ")"
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": ";",
                                                                  "start": {
                                                                    "row": 31,
                                                                    "column": 25
                                                                  },
                                                                  "end": {
                                                                    "row": 31,
                                                                    "column": 26
                                                                  },
                                                                  "text": ";"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "}",
                                                              "start": {
                                                                "row": 32,
                                                                "column": 10
                                                              },
                                                              "end": {
                                                                "row": 32,
                                                                "column": 11
                                                              },
                                                              "text": "}"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "}",
                                                  "start": {
                                                    "row": 33,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 33,
                                                    "column": 9
                                                  },
                                                  "text": "}"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "}",
                                          "start": {
                                            "row": 34,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 34,
                                            "column": 7
                                          },
                                          "text": "}"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "}",
                                  "start": {
                                    "row": 35,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 35,
                                    "column": 5
                                  },
                                  "text": "}"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "}",
                      "start": {
                        "row": 36,
                        "column": 2
                      },
                      "end": {
                        "row": 36,
                        "column": 3
                      },
                      "text": "}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "function_declaration",
              "start": {
                "row": 38,
                "column": 2
              },
              "end": {
                "row": 41,
                "column": 3
              },
              "text": "function getHash(url) {\n    var index = url.indexOf('#');\n    return index === -1 ? '' : url.substr(index);\n  }",
              "children": [
                {
                  "type": "function",
                  "start": {
                    "row": 38,
                    "column": 2
                  },
                  "end": {
                    "row": 38,
                    "column": 10
                  },
                  "text": "function"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 38,
                    "column": 11
                  },
                  "end": {
                    "row": 38,
                    "column": 18
                  },
                  "text": "getHash"
                },
                {
                  "type": "formal_parameters",
                  "start": {
                    "row": 38,
                    "column": 18
                  },
                  "end": {
                    "row": 38,
                    "column": 23
                  },
                  "text": "(url)",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 38,
                        "column": 18
                      },
                      "end": {
                        "row": 38,
                        "column": 19
                      },
                      "text": "("
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 38,
                        "column": 19
                      },
                      "end": {
                        "row": 38,
                        "column": 22
                      },
                      "text": "url"
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 38,
                        "column": 22
                      },
                      "end": {
                        "row": 38,
                        "column": 23
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": "statement_block",
                  "start": {
                    "row": 38,
                    "column": 24
                  },
                  "end": {
                    "row": 41,
                    "column": 3
                  },
                  "text": "{\n    var index = url.indexOf('#');\n    return index === -1 ? '' : url.substr(index);\n  }",
                  "children": [
                    {
                      "type": "{",
                      "start": {
                        "row": 38,
                        "column": 24
                      },
                      "end": {
                        "row": 38,
                        "column": 25
                      },
                      "text": "{"
                    },
                    {
                      "type": "variable_declaration",
                      "start": {
                        "row": 39,
                        "column": 4
                      },
                      "end": {
                        "row": 39,
                        "column": 33
                      },
                      "text": "var index = url.indexOf('#');",
                      "children": [
                        {
                          "type": "var",
                          "start": {
                            "row": 39,
                            "column": 4
                          },
                          "end": {
                            "row": 39,
                            "column": 7
                          },
                          "text": "var"
                        },
                        {
                          "type": "variable_declarator",
                          "start": {
                            "row": 39,
                            "column": 8
                          },
                          "end": {
                            "row": 39,
                            "column": 32
                          },
                          "text": "index = url.indexOf('#')",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 39,
                                "column": 8
                              },
                              "end": {
                                "row": 39,
                                "column": 13
                              },
                              "text": "index"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 39,
                                "column": 14
                              },
                              "end": {
                                "row": 39,
                                "column": 15
                              },
                              "text": "="
                            },
                            {
                              "type": "call_expression",
                              "start": {
                                "row": 39,
                                "column": 16
                              },
                              "end": {
                                "row": 39,
                                "column": 32
                              },
                              "text": "url.indexOf('#')",
                              "children": [
                                {
                                  "type": "member_expression",
                                  "start": {
                                    "row": 39,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 39,
                                    "column": 27
                                  },
                                  "text": "url.indexOf",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 39,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 19
                                      },
                                      "text": "url"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 39,
                                        "column": 19
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 20
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "property_identifier",
                                      "start": {
                                        "row": 39,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 27
                                      },
                                      "text": "indexOf"
                                    }
                                  ]
                                },
                                {
                                  "type": "arguments",
                                  "start": {
                                    "row": 39,
                                    "column": 27
                                  },
                                  "end": {
                                    "row": 39,
                                    "column": 32
                                  },
                                  "text": "('#')",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 39,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 28
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "string",
                                      "start": {
                                        "row": 39,
                                        "column": 28
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 31
                                      },
                                      "text": "'#'",
                                      "children": [
                                        {
                                          "type": "'",
                                          "start": {
                                            "row": 39,
                                            "column": 28
                                          },
                                          "end": {
                                            "row": 39,
                                            "column": 29
                                          },
                                          "text": "'"
                                        },
                                        {
                                          "type": "string_fragment",
                                          "start": {
                                            "row": 39,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 39,
                                            "column": 30
                                          },
                                          "text": "#"
                                        },
                                        {
                                          "type": "'",
                                          "start": {
                                            "row": 39,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 39,
                                            "column": 31
                                          },
                                          "text": "'"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 39,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 39,
                                        "column": 32
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 39,
                            "column": 32
                          },
                          "end": {
                            "row": 39,
                            "column": 33
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "return_statement",
                      "start": {
                        "row": 40,
                        "column": 4
                      },
                      "end": {
                        "row": 40,
                        "column": 49
                      },
                      "text": "return index === -1 ? '' : url.substr(index);",
                      "children": [
                        {
                          "type": "return",
                          "start": {
                            "row": 40,
                            "column": 4
                          },
                          "end": {
                            "row": 40,
                            "column": 10
                          },
                          "text": "return"
                        },
                        {
                          "type": "ternary_expression",
                          "start": {
                            "row": 40,
                            "column": 11
                          },
                          "end": {
                            "row": 40,
                            "column": 48
                          },
                          "text": "index === -1 ? '' : url.substr(index)",
                          "children": [
                            {
                              "type": "binary_expression",
                              "start": {
                                "row": 40,
                                "column": 11
                              },
                              "end": {
                                "row": 40,
                                "column": 23
                              },
                              "text": "index === -1",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 40,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 16
                                  },
                                  "text": "index"
                                },
                                {
                                  "type": "===",
                                  "start": {
                                    "row": 40,
                                    "column": 17
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 20
                                  },
                                  "text": "==="
                                },
                                {
                                  "type": "unary_expression",
                                  "start": {
                                    "row": 40,
                                    "column": 21
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 23
                                  },
                                  "text": "-1",
                                  "children": [
                                    {
                                      "type": "-",
                                      "start": {
                                        "row": 40,
                                        "column": 21
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 22
                                      },
                                      "text": "-"
                                    },
                                    {
                                      "type": "number",
                                      "start": {
                                        "row": 40,
                                        "column": 22
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 23
                                      },
                                      "text": "1"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "?",
                              "start": {
                                "row": 40,
                                "column": 24
                              },
                              "end": {
                                "row": 40,
                                "column": 25
                              },
                              "text": "?"
                            },
                            {
                              "type": "string",
                              "start": {
                                "row": 40,
                                "column": 26
                              },
                              "end": {
                                "row": 40,
                                "column": 28
                              },
                              "text": "''",
                              "children": [
                                {
                                  "type": "'",
                                  "start": {
                                    "row": 40,
                                    "column": 26
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 27
                                  },
                                  "text": "'"
                                },
                                {
                                  "type": "'",
                                  "start": {
                                    "row": 40,
                                    "column": 27
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 28
                                  },
                                  "text": "'"
                                }
                              ]
                            },
                            {
                              "type": ":",
                              "start": {
                                "row": 40,
                                "column": 29
                              },
                              "end": {
                                "row": 40,
                                "column": 30
                              },
                              "text": ":"
                            },
                            {
                              "type": "call_expression",
                              "start": {
                                "row": 40,
                                "column": 31
                              },
                              "end": {
                                "row": 40,
                                "column": 48
                              },
                              "text": "url.substr(index)",
                              "children": [
                                {
                                  "type": "member_expression",
                                  "start": {
                                    "row": 40,
                                    "column": 31
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 41
                                  },
                                  "text": "url.substr",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 40,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 34
                                      },
                                      "text": "url"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 40,
                                        "column": 34
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 35
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "property_identifier",
                                      "start": {
                                        "row": 40,
                                        "column": 35
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 41
                                      },
                                      "text": "substr"
                                    }
                                  ]
                                },
                                {
                                  "type": "arguments",
                                  "start": {
                                    "row": 40,
                                    "column": 41
                                  },
                                  "end": {
                                    "row": 40,
                                    "column": 48
                                  },
                                  "text": "(index)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 40,
                                        "column": 41
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 42
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 40,
                                        "column": 42
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 47
                                      },
                                      "text": "index"
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 40,
                                        "column": 47
                                      },
                                      "end": {
                                        "row": 40,
                                        "column": 48
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 40,
                            "column": 48
                          },
                          "end": {
                            "row": 40,
                            "column": 49
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "}",
                      "start": {
                        "row": 41,
                        "column": 2
                      },
                      "end": {
                        "row": 41,
                        "column": 3
                      },
                      "text": "}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 43,
                "column": 2
              },
              "end": {
                "row": 48,
                "column": 5
              },
              "text": "/**\n   * @private\n   * Note: this method is used only by scenario runner\n   * TODO(vojta): prefix this method with $$ ?\n   * @param {function()} callback Function that will be called when no outstanding request\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 49,
                "column": 2
              },
              "end": {
                "row": 55,
                "column": 4
              },
              "text": "self.notifyWhenNoOutstandingRequests = function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 49,
                    "column": 2
                  },
                  "end": {
                    "row": 55,
                    "column": 3
                  },
                  "text": "self.notifyWhenNoOutstandingRequests = function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 49,
                        "column": 2
                      },
                      "end": {
                        "row": 49,
                        "column": 38
                      },
                      "text": "self.notifyWhenNoOutstandingRequests",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 49,
                            "column": 2
                          },
                          "end": {
                            "row": 49,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 49,
                            "column": 6
                          },
                          "end": {
                            "row": 49,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 49,
                            "column": 7
                          },
                          "end": {
                            "row": 49,
                            "column": 38
                          },
                          "text": "notifyWhenNoOutstandingRequests"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 49,
                        "column": 39
                      },
                      "end": {
                        "row": 49,
                        "column": 40
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 49,
                        "column": 41
                      },
                      "end": {
                        "row": 55,
                        "column": 3
                      },
                      "text": "function(callback) {\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 49,
                            "column": 41
                          },
                          "end": {
                            "row": 49,
                            "column": 49
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 49,
                            "column": 49
                          },
                          "end": {
                            "row": 49,
                            "column": 59
                          },
                          "text": "(callback)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 49,
                                "column": 49
                              },
                              "end": {
                                "row": 49,
                                "column": 50
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 49,
                                "column": 50
                              },
                              "end": {
                                "row": 49,
                                "column": 58
                              },
                              "text": "callback"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 49,
                                "column": 58
                              },
                              "end": {
                                "row": 49,
                                "column": 59
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 49,
                            "column": 60
                          },
                          "end": {
                            "row": 55,
                            "column": 3
                          },
                          "text": "{\n    if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 49,
                                "column": 60
                              },
                              "end": {
                                "row": 49,
                                "column": 61
                              },
                              "text": "{"
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 50,
                                "column": 4
                              },
                              "end": {
                                "row": 54,
                                "column": 5
                              },
                              "text": "if (outstandingRequestCount === 0) {\n      callback();\n    } else {\n      outstandingRequestCallbacks.push(callback);\n    }",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 50,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 50,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 50,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 50,
                                    "column": 38
                                  },
                                  "text": "(outstandingRequestCount === 0)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 50,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 50,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "binary_expression",
                                      "start": {
                                        "row": 50,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 50,
                                        "column": 37
                                      },
                                      "text": "outstandingRequestCount === 0",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 50,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 31
                                          },
                                          "text": "outstandingRequestCount"
                                        },
                                        {
                                          "type": "===",
                                          "start": {
                                            "row": 50,
                                            "column": 32
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 35
                                          },
                                          "text": "==="
                                        },
                                        {
                                          "type": "number",
                                          "start": {
                                            "row": 50,
                                            "column": 36
                                          },
                                          "end": {
                                            "row": 50,
                                            "column": 37
                                          },
                                          "text": "0"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 50,
                                        "column": 37
                                      },
                                      "end": {
                                        "row": 50,
                                        "column": 38
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "statement_block",
                                  "start": {
                                    "row": 50,
                                    "column": 39
                                  },
                                  "end": {
                                    "row": 52,
                                    "column": 5
                                  },
                                  "text": "{\n      callback();\n    }",
                                  "children": [
                                    {
                                      "type": "{",
                                      "start": {
                                        "row": 50,
                                        "column": 39
                                      },
                                      "end": {
                                        "row": 50,
                                        "column": 40
                                      },
                                      "text": "{"
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 51,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 51,
                                        "column": 17
                                      },
                                      "text": "callback();",
                                      "children": [
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 51,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 51,
                                            "column": 16
                                          },
                                          "text": "callback()",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 51,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 51,
                                                "column": 14
                                              },
                                              "text": "callback"
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 51,
                                                "column": 14
                                              },
                                              "end": {
                                                "row": 51,
                                                "column": 16
                                              },
                                              "text": "()",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 51,
                                                    "column": 14
                                                  },
                                                  "end": {
                                                    "row": 51,
                                                    "column": 15
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 51,
                                                    "column": 15
                                                  },
                                                  "end": {
                                                    "row": 51,
                                                    "column": 16
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 51,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 51,
                                            "column": 17
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "}",
                                      "start": {
                                        "row": 52,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 52,
                                        "column": 5
                                      },
                                      "text": "}"
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 52,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 54,
                                    "column": 5
                                  },
                                  "text": "else {\n      outstandingRequestCallbacks.push(callback);\n    }",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 52,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 52,
                                        "column": 10
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": "statement_block",
                                      "start": {
                                        "row": 52,
                                        "column": 11
                                      },
                                      "end": {
                                        "row": 54,
                                        "column": 5
                                      },
                                      "text": "{\n      outstandingRequestCallbacks.push(callback);\n    }",
                                      "children": [
                                        {
                                          "type": "{",
                                          "start": {
                                            "row": 52,
                                            "column": 11
                                          },
                                          "end": {
                                            "row": 52,
                                            "column": 12
                                          },
                                          "text": "{"
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 53,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 53,
                                            "column": 49
                                          },
                                          "text": "outstandingRequestCallbacks.push(callback);",
                                          "children": [
                                            {
                                              "type": "call_expression",
                                              "start": {
                                                "row": 53,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 53,
                                                "column": 48
                                              },
                                              "text": "outstandingRequestCallbacks.push(callback)",
                                              "children": [
                                                {
                                                  "type": "member_expression",
                                                  "start": {
                                                    "row": 53,
                                                    "column": 6
                                                  },
                                                  "end": {
                                                    "row": 53,
                                                    "column": 38
                                                  },
                                                  "text": "outstandingRequestCallbacks.push",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 6
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 33
                                                      },
                                                      "text": "outstandingRequestCallbacks"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 33
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 34
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "property_identifier",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 34
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 38
                                                      },
                                                      "text": "push"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "arguments",
                                                  "start": {
                                                    "row": 53,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 53,
                                                    "column": 48
                                                  },
                                                  "text": "(callback)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 39
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 39
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 47
                                                      },
                                                      "text": "callback"
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 53,
                                                        "column": 47
                                                      },
                                                      "end": {
                                                        "row": 53,
                                                        "column": 48
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ";",
                                              "start": {
                                                "row": 53,
                                                "column": 48
                                              },
                                              "end": {
                                                "row": 53,
                                                "column": 49
                                              },
                                              "text": ";"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "}",
                                          "start": {
                                            "row": 54,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 54,
                                            "column": 5
                                          },
                                          "text": "}"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 55,
                                "column": 2
                              },
                              "end": {
                                "row": 55,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 55,
                    "column": 3
                  },
                  "end": {
                    "row": 55,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 57,
                "column": 2
              },
              "end": {
                "row": 57,
                "column": 64
              },
              "text": "//////////////////////////////////////////////////////////////"
            },
            {
              "type": "comment",
              "start": {
                "row": 58,
                "column": 2
              },
              "end": {
                "row": 58,
                "column": 12
              },
              "text": "// URL API"
            },
            {
              "type": "comment",
              "start": {
                "row": 59,
                "column": 2
              },
              "end": {
                "row": 59,
                "column": 64
              },
              "text": "//////////////////////////////////////////////////////////////"
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 61,
                "column": 2
              },
              "end": {
                "row": 71,
                "column": 8
              },
              "text": "var cachedState, lastHistoryState,\n      lastBrowserUrl = location.href,\n      baseElement = document.find('base'),\n      pendingLocation = null,\n      getCurrentState = !$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      };",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 61,
                    "column": 2
                  },
                  "end": {
                    "row": 61,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 61,
                    "column": 6
                  },
                  "end": {
                    "row": 61,
                    "column": 17
                  },
                  "text": "cachedState",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 61,
                        "column": 6
                      },
                      "end": {
                        "row": 61,
                        "column": 17
                      },
                      "text": "cachedState"
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 61,
                    "column": 17
                  },
                  "end": {
                    "row": 61,
                    "column": 18
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 61,
                    "column": 19
                  },
                  "end": {
                    "row": 61,
                    "column": 35
                  },
                  "text": "lastHistoryState",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 61,
                        "column": 19
                      },
                      "end": {
                        "row": 61,
                        "column": 35
                      },
                      "text": "lastHistoryState"
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 61,
                    "column": 35
                  },
                  "end": {
                    "row": 61,
                    "column": 36
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 62,
                    "column": 6
                  },
                  "end": {
                    "row": 62,
                    "column": 36
                  },
                  "text": "lastBrowserUrl = location.href",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 62,
                        "column": 6
                      },
                      "end": {
                        "row": 62,
                        "column": 20
                      },
                      "text": "lastBrowserUrl"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 62,
                        "column": 21
                      },
                      "end": {
                        "row": 62,
                        "column": 22
                      },
                      "text": "="
                    },
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 62,
                        "column": 23
                      },
                      "end": {
                        "row": 62,
                        "column": 36
                      },
                      "text": "location.href",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 62,
                            "column": 23
                          },
                          "end": {
                            "row": 62,
                            "column": 31
                          },
                          "text": "location"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 62,
                            "column": 31
                          },
                          "end": {
                            "row": 62,
                            "column": 32
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 62,
                            "column": 32
                          },
                          "end": {
                            "row": 62,
                            "column": 36
                          },
                          "text": "href"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 62,
                    "column": 36
                  },
                  "end": {
                    "row": 62,
                    "column": 37
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 63,
                    "column": 6
                  },
                  "end": {
                    "row": 63,
                    "column": 41
                  },
                  "text": "baseElement = document.find('base')",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 63,
                        "column": 6
                      },
                      "end": {
                        "row": 63,
                        "column": 17
                      },
                      "text": "baseElement"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 63,
                        "column": 18
                      },
                      "end": {
                        "row": 63,
                        "column": 19
                      },
                      "text": "="
                    },
                    {
                      "type": "call_expression",
                      "start": {
                        "row": 63,
                        "column": 20
                      },
                      "end": {
                        "row": 63,
                        "column": 41
                      },
                      "text": "document.find('base')",
                      "children": [
                        {
                          "type": "member_expression",
                          "start": {
                            "row": 63,
                            "column": 20
                          },
                          "end": {
                            "row": 63,
                            "column": 33
                          },
                          "text": "document.find",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 63,
                                "column": 20
                              },
                              "end": {
                                "row": 63,
                                "column": 28
                              },
                              "text": "document"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 63,
                                "column": 28
                              },
                              "end": {
                                "row": 63,
                                "column": 29
                              },
                              "text": "."
                            },
                            {
                              "type": "property_identifier",
                              "start": {
                                "row": 63,
                                "column": 29
                              },
                              "end": {
                                "row": 63,
                                "column": 33
                              },
                              "text": "find"
                            }
                          ]
                        },
                        {
                          "type": "arguments",
                          "start": {
                            "row": 63,
                            "column": 33
                          },
                          "end": {
                            "row": 63,
                            "column": 41
                          },
                          "text": "('base')",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 63,
                                "column": 33
                              },
                              "end": {
                                "row": 63,
                                "column": 34
                              },
                              "text": "("
                            },
                            {
                              "type": "string",
                              "start": {
                                "row": 63,
                                "column": 34
                              },
                              "end": {
                                "row": 63,
                                "column": 40
                              },
                              "text": "'base'",
                              "children": [
                                {
                                  "type": "'",
                                  "start": {
                                    "row": 63,
                                    "column": 34
                                  },
                                  "end": {
                                    "row": 63,
                                    "column": 35
                                  },
                                  "text": "'"
                                },
                                {
                                  "type": "string_fragment",
                                  "start": {
                                    "row": 63,
                                    "column": 35
                                  },
                                  "end": {
                                    "row": 63,
                                    "column": 39
                                  },
                                  "text": "base"
                                },
                                {
                                  "type": "'",
                                  "start": {
                                    "row": 63,
                                    "column": 39
                                  },
                                  "end": {
                                    "row": 63,
                                    "column": 40
                                  },
                                  "text": "'"
                                }
                              ]
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 63,
                                "column": 40
                              },
                              "end": {
                                "row": 63,
                                "column": 41
                              },
                              "text": ")"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 63,
                    "column": 41
                  },
                  "end": {
                    "row": 63,
                    "column": 42
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 64,
                    "column": 6
                  },
                  "end": {
                    "row": 64,
                    "column": 28
                  },
                  "text": "pendingLocation = null",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 64,
                        "column": 6
                      },
                      "end": {
                        "row": 64,
                        "column": 21
                      },
                      "text": "pendingLocation"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 64,
                        "column": 22
                      },
                      "end": {
                        "row": 64,
                        "column": 23
                      },
                      "text": "="
                    },
                    {
                      "type": "null",
                      "start": {
                        "row": 64,
                        "column": 24
                      },
                      "end": {
                        "row": 64,
                        "column": 28
                      },
                      "text": "null"
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 64,
                    "column": 28
                  },
                  "end": {
                    "row": 64,
                    "column": 29
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 65,
                    "column": 6
                  },
                  "end": {
                    "row": 71,
                    "column": 7
                  },
                  "text": "getCurrentState = !$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      }",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 65,
                        "column": 6
                      },
                      "end": {
                        "row": 65,
                        "column": 21
                      },
                      "text": "getCurrentState"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 65,
                        "column": 22
                      },
                      "end": {
                        "row": 65,
                        "column": 23
                      },
                      "text": "="
                    },
                    {
                      "type": "ternary_expression",
                      "start": {
                        "row": 65,
                        "column": 24
                      },
                      "end": {
                        "row": 71,
                        "column": 7
                      },
                      "text": "!$sniffer.history ? noop : function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      }",
                      "children": [
                        {
                          "type": "unary_expression",
                          "start": {
                            "row": 65,
                            "column": 24
                          },
                          "end": {
                            "row": 65,
                            "column": 41
                          },
                          "text": "!$sniffer.history",
                          "children": [
                            {
                              "type": "!",
                              "start": {
                                "row": 65,
                                "column": 24
                              },
                              "end": {
                                "row": 65,
                                "column": 25
                              },
                              "text": "!"
                            },
                            {
                              "type": "member_expression",
                              "start": {
                                "row": 65,
                                "column": 25
                              },
                              "end": {
                                "row": 65,
                                "column": 41
                              },
                              "text": "$sniffer.history",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 65,
                                    "column": 25
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 33
                                  },
                                  "text": "$sniffer"
                                },
                                {
                                  "type": ".",
                                  "start": {
                                    "row": 65,
                                    "column": 33
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 34
                                  },
                                  "text": "."
                                },
                                {
                                  "type": "property_identifier",
                                  "start": {
                                    "row": 65,
                                    "column": 34
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 41
                                  },
                                  "text": "history"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "?",
                          "start": {
                            "row": 65,
                            "column": 42
                          },
                          "end": {
                            "row": 65,
                            "column": 43
                          },
                          "text": "?"
                        },
                        {
                          "type": "identifier",
                          "start": {
                            "row": 65,
                            "column": 44
                          },
                          "end": {
                            "row": 65,
                            "column": 48
                          },
                          "text": "noop"
                        },
                        {
                          "type": ":",
                          "start": {
                            "row": 65,
                            "column": 49
                          },
                          "end": {
                            "row": 65,
                            "column": 50
                          },
                          "text": ":"
                        },
                        {
                          "type": "function",
                          "start": {
                            "row": 65,
                            "column": 51
                          },
                          "end": {
                            "row": 71,
                            "column": 7
                          },
                          "text": "function getCurrentState() {\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      }",
                          "children": [
                            {
                              "type": "function",
                              "start": {
                                "row": 65,
                                "column": 51
                              },
                              "end": {
                                "row": 65,
                                "column": 59
                              },
                              "text": "function"
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 65,
                                "column": 60
                              },
                              "end": {
                                "row": 65,
                                "column": 75
                              },
                              "text": "getCurrentState"
                            },
                            {
                              "type": "formal_parameters",
                              "start": {
                                "row": 65,
                                "column": 75
                              },
                              "end": {
                                "row": 65,
                                "column": 77
                              },
                              "text": "()",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 65,
                                    "column": 75
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 76
                                  },
                                  "text": "("
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 65,
                                    "column": 76
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 77
                                  },
                                  "text": ")"
                                }
                              ]
                            },
                            {
                              "type": "statement_block",
                              "start": {
                                "row": 65,
                                "column": 78
                              },
                              "end": {
                                "row": 71,
                                "column": 7
                              },
                              "text": "{\n        try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }\n      }",
                              "children": [
                                {
                                  "type": "{",
                                  "start": {
                                    "row": 65,
                                    "column": 78
                                  },
                                  "end": {
                                    "row": 65,
                                    "column": 79
                                  },
                                  "text": "{"
                                },
                                {
                                  "type": "try_statement",
                                  "start": {
                                    "row": 66,
                                    "column": 8
                                  },
                                  "end": {
                                    "row": 70,
                                    "column": 9
                                  },
                                  "text": "try {\n          return history.state;\n        } catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }",
                                  "children": [
                                    {
                                      "type": "try",
                                      "start": {
                                        "row": 66,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 66,
                                        "column": 11
                                      },
                                      "text": "try"
                                    },
                                    {
                                      "type": "statement_block",
                                      "start": {
                                        "row": 66,
                                        "column": 12
                                      },
                                      "end": {
                                        "row": 68,
                                        "column": 9
                                      },
                                      "text": "{\n          return history.state;\n        }",
                                      "children": [
                                        {
                                          "type": "{",
                                          "start": {
                                            "row": 66,
                                            "column": 12
                                          },
                                          "end": {
                                            "row": 66,
                                            "column": 13
                                          },
                                          "text": "{"
                                        },
                                        {
                                          "type": "return_statement",
                                          "start": {
                                            "row": 67,
                                            "column": 10
                                          },
                                          "end": {
                                            "row": 67,
                                            "column": 31
                                          },
                                          "text": "return history.state;",
                                          "children": [
                                            {
                                              "type": "return",
                                              "start": {
                                                "row": 67,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 16
                                              },
                                              "text": "return"
                                            },
                                            {
                                              "type": "member_expression",
                                              "start": {
                                                "row": 67,
                                                "column": 17
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 30
                                              },
                                              "text": "history.state",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 17
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 24
                                                  },
                                                  "text": "history"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 25
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "property_identifier",
                                                  "start": {
                                                    "row": 67,
                                                    "column": 25
                                                  },
                                                  "end": {
                                                    "row": 67,
                                                    "column": 30
                                                  },
                                                  "text": "state"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ";",
                                              "start": {
                                                "row": 67,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 67,
                                                "column": 31
                                              },
                                              "text": ";"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "}",
                                          "start": {
                                            "row": 68,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 9
                                          },
                                          "text": "}"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "catch_clause",
                                      "start": {
                                        "row": 68,
                                        "column": 10
                                      },
                                      "end": {
                                        "row": 70,
                                        "column": 9
                                      },
                                      "text": "catch (e) {\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }",
                                      "children": [
                                        {
                                          "type": "catch",
                                          "start": {
                                            "row": 68,
                                            "column": 10
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 15
                                          },
                                          "text": "catch"
                                        },
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 68,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 17
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 68,
                                            "column": 17
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 18
                                          },
                                          "text": "e"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 68,
                                            "column": 18
                                          },
                                          "end": {
                                            "row": 68,
                                            "column": 19
                                          },
                                          "text": ")"
                                        },
                                        {
                                          "type": "statement_block",
                                          "start": {
                                            "row": 68,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 70,
                                            "column": 9
                                          },
                                          "text": "{\n          // MSIE can reportedly throw when there is no state (UNCONFIRMED).\n        }",
                                          "children": [
                                            {
                                              "type": "{",
                                              "start": {
                                                "row": 68,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 68,
                                                "column": 21
                                              },
                                              "text": "{"
                                            },
                                            {
                                              "type": "comment",
                                              "start": {
                                                "row": 69,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 69,
                                                "column": 76
                                              },
                                              "text": "// MSIE can reportedly throw when there is no state (UNCONFIRMED)."
                                            },
                                            {
                                              "type": "}",
                                              "start": {
                                                "row": 70,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 70,
                                                "column": 9
                                              },
                                              "text": "}"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "}",
                                  "start": {
                                    "row": 71,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 71,
                                    "column": 7
                                  },
                                  "text": "}"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 71,
                    "column": 7
                  },
                  "end": {
                    "row": 71,
                    "column": 8
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 73,
                "column": 2
              },
              "end": {
                "row": 73,
                "column": 15
              },
              "text": "cacheState();",
              "children": [
                {
                  "type": "call_expression",
                  "start": {
                    "row": 73,
                    "column": 2
                  },
                  "end": {
                    "row": 73,
                    "column": 14
                  },
                  "text": "cacheState()",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 73,
                        "column": 2
                      },
                      "end": {
                        "row": 73,
                        "column": 12
                      },
                      "text": "cacheState"
                    },
                    {
                      "type": "arguments",
                      "start": {
                        "row": 73,
                        "column": 12
                      },
                      "end": {
                        "row": 73,
                        "column": 14
                      },
                      "text": "()",
                      "children": [
                        {
                          "type": "(",
                          "start": {
                            "row": 73,
                            "column": 12
                          },
                          "end": {
                            "row": 73,
                            "column": 13
                          },
                          "text": "("
                        },
                        {
                          "type": ")",
                          "start": {
                            "row": 73,
                            "column": 13
                          },
                          "end": {
                            "row": 73,
                            "column": 14
                          },
                          "text": ")"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 73,
                    "column": 14
                  },
                  "end": {
                    "row": 73,
                    "column": 15
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 74,
                "column": 2
              },
              "end": {
                "row": 74,
                "column": 33
              },
              "text": "lastHistoryState = cachedState;",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 74,
                    "column": 2
                  },
                  "end": {
                    "row": 74,
                    "column": 32
                  },
                  "text": "lastHistoryState = cachedState",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 74,
                        "column": 2
                      },
                      "end": {
                        "row": 74,
                        "column": 18
                      },
                      "text": "lastHistoryState"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 74,
                        "column": 19
                      },
                      "end": {
                        "row": 74,
                        "column": 20
                      },
                      "text": "="
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 74,
                        "column": 21
                      },
                      "end": {
                        "row": 74,
                        "column": 32
                      },
                      "text": "cachedState"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 74,
                    "column": 32
                  },
                  "end": {
                    "row": 74,
                    "column": 33
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 76,
                "column": 2
              },
              "end": {
                "row": 95,
                "column": 5
              },
              "text": "/**\n   * @name $browser#url\n   *\n   * @description\n   * GETTER:\n   * Without any argument, this method just returns current value of location.href.\n   *\n   * SETTER:\n   * With at least one argument, this method sets url to new value.\n   * If html5 history api supported, pushState/replaceState is used, otherwise\n   * location.href/location.replace is used.\n   * Returns its own instance to allow chaining\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to change url.\n   *\n   * @param {string} url New url (when used as setter)\n   * @param {boolean=} replace Should new url replace current history record?\n   * @param {object=} state object to use with pushState/replaceState\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 96,
                "column": 2
              },
              "end": {
                "row": 154,
                "column": 4
              },
              "text": "self.url = function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 96,
                    "column": 2
                  },
                  "end": {
                    "row": 154,
                    "column": 3
                  },
                  "text": "self.url = function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 96,
                        "column": 2
                      },
                      "end": {
                        "row": 96,
                        "column": 10
                      },
                      "text": "self.url",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 96,
                            "column": 2
                          },
                          "end": {
                            "row": 96,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 96,
                            "column": 6
                          },
                          "end": {
                            "row": 96,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 96,
                            "column": 7
                          },
                          "end": {
                            "row": 96,
                            "column": 10
                          },
                          "text": "url"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 96,
                        "column": 11
                      },
                      "end": {
                        "row": 96,
                        "column": 12
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 96,
                        "column": 13
                      },
                      "end": {
                        "row": 154,
                        "column": 3
                      },
                      "text": "function(url, replace, state) {\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 96,
                            "column": 13
                          },
                          "end": {
                            "row": 96,
                            "column": 21
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 96,
                            "column": 21
                          },
                          "end": {
                            "row": 96,
                            "column": 42
                          },
                          "text": "(url, replace, state)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 96,
                                "column": 21
                              },
                              "end": {
                                "row": 96,
                                "column": 22
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 96,
                                "column": 22
                              },
                              "end": {
                                "row": 96,
                                "column": 25
                              },
                              "text": "url"
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 96,
                                "column": 25
                              },
                              "end": {
                                "row": 96,
                                "column": 26
                              },
                              "text": ","
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 96,
                                "column": 27
                              },
                              "end": {
                                "row": 96,
                                "column": 34
                              },
                              "text": "replace"
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 96,
                                "column": 34
                              },
                              "end": {
                                "row": 96,
                                "column": 35
                              },
                              "text": ","
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 96,
                                "column": 36
                              },
                              "end": {
                                "row": 96,
                                "column": 41
                              },
                              "text": "state"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 96,
                                "column": 41
                              },
                              "end": {
                                "row": 96,
                                "column": 42
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 96,
                            "column": 43
                          },
                          "end": {
                            "row": 154,
                            "column": 3
                          },
                          "text": "{\n    // In modern browsers `history.state` is `null` by default; treating it separately\n    // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n    // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n    if (isUndefined(state)) {\n      state = null;\n    }\n\n    // Android Browser BFCache causes location, history reference to become stale.\n    if (location !== window.location) location = window.location;\n    if (history !== window.history) history = window.history;\n\n    // setter\n    if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 96,
                                "column": 43
                              },
                              "end": {
                                "row": 96,
                                "column": 44
                              },
                              "text": "{"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 97,
                                "column": 4
                              },
                              "end": {
                                "row": 97,
                                "column": 86
                              },
                              "text": "// In modern browsers `history.state` is `null` by default; treating it separately"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 98,
                                "column": 4
                              },
                              "end": {
                                "row": 98,
                                "column": 84
                              },
                              "text": "// from `undefined` would cause `$browser.url('/foo')` to change `history.state`"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 99,
                                "column": 4
                              },
                              "end": {
                                "row": 99,
                                "column": 86
                              },
                              "text": "// to undefined via `pushState`. Instead, let's change `undefined` to `null` here."
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 100,
                                "column": 4
                              },
                              "end": {
                                "row": 102,
                                "column": 5
                              },
                              "text": "if (isUndefined(state)) {\n      state = null;\n    }",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 100,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 100,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 100,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 100,
                                    "column": 27
                                  },
                                  "text": "(isUndefined(state))",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 100,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 100,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "call_expression",
                                      "start": {
                                        "row": 100,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 100,
                                        "column": 26
                                      },
                                      "text": "isUndefined(state)",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 100,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 100,
                                            "column": 19
                                          },
                                          "text": "isUndefined"
                                        },
                                        {
                                          "type": "arguments",
                                          "start": {
                                            "row": 100,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 100,
                                            "column": 26
                                          },
                                          "text": "(state)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 100,
                                                "column": 19
                                              },
                                              "end": {
                                                "row": 100,
                                                "column": 20
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 100,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 100,
                                                "column": 25
                                              },
                                              "text": "state"
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 100,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 100,
                                                "column": 26
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 100,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 100,
                                        "column": 27
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "statement_block",
                                  "start": {
                                    "row": 100,
                                    "column": 28
                                  },
                                  "end": {
                                    "row": 102,
                                    "column": 5
                                  },
                                  "text": "{\n      state = null;\n    }",
                                  "children": [
                                    {
                                      "type": "{",
                                      "start": {
                                        "row": 100,
                                        "column": 28
                                      },
                                      "end": {
                                        "row": 100,
                                        "column": 29
                                      },
                                      "text": "{"
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 101,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 101,
                                        "column": 19
                                      },
                                      "text": "state = null;",
                                      "children": [
                                        {
                                          "type": "assignment_expression",
                                          "start": {
                                            "row": 101,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 101,
                                            "column": 18
                                          },
                                          "text": "state = null",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 101,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 101,
                                                "column": 11
                                              },
                                              "text": "state"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 101,
                                                "column": 12
                                              },
                                              "end": {
                                                "row": 101,
                                                "column": 13
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "null",
                                              "start": {
                                                "row": 101,
                                                "column": 14
                                              },
                                              "end": {
                                                "row": 101,
                                                "column": 18
                                              },
                                              "text": "null"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 101,
                                            "column": 18
                                          },
                                          "end": {
                                            "row": 101,
                                            "column": 19
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "}",
                                      "start": {
                                        "row": 102,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 102,
                                        "column": 5
                                      },
                                      "text": "}"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 104,
                                "column": 4
                              },
                              "end": {
                                "row": 104,
                                "column": 82
                              },
                              "text": "// Android Browser BFCache causes location, history reference to become stale."
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 105,
                                "column": 4
                              },
                              "end": {
                                "row": 105,
                                "column": 65
                              },
                              "text": "if (location !== window.location) location = window.location;",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 105,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 105,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 105,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 105,
                                    "column": 37
                                  },
                                  "text": "(location !== window.location)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 105,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 105,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "binary_expression",
                                      "start": {
                                        "row": 105,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 105,
                                        "column": 36
                                      },
                                      "text": "location !== window.location",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 105,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 16
                                          },
                                          "text": "location"
                                        },
                                        {
                                          "type": "!==",
                                          "start": {
                                            "row": 105,
                                            "column": 17
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 20
                                          },
                                          "text": "!=="
                                        },
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 105,
                                            "column": 21
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 36
                                          },
                                          "text": "window.location",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 105,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 27
                                              },
                                              "text": "window"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 105,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 28
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 105,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 36
                                              },
                                              "text": "location"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 105,
                                        "column": 36
                                      },
                                      "end": {
                                        "row": 105,
                                        "column": 37
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "expression_statement",
                                  "start": {
                                    "row": 105,
                                    "column": 38
                                  },
                                  "end": {
                                    "row": 105,
                                    "column": 65
                                  },
                                  "text": "location = window.location;",
                                  "children": [
                                    {
                                      "type": "assignment_expression",
                                      "start": {
                                        "row": 105,
                                        "column": 38
                                      },
                                      "end": {
                                        "row": 105,
                                        "column": 64
                                      },
                                      "text": "location = window.location",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 105,
                                            "column": 38
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 46
                                          },
                                          "text": "location"
                                        },
                                        {
                                          "type": "=",
                                          "start": {
                                            "row": 105,
                                            "column": 47
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 48
                                          },
                                          "text": "="
                                        },
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 105,
                                            "column": 49
                                          },
                                          "end": {
                                            "row": 105,
                                            "column": 64
                                          },
                                          "text": "window.location",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 105,
                                                "column": 49
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 55
                                              },
                                              "text": "window"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 105,
                                                "column": 55
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 56
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 105,
                                                "column": 56
                                              },
                                              "end": {
                                                "row": 105,
                                                "column": 64
                                              },
                                              "text": "location"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ";",
                                      "start": {
                                        "row": 105,
                                        "column": 64
                                      },
                                      "end": {
                                        "row": 105,
                                        "column": 65
                                      },
                                      "text": ";"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 106,
                                "column": 4
                              },
                              "end": {
                                "row": 106,
                                "column": 61
                              },
                              "text": "if (history !== window.history) history = window.history;",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 106,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 106,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 106,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 106,
                                    "column": 35
                                  },
                                  "text": "(history !== window.history)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 106,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "binary_expression",
                                      "start": {
                                        "row": 106,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 34
                                      },
                                      "text": "history !== window.history",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 106,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 15
                                          },
                                          "text": "history"
                                        },
                                        {
                                          "type": "!==",
                                          "start": {
                                            "row": 106,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 19
                                          },
                                          "text": "!=="
                                        },
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 106,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 34
                                          },
                                          "text": "window.history",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 106,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 26
                                              },
                                              "text": "window"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 106,
                                                "column": 26
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 27
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 106,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 34
                                              },
                                              "text": "history"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 106,
                                        "column": 34
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 35
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "expression_statement",
                                  "start": {
                                    "row": 106,
                                    "column": 36
                                  },
                                  "end": {
                                    "row": 106,
                                    "column": 61
                                  },
                                  "text": "history = window.history;",
                                  "children": [
                                    {
                                      "type": "assignment_expression",
                                      "start": {
                                        "row": 106,
                                        "column": 36
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 60
                                      },
                                      "text": "history = window.history",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 106,
                                            "column": 36
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 43
                                          },
                                          "text": "history"
                                        },
                                        {
                                          "type": "=",
                                          "start": {
                                            "row": 106,
                                            "column": 44
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 45
                                          },
                                          "text": "="
                                        },
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 106,
                                            "column": 46
                                          },
                                          "end": {
                                            "row": 106,
                                            "column": 60
                                          },
                                          "text": "window.history",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 106,
                                                "column": 46
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 52
                                              },
                                              "text": "window"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 106,
                                                "column": 52
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 53
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 106,
                                                "column": 53
                                              },
                                              "end": {
                                                "row": 106,
                                                "column": 60
                                              },
                                              "text": "history"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ";",
                                      "start": {
                                        "row": 106,
                                        "column": 60
                                      },
                                      "end": {
                                        "row": 106,
                                        "column": 61
                                      },
                                      "text": ";"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 108,
                                "column": 4
                              },
                              "end": {
                                "row": 108,
                                "column": 13
                              },
                              "text": "// setter"
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 109,
                                "column": 4
                              },
                              "end": {
                                "row": 153,
                                "column": 5
                              },
                              "text": "if (url) {\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    } else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 109,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 109,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 109,
                                    "column": 12
                                  },
                                  "text": "(url)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 109,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 109,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 109,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 109,
                                        "column": 11
                                      },
                                      "text": "url"
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 109,
                                        "column": 11
                                      },
                                      "end": {
                                        "row": 109,
                                        "column": 12
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "statement_block",
                                  "start": {
                                    "row": 109,
                                    "column": 13
                                  },
                                  "end": {
                                    "row": 147,
                                    "column": 5
                                  },
                                  "text": "{\n      var sameState = lastHistoryState === state;\n\n      // Don't change anything if previous and current URLs and states match. This also prevents\n      // IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode.\n      // See https://github.com/angular/angular.js/commit/ffb2701\n      if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }\n      var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);\n      lastBrowserUrl = url;\n      lastHistoryState = state;\n      // Don't use history API if only the hash changed\n      // due to a bug in IE10/IE11 which leads\n      // to not firing a `hashchange` nor `popstate` event\n      // in some cases (see #9143).\n      if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }\n      return self;\n    // getter\n    }",
                                  "children": [
                                    {
                                      "type": "{",
                                      "start": {
                                        "row": 109,
                                        "column": 13
                                      },
                                      "end": {
                                        "row": 109,
                                        "column": 14
                                      },
                                      "text": "{"
                                    },
                                    {
                                      "type": "variable_declaration",
                                      "start": {
                                        "row": 110,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 110,
                                        "column": 49
                                      },
                                      "text": "var sameState = lastHistoryState === state;",
                                      "children": [
                                        {
                                          "type": "var",
                                          "start": {
                                            "row": 110,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 9
                                          },
                                          "text": "var"
                                        },
                                        {
                                          "type": "variable_declarator",
                                          "start": {
                                            "row": 110,
                                            "column": 10
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 48
                                          },
                                          "text": "sameState = lastHistoryState === state",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 110,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 110,
                                                "column": 19
                                              },
                                              "text": "sameState"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 110,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 110,
                                                "column": 21
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 110,
                                                "column": 22
                                              },
                                              "end": {
                                                "row": 110,
                                                "column": 48
                                              },
                                              "text": "lastHistoryState === state",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 110,
                                                    "column": 22
                                                  },
                                                  "end": {
                                                    "row": 110,
                                                    "column": 38
                                                  },
                                                  "text": "lastHistoryState"
                                                },
                                                {
                                                  "type": "===",
                                                  "start": {
                                                    "row": 110,
                                                    "column": 39
                                                  },
                                                  "end": {
                                                    "row": 110,
                                                    "column": 42
                                                  },
                                                  "text": "==="
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 110,
                                                    "column": 43
                                                  },
                                                  "end": {
                                                    "row": 110,
                                                    "column": 48
                                                  },
                                                  "text": "state"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 110,
                                            "column": 48
                                          },
                                          "end": {
                                            "row": 110,
                                            "column": 49
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 112,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 112,
                                        "column": 96
                                      },
                                      "text": "// Don't change anything if previous and current URLs and states match. This also prevents"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 113,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 113,
                                        "column": 87
                                      },
                                      "text": "// IE<10 from getting into redirect loop when in LocationHashbangInHtml5Url mode."
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 114,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 114,
                                        "column": 65
                                      },
                                      "text": "// See https://github.com/angular/angular.js/commit/ffb2701"
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 115,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 117,
                                        "column": 7
                                      },
                                      "text": "if (lastBrowserUrl === url && (!$sniffer.history || sameState)) {\n        return self;\n      }",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 115,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 115,
                                            "column": 8
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "parenthesized_expression",
                                          "start": {
                                            "row": 115,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 115,
                                            "column": 69
                                          },
                                          "text": "(lastBrowserUrl === url && (!$sniffer.history || sameState))",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 115,
                                                "column": 9
                                              },
                                              "end": {
                                                "row": 115,
                                                "column": 10
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 115,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 115,
                                                "column": 68
                                              },
                                              "text": "lastBrowserUrl === url && (!$sniffer.history || sameState)",
                                              "children": [
                                                {
                                                  "type": "binary_expression",
                                                  "start": {
                                                    "row": 115,
                                                    "column": 10
                                                  },
                                                  "end": {
                                                    "row": 115,
                                                    "column": 32
                                                  },
                                                  "text": "lastBrowserUrl === url",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 10
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 24
                                                      },
                                                      "text": "lastBrowserUrl"
                                                    },
                                                    {
                                                      "type": "===",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 28
                                                      },
                                                      "text": "==="
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 29
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 32
                                                      },
                                                      "text": "url"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&&",
                                                  "start": {
                                                    "row": 115,
                                                    "column": 33
                                                  },
                                                  "end": {
                                                    "row": 115,
                                                    "column": 35
                                                  },
                                                  "text": "&&"
                                                },
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 115,
                                                    "column": 36
                                                  },
                                                  "end": {
                                                    "row": 115,
                                                    "column": 68
                                                  },
                                                  "text": "(!$sniffer.history || sameState)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 36
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 37
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_expression",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 37
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 67
                                                      },
                                                      "text": "!$sniffer.history || sameState",
                                                      "children": [
                                                        {
                                                          "type": "unary_expression",
                                                          "start": {
                                                            "row": 115,
                                                            "column": 37
                                                          },
                                                          "end": {
                                                            "row": 115,
                                                            "column": 54
                                                          },
                                                          "text": "!$sniffer.history",
                                                          "children": [
                                                            {
                                                              "type": "!",
                                                              "start": {
                                                                "row": 115,
                                                                "column": 37
                                                              },
                                                              "end": {
                                                                "row": 115,
                                                                "column": 38
                                                              },
                                                              "text": "!"
                                                            },
                                                            {
                                                              "type": "member_expression",
                                                              "start": {
                                                                "row": 115,
                                                                "column": 38
                                                              },
                                                              "end": {
                                                                "row": 115,
                                                                "column": 54
                                                              },
                                                              "text": "$sniffer.history",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 115,
                                                                    "column": 38
                                                                  },
                                                                  "end": {
                                                                    "row": 115,
                                                                    "column": 46
                                                                  },
                                                                  "text": "$sniffer"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 115,
                                                                    "column": 46
                                                                  },
                                                                  "end": {
                                                                    "row": 115,
                                                                    "column": 47
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "property_identifier",
                                                                  "start": {
                                                                    "row": 115,
                                                                    "column": 47
                                                                  },
                                                                  "end": {
                                                                    "row": 115,
                                                                    "column": 54
                                                                  },
                                                                  "text": "history"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "||",
                                                          "start": {
                                                            "row": 115,
                                                            "column": 55
                                                          },
                                                          "end": {
                                                            "row": 115,
                                                            "column": 57
                                                          },
                                                          "text": "||"
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 115,
                                                            "column": 58
                                                          },
                                                          "end": {
                                                            "row": 115,
                                                            "column": 67
                                                          },
                                                          "text": "sameState"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 115,
                                                        "column": 67
                                                      },
                                                      "end": {
                                                        "row": 115,
                                                        "column": 68
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 115,
                                                "column": 68
                                              },
                                              "end": {
                                                "row": 115,
                                                "column": 69
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "statement_block",
                                          "start": {
                                            "row": 115,
                                            "column": 70
                                          },
                                          "end": {
                                            "row": 117,
                                            "column": 7
                                          },
                                          "text": "{\n        return self;\n      }",
                                          "children": [
                                            {
                                              "type": "{",
                                              "start": {
                                                "row": 115,
                                                "column": 70
                                              },
                                              "end": {
                                                "row": 115,
                                                "column": 71
                                              },
                                              "text": "{"
                                            },
                                            {
                                              "type": "return_statement",
                                              "start": {
                                                "row": 116,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 116,
                                                "column": 20
                                              },
                                              "text": "return self;",
                                              "children": [
                                                {
                                                  "type": "return",
                                                  "start": {
                                                    "row": 116,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 116,
                                                    "column": 14
                                                  },
                                                  "text": "return"
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 116,
                                                    "column": 15
                                                  },
                                                  "end": {
                                                    "row": 116,
                                                    "column": 19
                                                  },
                                                  "text": "self"
                                                },
                                                {
                                                  "type": ";",
                                                  "start": {
                                                    "row": 116,
                                                    "column": 19
                                                  },
                                                  "end": {
                                                    "row": 116,
                                                    "column": 20
                                                  },
                                                  "text": ";"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "}",
                                              "start": {
                                                "row": 117,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 117,
                                                "column": 7
                                              },
                                              "text": "}"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "variable_declaration",
                                      "start": {
                                        "row": 118,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 118,
                                        "column": 84
                                      },
                                      "text": "var sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url);",
                                      "children": [
                                        {
                                          "type": "var",
                                          "start": {
                                            "row": 118,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 9
                                          },
                                          "text": "var"
                                        },
                                        {
                                          "type": "variable_declarator",
                                          "start": {
                                            "row": 118,
                                            "column": 10
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 83
                                          },
                                          "text": "sameBase = lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url)",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 118,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 118,
                                                "column": 18
                                              },
                                              "text": "sameBase"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 118,
                                                "column": 19
                                              },
                                              "end": {
                                                "row": 118,
                                                "column": 20
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 118,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 118,
                                                "column": 83
                                              },
                                              "text": "lastBrowserUrl && stripHash(lastBrowserUrl) === stripHash(url)",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 118,
                                                    "column": 21
                                                  },
                                                  "end": {
                                                    "row": 118,
                                                    "column": 35
                                                  },
                                                  "text": "lastBrowserUrl"
                                                },
                                                {
                                                  "type": "&&",
                                                  "start": {
                                                    "row": 118,
                                                    "column": 36
                                                  },
                                                  "end": {
                                                    "row": 118,
                                                    "column": 38
                                                  },
                                                  "text": "&&"
                                                },
                                                {
                                                  "type": "binary_expression",
                                                  "start": {
                                                    "row": 118,
                                                    "column": 39
                                                  },
                                                  "end": {
                                                    "row": 118,
                                                    "column": 83
                                                  },
                                                  "text": "stripHash(lastBrowserUrl) === stripHash(url)",
                                                  "children": [
                                                    {
                                                      "type": "call_expression",
                                                      "start": {
                                                        "row": 118,
                                                        "column": 39
                                                      },
                                                      "end": {
                                                        "row": 118,
                                                        "column": 64
                                                      },
                                                      "text": "stripHash(lastBrowserUrl)",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 118,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 118,
                                                            "column": 48
                                                          },
                                                          "text": "stripHash"
                                                        },
                                                        {
                                                          "type": "arguments",
                                                          "start": {
                                                            "row": 118,
                                                            "column": 48
                                                          },
                                                          "end": {
                                                            "row": 118,
                                                            "column": 64
                                                          },
                                                          "text": "(lastBrowserUrl)",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 48
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 49
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 49
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 63
                                                              },
                                                              "text": "lastBrowserUrl"
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 63
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 64
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "===",
                                                      "start": {
                                                        "row": 118,
                                                        "column": 65
                                                      },
                                                      "end": {
                                                        "row": 118,
                                                        "column": 68
                                                      },
                                                      "text": "==="
                                                    },
                                                    {
                                                      "type": "call_expression",
                                                      "start": {
                                                        "row": 118,
                                                        "column": 69
                                                      },
                                                      "end": {
                                                        "row": 118,
                                                        "column": 83
                                                      },
                                                      "text": "stripHash(url)",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 118,
                                                            "column": 69
                                                          },
                                                          "end": {
                                                            "row": 118,
                                                            "column": 78
                                                          },
                                                          "text": "stripHash"
                                                        },
                                                        {
                                                          "type": "arguments",
                                                          "start": {
                                                            "row": 118,
                                                            "column": 78
                                                          },
                                                          "end": {
                                                            "row": 118,
                                                            "column": 83
                                                          },
                                                          "text": "(url)",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 78
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 79
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 79
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 82
                                                              },
                                                              "text": "url"
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 118,
                                                                "column": 82
                                                              },
                                                              "end": {
                                                                "row": 118,
                                                                "column": 83
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 118,
                                            "column": 83
                                          },
                                          "end": {
                                            "row": 118,
                                            "column": 84
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 119,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 119,
                                        "column": 27
                                      },
                                      "text": "lastBrowserUrl = url;",
                                      "children": [
                                        {
                                          "type": "assignment_expression",
                                          "start": {
                                            "row": 119,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 119,
                                            "column": 26
                                          },
                                          "text": "lastBrowserUrl = url",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 119,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 119,
                                                "column": 20
                                              },
                                              "text": "lastBrowserUrl"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 119,
                                                "column": 21
                                              },
                                              "end": {
                                                "row": 119,
                                                "column": 22
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 119,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 119,
                                                "column": 26
                                              },
                                              "text": "url"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 119,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 119,
                                            "column": 27
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 120,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 120,
                                        "column": 31
                                      },
                                      "text": "lastHistoryState = state;",
                                      "children": [
                                        {
                                          "type": "assignment_expression",
                                          "start": {
                                            "row": 120,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 120,
                                            "column": 30
                                          },
                                          "text": "lastHistoryState = state",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 120,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 120,
                                                "column": 22
                                              },
                                              "text": "lastHistoryState"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 120,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 120,
                                                "column": 24
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 120,
                                                "column": 25
                                              },
                                              "end": {
                                                "row": 120,
                                                "column": 30
                                              },
                                              "text": "state"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 120,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 120,
                                            "column": 31
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 121,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 121,
                                        "column": 55
                                      },
                                      "text": "// Don't use history API if only the hash changed"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 122,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 122,
                                        "column": 46
                                      },
                                      "text": "// due to a bug in IE10/IE11 which leads"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 123,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 123,
                                        "column": 58
                                      },
                                      "text": "// to not firing a `hashchange` nor `popstate` event"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 124,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 124,
                                        "column": 35
                                      },
                                      "text": "// in some cases (see #9143)."
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 125,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 144,
                                        "column": 7
                                      },
                                      "text": "if ($sniffer.history && (!sameBase || !sameState)) {\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      } else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 125,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 125,
                                            "column": 8
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "parenthesized_expression",
                                          "start": {
                                            "row": 125,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 125,
                                            "column": 56
                                          },
                                          "text": "($sniffer.history && (!sameBase || !sameState))",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 125,
                                                "column": 9
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 10
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 125,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 55
                                              },
                                              "text": "$sniffer.history && (!sameBase || !sameState)",
                                              "children": [
                                                {
                                                  "type": "member_expression",
                                                  "start": {
                                                    "row": 125,
                                                    "column": 10
                                                  },
                                                  "end": {
                                                    "row": 125,
                                                    "column": 26
                                                  },
                                                  "text": "$sniffer.history",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 10
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 18
                                                      },
                                                      "text": "$sniffer"
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 18
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 19
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "property_identifier",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 19
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 26
                                                      },
                                                      "text": "history"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "&&",
                                                  "start": {
                                                    "row": 125,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 125,
                                                    "column": 29
                                                  },
                                                  "text": "&&"
                                                },
                                                {
                                                  "type": "parenthesized_expression",
                                                  "start": {
                                                    "row": 125,
                                                    "column": 30
                                                  },
                                                  "end": {
                                                    "row": 125,
                                                    "column": 55
                                                  },
                                                  "text": "(!sameBase || !sameState)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 30
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 31
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "binary_expression",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 31
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 54
                                                      },
                                                      "text": "!sameBase || !sameState",
                                                      "children": [
                                                        {
                                                          "type": "unary_expression",
                                                          "start": {
                                                            "row": 125,
                                                            "column": 31
                                                          },
                                                          "end": {
                                                            "row": 125,
                                                            "column": 40
                                                          },
                                                          "text": "!sameBase",
                                                          "children": [
                                                            {
                                                              "type": "!",
                                                              "start": {
                                                                "row": 125,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 125,
                                                                "column": 32
                                                              },
                                                              "text": "!"
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 125,
                                                                "column": 32
                                                              },
                                                              "end": {
                                                                "row": 125,
                                                                "column": 40
                                                              },
                                                              "text": "sameBase"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "||",
                                                          "start": {
                                                            "row": 125,
                                                            "column": 41
                                                          },
                                                          "end": {
                                                            "row": 125,
                                                            "column": 43
                                                          },
                                                          "text": "||"
                                                        },
                                                        {
                                                          "type": "unary_expression",
                                                          "start": {
                                                            "row": 125,
                                                            "column": 44
                                                          },
                                                          "end": {
                                                            "row": 125,
                                                            "column": 54
                                                          },
                                                          "text": "!sameState",
                                                          "children": [
                                                            {
                                                              "type": "!",
                                                              "start": {
                                                                "row": 125,
                                                                "column": 44
                                                              },
                                                              "end": {
                                                                "row": 125,
                                                                "column": 45
                                                              },
                                                              "text": "!"
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 125,
                                                                "column": 45
                                                              },
                                                              "end": {
                                                                "row": 125,
                                                                "column": 54
                                                              },
                                                              "text": "sameState"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 125,
                                                        "column": 54
                                                      },
                                                      "end": {
                                                        "row": 125,
                                                        "column": 55
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 125,
                                                "column": 55
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 56
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "statement_block",
                                          "start": {
                                            "row": 125,
                                            "column": 57
                                          },
                                          "end": {
                                            "row": 130,
                                            "column": 7
                                          },
                                          "text": "{\n        history[replace ? 'replaceState' : 'pushState'](state, '', url);\n        cacheState();\n        // Do the assignment again so that those two variables are referentially identical.\n        lastHistoryState = cachedState;\n      }",
                                          "children": [
                                            {
                                              "type": "{",
                                              "start": {
                                                "row": 125,
                                                "column": 57
                                              },
                                              "end": {
                                                "row": 125,
                                                "column": 58
                                              },
                                              "text": "{"
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 126,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 126,
                                                "column": 72
                                              },
                                              "text": "history[replace ? 'replaceState' : 'pushState'](state, '', url);",
                                              "children": [
                                                {
                                                  "type": "call_expression",
                                                  "start": {
                                                    "row": 126,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 126,
                                                    "column": 71
                                                  },
                                                  "text": "history[replace ? 'replaceState' : 'pushState'](state, '', url)",
                                                  "children": [
                                                    {
                                                      "type": "subscript_expression",
                                                      "start": {
                                                        "row": 126,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 126,
                                                        "column": 55
                                                      },
                                                      "text": "history[replace ? 'replaceState' : 'pushState']",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 8
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 15
                                                          },
                                                          "text": "history"
                                                        },
                                                        {
                                                          "type": "[",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 15
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 16
                                                          },
                                                          "text": "["
                                                        },
                                                        {
                                                          "type": "ternary_expression",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 16
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 54
                                                          },
                                                          "text": "replace ? 'replaceState' : 'pushState'",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 16
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 23
                                                              },
                                                              "text": "replace"
                                                            },
                                                            {
                                                              "type": "?",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 24
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 25
                                                              },
                                                              "text": "?"
                                                            },
                                                            {
                                                              "type": "string",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 26
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 40
                                                              },
                                                              "text": "'replaceState'",
                                                              "children": [
                                                                {
                                                                  "type": "'",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 26
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 27
                                                                  },
                                                                  "text": "'"
                                                                },
                                                                {
                                                                  "type": "string_fragment",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 27
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 39
                                                                  },
                                                                  "text": "replaceState"
                                                                },
                                                                {
                                                                  "type": "'",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 39
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 40
                                                                  },
                                                                  "text": "'"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ":",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 41
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 42
                                                              },
                                                              "text": ":"
                                                            },
                                                            {
                                                              "type": "string",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 43
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 54
                                                              },
                                                              "text": "'pushState'",
                                                              "children": [
                                                                {
                                                                  "type": "'",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 43
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 44
                                                                  },
                                                                  "text": "'"
                                                                },
                                                                {
                                                                  "type": "string_fragment",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 44
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 53
                                                                  },
                                                                  "text": "pushState"
                                                                },
                                                                {
                                                                  "type": "'",
                                                                  "start": {
                                                                    "row": 126,
                                                                    "column": 53
                                                                  },
                                                                  "end": {
                                                                    "row": 126,
                                                                    "column": 54
                                                                  },
                                                                  "text": "'"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "]",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 54
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 55
                                                          },
                                                          "text": "]"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "arguments",
                                                      "start": {
                                                        "row": 126,
                                                        "column": 55
                                                      },
                                                      "end": {
                                                        "row": 126,
                                                        "column": 71
                                                      },
                                                      "text": "(state, '', url)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 55
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 56
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 56
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 61
                                                          },
                                                          "text": "state"
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 61
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 62
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "string",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 63
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 65
                                                          },
                                                          "text": "''",
                                                          "children": [
                                                            {
                                                              "type": "'",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 63
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 64
                                                              },
                                                              "text": "'"
                                                            },
                                                            {
                                                              "type": "'",
                                                              "start": {
                                                                "row": 126,
                                                                "column": 64
                                                              },
                                                              "end": {
                                                                "row": 126,
                                                                "column": 65
                                                              },
                                                              "text": "'"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 65
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 66
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 67
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 70
                                                          },
                                                          "text": "url"
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 126,
                                                            "column": 70
                                                          },
                                                          "end": {
                                                            "row": 126,
                                                            "column": 71
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ";",
                                                  "start": {
                                                    "row": 126,
                                                    "column": 71
                                                  },
                                                  "end": {
                                                    "row": 126,
                                                    "column": 72
                                                  },
                                                  "text": ";"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 127,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 127,
                                                "column": 21
                                              },
                                              "text": "cacheState();",
                                              "children": [
                                                {
                                                  "type": "call_expression",
                                                  "start": {
                                                    "row": 127,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 127,
                                                    "column": 20
                                                  },
                                                  "text": "cacheState()",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 127,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 127,
                                                        "column": 18
                                                      },
                                                      "text": "cacheState"
                                                    },
                                                    {
                                                      "type": "arguments",
                                                      "start": {
                                                        "row": 127,
                                                        "column": 18
                                                      },
                                                      "end": {
                                                        "row": 127,
                                                        "column": 20
                                                      },
                                                      "text": "()",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 127,
                                                            "column": 18
                                                          },
                                                          "end": {
                                                            "row": 127,
                                                            "column": 19
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 127,
                                                            "column": 19
                                                          },
                                                          "end": {
                                                            "row": 127,
                                                            "column": 20
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ";",
                                                  "start": {
                                                    "row": 127,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 127,
                                                    "column": 21
                                                  },
                                                  "text": ";"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "comment",
                                              "start": {
                                                "row": 128,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 128,
                                                "column": 91
                                              },
                                              "text": "// Do the assignment again so that those two variables are referentially identical."
                                            },
                                            {
                                              "type": "expression_statement",
                                              "start": {
                                                "row": 129,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 129,
                                                "column": 39
                                              },
                                              "text": "lastHistoryState = cachedState;",
                                              "children": [
                                                {
                                                  "type": "assignment_expression",
                                                  "start": {
                                                    "row": 129,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 129,
                                                    "column": 38
                                                  },
                                                  "text": "lastHistoryState = cachedState",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 24
                                                      },
                                                      "text": "lastHistoryState"
                                                    },
                                                    {
                                                      "type": "=",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 26
                                                      },
                                                      "text": "="
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 129,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 129,
                                                        "column": 38
                                                      },
                                                      "text": "cachedState"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ";",
                                                  "start": {
                                                    "row": 129,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 129,
                                                    "column": 39
                                                  },
                                                  "text": ";"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "}",
                                              "start": {
                                                "row": 130,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 130,
                                                "column": 7
                                              },
                                              "text": "}"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "else_clause",
                                          "start": {
                                            "row": 130,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 144,
                                            "column": 7
                                          },
                                          "text": "else {\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }",
                                          "children": [
                                            {
                                              "type": "else",
                                              "start": {
                                                "row": 130,
                                                "column": 8
                                              },
                                              "end": {
                                                "row": 130,
                                                "column": 12
                                              },
                                              "text": "else"
                                            },
                                            {
                                              "type": "statement_block",
                                              "start": {
                                                "row": 130,
                                                "column": 13
                                              },
                                              "end": {
                                                "row": 144,
                                                "column": 7
                                              },
                                              "text": "{\n        if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }\n        if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }\n        if (location.href !== url) {\n          pendingLocation = url;\n        }\n      }",
                                              "children": [
                                                {
                                                  "type": "{",
                                                  "start": {
                                                    "row": 130,
                                                    "column": 13
                                                  },
                                                  "end": {
                                                    "row": 130,
                                                    "column": 14
                                                  },
                                                  "text": "{"
                                                },
                                                {
                                                  "type": "if_statement",
                                                  "start": {
                                                    "row": 131,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 133,
                                                    "column": 9
                                                  },
                                                  "text": "if (!sameBase || pendingLocation) {\n          pendingLocation = url;\n        }",
                                                  "children": [
                                                    {
                                                      "type": "if",
                                                      "start": {
                                                        "row": 131,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 131,
                                                        "column": 10
                                                      },
                                                      "text": "if"
                                                    },
                                                    {
                                                      "type": "parenthesized_expression",
                                                      "start": {
                                                        "row": 131,
                                                        "column": 11
                                                      },
                                                      "end": {
                                                        "row": 131,
                                                        "column": 41
                                                      },
                                                      "text": "(!sameBase || pendingLocation)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 131,
                                                            "column": 11
                                                          },
                                                          "end": {
                                                            "row": 131,
                                                            "column": 12
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "binary_expression",
                                                          "start": {
                                                            "row": 131,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 131,
                                                            "column": 40
                                                          },
                                                          "text": "!sameBase || pendingLocation",
                                                          "children": [
                                                            {
                                                              "type": "unary_expression",
                                                              "start": {
                                                                "row": 131,
                                                                "column": 12
                                                              },
                                                              "end": {
                                                                "row": 131,
                                                                "column": 21
                                                              },
                                                              "text": "!sameBase",
                                                              "children": [
                                                                {
                                                                  "type": "!",
                                                                  "start": {
                                                                    "row": 131,
                                                                    "column": 12
                                                                  },
                                                                  "end": {
                                                                    "row": 131,
                                                                    "column": 13
                                                                  },
                                                                  "text": "!"
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 131,
                                                                    "column": 13
                                                                  },
                                                                  "end": {
                                                                    "row": 131,
                                                                    "column": 21
                                                                  },
                                                                  "text": "sameBase"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "||",
                                                              "start": {
                                                                "row": 131,
                                                                "column": 22
                                                              },
                                                              "end": {
                                                                "row": 131,
                                                                "column": 24
                                                              },
                                                              "text": "||"
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 131,
                                                                "column": 25
                                                              },
                                                              "end": {
                                                                "row": 131,
                                                                "column": 40
                                                              },
                                                              "text": "pendingLocation"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 131,
                                                            "column": 40
                                                          },
                                                          "end": {
                                                            "row": 131,
                                                            "column": 41
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "statement_block",
                                                      "start": {
                                                        "row": 131,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 133,
                                                        "column": 9
                                                      },
                                                      "text": "{\n          pendingLocation = url;\n        }",
                                                      "children": [
                                                        {
                                                          "type": "{",
                                                          "start": {
                                                            "row": 131,
                                                            "column": 42
                                                          },
                                                          "end": {
                                                            "row": 131,
                                                            "column": 43
                                                          },
                                                          "text": "{"
                                                        },
                                                        {
                                                          "type": "expression_statement",
                                                          "start": {
                                                            "row": 132,
                                                            "column": 10
                                                          },
                                                          "end": {
                                                            "row": 132,
                                                            "column": 32
                                                          },
                                                          "text": "pendingLocation = url;",
                                                          "children": [
                                                            {
                                                              "type": "assignment_expression",
                                                              "start": {
                                                                "row": 132,
                                                                "column": 10
                                                              },
                                                              "end": {
                                                                "row": 132,
                                                                "column": 31
                                                              },
                                                              "text": "pendingLocation = url",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 132,
                                                                    "column": 10
                                                                  },
                                                                  "end": {
                                                                    "row": 132,
                                                                    "column": 25
                                                                  },
                                                                  "text": "pendingLocation"
                                                                },
                                                                {
                                                                  "type": "=",
                                                                  "start": {
                                                                    "row": 132,
                                                                    "column": 26
                                                                  },
                                                                  "end": {
                                                                    "row": 132,
                                                                    "column": 27
                                                                  },
                                                                  "text": "="
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 132,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 132,
                                                                    "column": 31
                                                                  },
                                                                  "text": "url"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ";",
                                                              "start": {
                                                                "row": 132,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 132,
                                                                "column": 32
                                                              },
                                                              "text": ";"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "}",
                                                          "start": {
                                                            "row": 133,
                                                            "column": 8
                                                          },
                                                          "end": {
                                                            "row": 133,
                                                            "column": 9
                                                          },
                                                          "text": "}"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "if_statement",
                                                  "start": {
                                                    "row": 134,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 140,
                                                    "column": 9
                                                  },
                                                  "text": "if (replace) {\n          location.replace(url);\n        } else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }",
                                                  "children": [
                                                    {
                                                      "type": "if",
                                                      "start": {
                                                        "row": 134,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 134,
                                                        "column": 10
                                                      },
                                                      "text": "if"
                                                    },
                                                    {
                                                      "type": "parenthesized_expression",
                                                      "start": {
                                                        "row": 134,
                                                        "column": 11
                                                      },
                                                      "end": {
                                                        "row": 134,
                                                        "column": 20
                                                      },
                                                      "text": "(replace)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 11
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 12
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 19
                                                          },
                                                          "text": "replace"
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 19
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 20
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "statement_block",
                                                      "start": {
                                                        "row": 134,
                                                        "column": 21
                                                      },
                                                      "end": {
                                                        "row": 136,
                                                        "column": 9
                                                      },
                                                      "text": "{\n          location.replace(url);\n        }",
                                                      "children": [
                                                        {
                                                          "type": "{",
                                                          "start": {
                                                            "row": 134,
                                                            "column": 21
                                                          },
                                                          "end": {
                                                            "row": 134,
                                                            "column": 22
                                                          },
                                                          "text": "{"
                                                        },
                                                        {
                                                          "type": "expression_statement",
                                                          "start": {
                                                            "row": 135,
                                                            "column": 10
                                                          },
                                                          "end": {
                                                            "row": 135,
                                                            "column": 32
                                                          },
                                                          "text": "location.replace(url);",
                                                          "children": [
                                                            {
                                                              "type": "call_expression",
                                                              "start": {
                                                                "row": 135,
                                                                "column": 10
                                                              },
                                                              "end": {
                                                                "row": 135,
                                                                "column": 31
                                                              },
                                                              "text": "location.replace(url)",
                                                              "children": [
                                                                {
                                                                  "type": "member_expression",
                                                                  "start": {
                                                                    "row": 135,
                                                                    "column": 10
                                                                  },
                                                                  "end": {
                                                                    "row": 135,
                                                                    "column": 26
                                                                  },
                                                                  "text": "location.replace",
                                                                  "children": [
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 10
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 18
                                                                      },
                                                                      "text": "location"
                                                                    },
                                                                    {
                                                                      "type": ".",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 18
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 19
                                                                      },
                                                                      "text": "."
                                                                    },
                                                                    {
                                                                      "type": "property_identifier",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 19
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 26
                                                                      },
                                                                      "text": "replace"
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "arguments",
                                                                  "start": {
                                                                    "row": 135,
                                                                    "column": 26
                                                                  },
                                                                  "end": {
                                                                    "row": 135,
                                                                    "column": 31
                                                                  },
                                                                  "text": "(url)",
                                                                  "children": [
                                                                    {
                                                                      "type": "(",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 26
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 27
                                                                      },
                                                                      "text": "("
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 27
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 30
                                                                      },
                                                                      "text": "url"
                                                                    },
                                                                    {
                                                                      "type": ")",
                                                                      "start": {
                                                                        "row": 135,
                                                                        "column": 30
                                                                      },
                                                                      "end": {
                                                                        "row": 135,
                                                                        "column": 31
                                                                      },
                                                                      "text": ")"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ";",
                                                              "start": {
                                                                "row": 135,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 135,
                                                                "column": 32
                                                              },
                                                              "text": ";"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "}",
                                                          "start": {
                                                            "row": 136,
                                                            "column": 8
                                                          },
                                                          "end": {
                                                            "row": 136,
                                                            "column": 9
                                                          },
                                                          "text": "}"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "else_clause",
                                                      "start": {
                                                        "row": 136,
                                                        "column": 10
                                                      },
                                                      "end": {
                                                        "row": 140,
                                                        "column": 9
                                                      },
                                                      "text": "else if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }",
                                                      "children": [
                                                        {
                                                          "type": "else",
                                                          "start": {
                                                            "row": 136,
                                                            "column": 10
                                                          },
                                                          "end": {
                                                            "row": 136,
                                                            "column": 14
                                                          },
                                                          "text": "else"
                                                        },
                                                        {
                                                          "type": "if_statement",
                                                          "start": {
                                                            "row": 136,
                                                            "column": 15
                                                          },
                                                          "end": {
                                                            "row": 140,
                                                            "column": 9
                                                          },
                                                          "text": "if (!sameBase) {\n          location.href = url;\n        } else {\n          location.hash = getHash(url);\n        }",
                                                          "children": [
                                                            {
                                                              "type": "if",
                                                              "start": {
                                                                "row": 136,
                                                                "column": 15
                                                              },
                                                              "end": {
                                                                "row": 136,
                                                                "column": 17
                                                              },
                                                              "text": "if"
                                                            },
                                                            {
                                                              "type": "parenthesized_expression",
                                                              "start": {
                                                                "row": 136,
                                                                "column": 18
                                                              },
                                                              "end": {
                                                                "row": 136,
                                                                "column": 29
                                                              },
                                                              "text": "(!sameBase)",
                                                              "children": [
                                                                {
                                                                  "type": "(",
                                                                  "start": {
                                                                    "row": 136,
                                                                    "column": 18
                                                                  },
                                                                  "end": {
                                                                    "row": 136,
                                                                    "column": 19
                                                                  },
                                                                  "text": "("
                                                                },
                                                                {
                                                                  "type": "unary_expression",
                                                                  "start": {
                                                                    "row": 136,
                                                                    "column": 19
                                                                  },
                                                                  "end": {
                                                                    "row": 136,
                                                                    "column": 28
                                                                  },
                                                                  "text": "!sameBase",
                                                                  "children": [
                                                                    {
                                                                      "type": "!",
                                                                      "start": {
                                                                        "row": 136,
                                                                        "column": 19
                                                                      },
                                                                      "end": {
                                                                        "row": 136,
                                                                        "column": 20
                                                                      },
                                                                      "text": "!"
                                                                    },
                                                                    {
                                                                      "type": "identifier",
                                                                      "start": {
                                                                        "row": 136,
                                                                        "column": 20
                                                                      },
                                                                      "end": {
                                                                        "row": 136,
                                                                        "column": 28
                                                                      },
                                                                      "text": "sameBase"
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": ")",
                                                                  "start": {
                                                                    "row": 136,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 136,
                                                                    "column": 29
                                                                  },
                                                                  "text": ")"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "statement_block",
                                                              "start": {
                                                                "row": 136,
                                                                "column": 30
                                                              },
                                                              "end": {
                                                                "row": 138,
                                                                "column": 9
                                                              },
                                                              "text": "{\n          location.href = url;\n        }",
                                                              "children": [
                                                                {
                                                                  "type": "{",
                                                                  "start": {
                                                                    "row": 136,
                                                                    "column": 30
                                                                  },
                                                                  "end": {
                                                                    "row": 136,
                                                                    "column": 31
                                                                  },
                                                                  "text": "{"
                                                                },
                                                                {
                                                                  "type": "expression_statement",
                                                                  "start": {
                                                                    "row": 137,
                                                                    "column": 10
                                                                  },
                                                                  "end": {
                                                                    "row": 137,
                                                                    "column": 30
                                                                  },
                                                                  "text": "location.href = url;",
                                                                  "children": [
                                                                    {
                                                                      "type": "assignment_expression",
                                                                      "start": {
                                                                        "row": 137,
                                                                        "column": 10
                                                                      },
                                                                      "end": {
                                                                        "row": 137,
                                                                        "column": 29
                                                                      },
                                                                      "text": "location.href = url",
                                                                      "children": [
                                                                        {
                                                                          "type": "member_expression",
                                                                          "start": {
                                                                            "row": 137,
                                                                            "column": 10
                                                                          },
                                                                          "end": {
                                                                            "row": 137,
                                                                            "column": 23
                                                                          },
                                                                          "text": "location.href",
                                                                          "children": [
                                                                            {
                                                                              "type": "identifier",
                                                                              "start": {
                                                                                "row": 137,
                                                                                "column": 10
                                                                              },
                                                                              "end": {
                                                                                "row": 137,
                                                                                "column": 18
                                                                              },
                                                                              "text": "location"
                                                                            },
                                                                            {
                                                                              "type": ".",
                                                                              "start": {
                                                                                "row": 137,
                                                                                "column": 18
                                                                              },
                                                                              "end": {
                                                                                "row": 137,
                                                                                "column": 19
                                                                              },
                                                                              "text": "."
                                                                            },
                                                                            {
                                                                              "type": "property_identifier",
                                                                              "start": {
                                                                                "row": 137,
                                                                                "column": 19
                                                                              },
                                                                              "end": {
                                                                                "row": 137,
                                                                                "column": 23
                                                                              },
                                                                              "text": "href"
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "type": "=",
                                                                          "start": {
                                                                            "row": 137,
                                                                            "column": 24
                                                                          },
                                                                          "end": {
                                                                            "row": 137,
                                                                            "column": 25
                                                                          },
                                                                          "text": "="
                                                                        },
                                                                        {
                                                                          "type": "identifier",
                                                                          "start": {
                                                                            "row": 137,
                                                                            "column": 26
                                                                          },
                                                                          "end": {
                                                                            "row": 137,
                                                                            "column": 29
                                                                          },
                                                                          "text": "url"
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": ";",
                                                                      "start": {
                                                                        "row": 137,
                                                                        "column": 29
                                                                      },
                                                                      "end": {
                                                                        "row": 137,
                                                                        "column": 30
                                                                      },
                                                                      "text": ";"
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "}",
                                                                  "start": {
                                                                    "row": 138,
                                                                    "column": 8
                                                                  },
                                                                  "end": {
                                                                    "row": 138,
                                                                    "column": 9
                                                                  },
                                                                  "text": "}"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "else_clause",
                                                              "start": {
                                                                "row": 138,
                                                                "column": 10
                                                              },
                                                              "end": {
                                                                "row": 140,
                                                                "column": 9
                                                              },
                                                              "text": "else {\n          location.hash = getHash(url);\n        }",
                                                              "children": [
                                                                {
                                                                  "type": "else",
                                                                  "start": {
                                                                    "row": 138,
                                                                    "column": 10
                                                                  },
                                                                  "end": {
                                                                    "row": 138,
                                                                    "column": 14
                                                                  },
                                                                  "text": "else"
                                                                },
                                                                {
                                                                  "type": "statement_block",
                                                                  "start": {
                                                                    "row": 138,
                                                                    "column": 15
                                                                  },
                                                                  "end": {
                                                                    "row": 140,
                                                                    "column": 9
                                                                  },
                                                                  "text": "{\n          location.hash = getHash(url);\n        }",
                                                                  "children": [
                                                                    {
                                                                      "type": "{",
                                                                      "start": {
                                                                        "row": 138,
                                                                        "column": 15
                                                                      },
                                                                      "end": {
                                                                        "row": 138,
                                                                        "column": 16
                                                                      },
                                                                      "text": "{"
                                                                    },
                                                                    {
                                                                      "type": "expression_statement",
                                                                      "start": {
                                                                        "row": 139,
                                                                        "column": 10
                                                                      },
                                                                      "end": {
                                                                        "row": 139,
                                                                        "column": 39
                                                                      },
                                                                      "text": "location.hash = getHash(url);",
                                                                      "children": [
                                                                        {
                                                                          "type": "assignment_expression",
                                                                          "start": {
                                                                            "row": 139,
                                                                            "column": 10
                                                                          },
                                                                          "end": {
                                                                            "row": 139,
                                                                            "column": 38
                                                                          },
                                                                          "text": "location.hash = getHash(url)",
                                                                          "children": [
                                                                            {
                                                                              "type": "member_expression",
                                                                              "start": {
                                                                                "row": 139,
                                                                                "column": 10
                                                                              },
                                                                              "end": {
                                                                                "row": 139,
                                                                                "column": 23
                                                                              },
                                                                              "text": "location.hash",
                                                                              "children": [
                                                                                {
                                                                                  "type": "identifier",
                                                                                  "start": {
                                                                                    "row": 139,
                                                                                    "column": 10
                                                                                  },
                                                                                  "end": {
                                                                                    "row": 139,
                                                                                    "column": 18
                                                                                  },
                                                                                  "text": "location"
                                                                                },
                                                                                {
                                                                                  "type": ".",
                                                                                  "start": {
                                                                                    "row": 139,
                                                                                    "column": 18
                                                                                  },
                                                                                  "end": {
                                                                                    "row": 139,
                                                                                    "column": 19
                                                                                  },
                                                                                  "text": "."
                                                                                },
                                                                                {
                                                                                  "type": "property_identifier",
                                                                                  "start": {
                                                                                    "row": 139,
                                                                                    "column": 19
                                                                                  },
                                                                                  "end": {
                                                                                    "row": 139,
                                                                                    "column": 23
                                                                                  },
                                                                                  "text": "hash"
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "type": "=",
                                                                              "start": {
                                                                                "row": 139,
                                                                                "column": 24
                                                                              },
                                                                              "end": {
                                                                                "row": 139,
                                                                                "column": 25
                                                                              },
                                                                              "text": "="
                                                                            },
                                                                            {
                                                                              "type": "call_expression",
                                                                              "start": {
                                                                                "row": 139,
                                                                                "column": 26
                                                                              },
                                                                              "end": {
                                                                                "row": 139,
                                                                                "column": 38
                                                                              },
                                                                              "text": "getHash(url)",
                                                                              "children": [
                                                                                {
                                                                                  "type": "identifier",
                                                                                  "start": {
                                                                                    "row": 139,
                                                                                    "column": 26
                                                                                  },
                                                                                  "end": {
                                                                                    "row": 139,
                                                                                    "column": 33
                                                                                  },
                                                                                  "text": "getHash"
                                                                                },
                                                                                {
                                                                                  "type": "arguments",
                                                                                  "start": {
                                                                                    "row": 139,
                                                                                    "column": 33
                                                                                  },
                                                                                  "end": {
                                                                                    "row": 139,
                                                                                    "column": 38
                                                                                  },
                                                                                  "text": "(url)",
                                                                                  "children": [
                                                                                    {
                                                                                      "type": "(",
                                                                                      "start": {
                                                                                        "row": 139,
                                                                                        "column": 33
                                                                                      },
                                                                                      "end": {
                                                                                        "row": 139,
                                                                                        "column": 34
                                                                                      },
                                                                                      "text": "("
                                                                                    },
                                                                                    {
                                                                                      "type": "identifier",
                                                                                      "start": {
                                                                                        "row": 139,
                                                                                        "column": 34
                                                                                      },
                                                                                      "end": {
                                                                                        "row": 139,
                                                                                        "column": 37
                                                                                      },
                                                                                      "text": "url"
                                                                                    },
                                                                                    {
                                                                                      "type": ")",
                                                                                      "start": {
                                                                                        "row": 139,
                                                                                        "column": 37
                                                                                      },
                                                                                      "end": {
                                                                                        "row": 139,
                                                                                        "column": 38
                                                                                      },
                                                                                      "text": ")"
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "type": ";",
                                                                          "start": {
                                                                            "row": 139,
                                                                            "column": 38
                                                                          },
                                                                          "end": {
                                                                            "row": 139,
                                                                            "column": 39
                                                                          },
                                                                          "text": ";"
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "}",
                                                                      "start": {
                                                                        "row": 140,
                                                                        "column": 8
                                                                      },
                                                                      "end": {
                                                                        "row": 140,
                                                                        "column": 9
                                                                      },
                                                                      "text": "}"
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "if_statement",
                                                  "start": {
                                                    "row": 141,
                                                    "column": 8
                                                  },
                                                  "end": {
                                                    "row": 143,
                                                    "column": 9
                                                  },
                                                  "text": "if (location.href !== url) {\n          pendingLocation = url;\n        }",
                                                  "children": [
                                                    {
                                                      "type": "if",
                                                      "start": {
                                                        "row": 141,
                                                        "column": 8
                                                      },
                                                      "end": {
                                                        "row": 141,
                                                        "column": 10
                                                      },
                                                      "text": "if"
                                                    },
                                                    {
                                                      "type": "parenthesized_expression",
                                                      "start": {
                                                        "row": 141,
                                                        "column": 11
                                                      },
                                                      "end": {
                                                        "row": 141,
                                                        "column": 34
                                                      },
                                                      "text": "(location.href !== url)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 141,
                                                            "column": 11
                                                          },
                                                          "end": {
                                                            "row": 141,
                                                            "column": 12
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "binary_expression",
                                                          "start": {
                                                            "row": 141,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 141,
                                                            "column": 33
                                                          },
                                                          "text": "location.href !== url",
                                                          "children": [
                                                            {
                                                              "type": "member_expression",
                                                              "start": {
                                                                "row": 141,
                                                                "column": 12
                                                              },
                                                              "end": {
                                                                "row": 141,
                                                                "column": 25
                                                              },
                                                              "text": "location.href",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 141,
                                                                    "column": 12
                                                                  },
                                                                  "end": {
                                                                    "row": 141,
                                                                    "column": 20
                                                                  },
                                                                  "text": "location"
                                                                },
                                                                {
                                                                  "type": ".",
                                                                  "start": {
                                                                    "row": 141,
                                                                    "column": 20
                                                                  },
                                                                  "end": {
                                                                    "row": 141,
                                                                    "column": 21
                                                                  },
                                                                  "text": "."
                                                                },
                                                                {
                                                                  "type": "property_identifier",
                                                                  "start": {
                                                                    "row": 141,
                                                                    "column": 21
                                                                  },
                                                                  "end": {
                                                                    "row": 141,
                                                                    "column": 25
                                                                  },
                                                                  "text": "href"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "!==",
                                                              "start": {
                                                                "row": 141,
                                                                "column": 26
                                                              },
                                                              "end": {
                                                                "row": 141,
                                                                "column": 29
                                                              },
                                                              "text": "!=="
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 141,
                                                                "column": 30
                                                              },
                                                              "end": {
                                                                "row": 141,
                                                                "column": 33
                                                              },
                                                              "text": "url"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 141,
                                                            "column": 33
                                                          },
                                                          "end": {
                                                            "row": 141,
                                                            "column": 34
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "statement_block",
                                                      "start": {
                                                        "row": 141,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 143,
                                                        "column": 9
                                                      },
                                                      "text": "{\n          pendingLocation = url;\n        }",
                                                      "children": [
                                                        {
                                                          "type": "{",
                                                          "start": {
                                                            "row": 141,
                                                            "column": 35
                                                          },
                                                          "end": {
                                                            "row": 141,
                                                            "column": 36
                                                          },
                                                          "text": "{"
                                                        },
                                                        {
                                                          "type": "expression_statement",
                                                          "start": {
                                                            "row": 142,
                                                            "column": 10
                                                          },
                                                          "end": {
                                                            "row": 142,
                                                            "column": 32
                                                          },
                                                          "text": "pendingLocation = url;",
                                                          "children": [
                                                            {
                                                              "type": "assignment_expression",
                                                              "start": {
                                                                "row": 142,
                                                                "column": 10
                                                              },
                                                              "end": {
                                                                "row": 142,
                                                                "column": 31
                                                              },
                                                              "text": "pendingLocation = url",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 142,
                                                                    "column": 10
                                                                  },
                                                                  "end": {
                                                                    "row": 142,
                                                                    "column": 25
                                                                  },
                                                                  "text": "pendingLocation"
                                                                },
                                                                {
                                                                  "type": "=",
                                                                  "start": {
                                                                    "row": 142,
                                                                    "column": 26
                                                                  },
                                                                  "end": {
                                                                    "row": 142,
                                                                    "column": 27
                                                                  },
                                                                  "text": "="
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 142,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 142,
                                                                    "column": 31
                                                                  },
                                                                  "text": "url"
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": ";",
                                                              "start": {
                                                                "row": 142,
                                                                "column": 31
                                                              },
                                                              "end": {
                                                                "row": 142,
                                                                "column": 32
                                                              },
                                                              "text": ";"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "}",
                                                          "start": {
                                                            "row": 143,
                                                            "column": 8
                                                          },
                                                          "end": {
                                                            "row": 143,
                                                            "column": 9
                                                          },
                                                          "text": "}"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "}",
                                                  "start": {
                                                    "row": 144,
                                                    "column": 6
                                                  },
                                                  "end": {
                                                    "row": 144,
                                                    "column": 7
                                                  },
                                                  "text": "}"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "return_statement",
                                      "start": {
                                        "row": 145,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 145,
                                        "column": 18
                                      },
                                      "text": "return self;",
                                      "children": [
                                        {
                                          "type": "return",
                                          "start": {
                                            "row": 145,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 145,
                                            "column": 12
                                          },
                                          "text": "return"
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 145,
                                            "column": 13
                                          },
                                          "end": {
                                            "row": 145,
                                            "column": 17
                                          },
                                          "text": "self"
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 145,
                                            "column": 17
                                          },
                                          "end": {
                                            "row": 145,
                                            "column": 18
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 146,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 146,
                                        "column": 13
                                      },
                                      "text": "// getter"
                                    },
                                    {
                                      "type": "}",
                                      "start": {
                                        "row": 147,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 147,
                                        "column": 5
                                      },
                                      "text": "}"
                                    }
                                  ]
                                },
                                {
                                  "type": "else_clause",
                                  "start": {
                                    "row": 147,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 153,
                                    "column": 5
                                  },
                                  "text": "else {\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }",
                                  "children": [
                                    {
                                      "type": "else",
                                      "start": {
                                        "row": 147,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 147,
                                        "column": 10
                                      },
                                      "text": "else"
                                    },
                                    {
                                      "type": "statement_block",
                                      "start": {
                                        "row": 147,
                                        "column": 11
                                      },
                                      "end": {
                                        "row": 153,
                                        "column": 5
                                      },
                                      "text": "{\n      // - pendingLocation is needed as browsers don't allow to read out\n      //   the new location.href if a reload happened or if there is a bug like in iOS 9 (see\n      //   https://openradar.appspot.com/22186109).\n      // - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172\n      return pendingLocation || location.href.replace(/%27/g,\"'\");\n    }",
                                      "children": [
                                        {
                                          "type": "{",
                                          "start": {
                                            "row": 147,
                                            "column": 11
                                          },
                                          "end": {
                                            "row": 147,
                                            "column": 12
                                          },
                                          "text": "{"
                                        },
                                        {
                                          "type": "comment",
                                          "start": {
                                            "row": 148,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 148,
                                            "column": 72
                                          },
                                          "text": "// - pendingLocation is needed as browsers don't allow to read out"
                                        },
                                        {
                                          "type": "comment",
                                          "start": {
                                            "row": 149,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 149,
                                            "column": 93
                                          },
                                          "text": "//   the new location.href if a reload happened or if there is a bug like in iOS 9 (see"
                                        },
                                        {
                                          "type": "comment",
                                          "start": {
                                            "row": 150,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 150,
                                            "column": 51
                                          },
                                          "text": "//   https://openradar.appspot.com/22186109)."
                                        },
                                        {
                                          "type": "comment",
                                          "start": {
                                            "row": 151,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 151,
                                            "column": 98
                                          },
                                          "text": "// - the replacement is a workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=407172"
                                        },
                                        {
                                          "type": "return_statement",
                                          "start": {
                                            "row": 152,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 152,
                                            "column": 66
                                          },
                                          "text": "return pendingLocation || location.href.replace(/%27/g,\"'\");",
                                          "children": [
                                            {
                                              "type": "return",
                                              "start": {
                                                "row": 152,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 152,
                                                "column": 12
                                              },
                                              "text": "return"
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 152,
                                                "column": 13
                                              },
                                              "end": {
                                                "row": 152,
                                                "column": 65
                                              },
                                              "text": "pendingLocation || location.href.replace(/%27/g,\"'\")",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 152,
                                                    "column": 13
                                                  },
                                                  "end": {
                                                    "row": 152,
                                                    "column": 28
                                                  },
                                                  "text": "pendingLocation"
                                                },
                                                {
                                                  "type": "||",
                                                  "start": {
                                                    "row": 152,
                                                    "column": 29
                                                  },
                                                  "end": {
                                                    "row": 152,
                                                    "column": 31
                                                  },
                                                  "text": "||"
                                                },
                                                {
                                                  "type": "call_expression",
                                                  "start": {
                                                    "row": 152,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 152,
                                                    "column": 65
                                                  },
                                                  "text": "location.href.replace(/%27/g,\"'\")",
                                                  "children": [
                                                    {
                                                      "type": "member_expression",
                                                      "start": {
                                                        "row": 152,
                                                        "column": 32
                                                      },
                                                      "end": {
                                                        "row": 152,
                                                        "column": 53
                                                      },
                                                      "text": "location.href.replace",
                                                      "children": [
                                                        {
                                                          "type": "member_expression",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 32
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 45
                                                          },
                                                          "text": "location.href",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 32
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 40
                                                              },
                                                              "text": "location"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 40
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 41
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "property_identifier",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 41
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 45
                                                              },
                                                              "text": "href"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ".",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 45
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 46
                                                          },
                                                          "text": "."
                                                        },
                                                        {
                                                          "type": "property_identifier",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 46
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 53
                                                          },
                                                          "text": "replace"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "arguments",
                                                      "start": {
                                                        "row": 152,
                                                        "column": 53
                                                      },
                                                      "end": {
                                                        "row": 152,
                                                        "column": 65
                                                      },
                                                      "text": "(/%27/g,\"'\")",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 53
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 54
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "regex",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 54
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 60
                                                          },
                                                          "text": "/%27/g",
                                                          "children": [
                                                            {
                                                              "type": "/",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 54
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 55
                                                              },
                                                              "text": "/"
                                                            },
                                                            {
                                                              "type": "regex_pattern",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 55
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 58
                                                              },
                                                              "text": "%27"
                                                            },
                                                            {
                                                              "type": "/",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 58
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 59
                                                              },
                                                              "text": "/"
                                                            },
                                                            {
                                                              "type": "regex_flags",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 59
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 60
                                                              },
                                                              "text": "g"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ",",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 60
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 61
                                                          },
                                                          "text": ","
                                                        },
                                                        {
                                                          "type": "string",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 61
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 64
                                                          },
                                                          "text": "\"'\"",
                                                          "children": [
                                                            {
                                                              "type": "\"",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 61
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 62
                                                              },
                                                              "text": "\""
                                                            },
                                                            {
                                                              "type": "string_fragment",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 62
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 63
                                                              },
                                                              "text": "'"
                                                            },
                                                            {
                                                              "type": "\"",
                                                              "start": {
                                                                "row": 152,
                                                                "column": 63
                                                              },
                                                              "end": {
                                                                "row": 152,
                                                                "column": 64
                                                              },
                                                              "text": "\""
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 152,
                                                            "column": 64
                                                          },
                                                          "end": {
                                                            "row": 152,
                                                            "column": 65
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ";",
                                              "start": {
                                                "row": 152,
                                                "column": 65
                                              },
                                              "end": {
                                                "row": 152,
                                                "column": 66
                                              },
                                              "text": ";"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "}",
                                          "start": {
                                            "row": 153,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 153,
                                            "column": 5
                                          },
                                          "text": "}"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 154,
                                "column": 2
                              },
                              "end": {
                                "row": 154,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 154,
                    "column": 3
                  },
                  "end": {
                    "row": 154,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 156,
                "column": 2
              },
              "end": {
                "row": 165,
                "column": 5
              },
              "text": "/**\n   * @name $browser#state\n   *\n   * @description\n   * This method is a getter.\n   *\n   * Return history.state or null if history.state is undefined.\n   *\n   * @returns {object} state\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 166,
                "column": 2
              },
              "end": {
                "row": 168,
                "column": 4
              },
              "text": "self.state = function() {\n    return cachedState;\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 166,
                    "column": 2
                  },
                  "end": {
                    "row": 168,
                    "column": 3
                  },
                  "text": "self.state = function() {\n    return cachedState;\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 166,
                        "column": 2
                      },
                      "end": {
                        "row": 166,
                        "column": 12
                      },
                      "text": "self.state",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 166,
                            "column": 2
                          },
                          "end": {
                            "row": 166,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 166,
                            "column": 6
                          },
                          "end": {
                            "row": 166,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 166,
                            "column": 7
                          },
                          "end": {
                            "row": 166,
                            "column": 12
                          },
                          "text": "state"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 166,
                        "column": 13
                      },
                      "end": {
                        "row": 166,
                        "column": 14
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 166,
                        "column": 15
                      },
                      "end": {
                        "row": 168,
                        "column": 3
                      },
                      "text": "function() {\n    return cachedState;\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 166,
                            "column": 15
                          },
                          "end": {
                            "row": 166,
                            "column": 23
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 166,
                            "column": 23
                          },
                          "end": {
                            "row": 166,
                            "column": 25
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 166,
                                "column": 23
                              },
                              "end": {
                                "row": 166,
                                "column": 24
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 166,
                                "column": 24
                              },
                              "end": {
                                "row": 166,
                                "column": 25
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 166,
                            "column": 26
                          },
                          "end": {
                            "row": 168,
                            "column": 3
                          },
                          "text": "{\n    return cachedState;\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 166,
                                "column": 26
                              },
                              "end": {
                                "row": 166,
                                "column": 27
                              },
                              "text": "{"
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 167,
                                "column": 4
                              },
                              "end": {
                                "row": 167,
                                "column": 23
                              },
                              "text": "return cachedState;",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 167,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 167,
                                    "column": 10
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 167,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 167,
                                    "column": 22
                                  },
                                  "text": "cachedState"
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 167,
                                    "column": 22
                                  },
                                  "end": {
                                    "row": 167,
                                    "column": 23
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 168,
                                "column": 2
                              },
                              "end": {
                                "row": 168,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 168,
                    "column": 3
                  },
                  "end": {
                    "row": 168,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 170,
                "column": 2
              },
              "end": {
                "row": 171,
                "column": 28
              },
              "text": "var urlChangeListeners = [],\n      urlChangeInit = false;",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 170,
                    "column": 2
                  },
                  "end": {
                    "row": 170,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 170,
                    "column": 6
                  },
                  "end": {
                    "row": 170,
                    "column": 29
                  },
                  "text": "urlChangeListeners = []",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 170,
                        "column": 6
                      },
                      "end": {
                        "row": 170,
                        "column": 24
                      },
                      "text": "urlChangeListeners"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 170,
                        "column": 25
                      },
                      "end": {
                        "row": 170,
                        "column": 26
                      },
                      "text": "="
                    },
                    {
                      "type": "array",
                      "start": {
                        "row": 170,
                        "column": 27
                      },
                      "end": {
                        "row": 170,
                        "column": 29
                      },
                      "text": "[]",
                      "children": [
                        {
                          "type": "[",
                          "start": {
                            "row": 170,
                            "column": 27
                          },
                          "end": {
                            "row": 170,
                            "column": 28
                          },
                          "text": "["
                        },
                        {
                          "type": "]",
                          "start": {
                            "row": 170,
                            "column": 28
                          },
                          "end": {
                            "row": 170,
                            "column": 29
                          },
                          "text": "]"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ",",
                  "start": {
                    "row": 170,
                    "column": 29
                  },
                  "end": {
                    "row": 170,
                    "column": 30
                  },
                  "text": ","
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 171,
                    "column": 6
                  },
                  "end": {
                    "row": 171,
                    "column": 27
                  },
                  "text": "urlChangeInit = false",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 171,
                        "column": 6
                      },
                      "end": {
                        "row": 171,
                        "column": 19
                      },
                      "text": "urlChangeInit"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 171,
                        "column": 20
                      },
                      "end": {
                        "row": 171,
                        "column": 21
                      },
                      "text": "="
                    },
                    {
                      "type": "false",
                      "start": {
                        "row": 171,
                        "column": 22
                      },
                      "end": {
                        "row": 171,
                        "column": 27
                      },
                      "text": "false"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 171,
                    "column": 27
                  },
                  "end": {
                    "row": 171,
                    "column": 28
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "function_declaration",
              "start": {
                "row": 173,
                "column": 2
              },
              "end": {
                "row": 177,
                "column": 3
              },
              "text": "function cacheStateAndFireUrlChange() {\n    pendingLocation = null;\n    cacheState();\n    fireUrlChange();\n  }",
              "children": [
                {
                  "type": "function",
                  "start": {
                    "row": 173,
                    "column": 2
                  },
                  "end": {
                    "row": 173,
                    "column": 10
                  },
                  "text": "function"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 173,
                    "column": 11
                  },
                  "end": {
                    "row": 173,
                    "column": 37
                  },
                  "text": "cacheStateAndFireUrlChange"
                },
                {
                  "type": "formal_parameters",
                  "start": {
                    "row": 173,
                    "column": 37
                  },
                  "end": {
                    "row": 173,
                    "column": 39
                  },
                  "text": "()",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 173,
                        "column": 37
                      },
                      "end": {
                        "row": 173,
                        "column": 38
                      },
                      "text": "("
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 173,
                        "column": 38
                      },
                      "end": {
                        "row": 173,
                        "column": 39
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": "statement_block",
                  "start": {
                    "row": 173,
                    "column": 40
                  },
                  "end": {
                    "row": 177,
                    "column": 3
                  },
                  "text": "{\n    pendingLocation = null;\n    cacheState();\n    fireUrlChange();\n  }",
                  "children": [
                    {
                      "type": "{",
                      "start": {
                        "row": 173,
                        "column": 40
                      },
                      "end": {
                        "row": 173,
                        "column": 41
                      },
                      "text": "{"
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 174,
                        "column": 4
                      },
                      "end": {
                        "row": 174,
                        "column": 27
                      },
                      "text": "pendingLocation = null;",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 174,
                            "column": 4
                          },
                          "end": {
                            "row": 174,
                            "column": 26
                          },
                          "text": "pendingLocation = null",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 174,
                                "column": 4
                              },
                              "end": {
                                "row": 174,
                                "column": 19
                              },
                              "text": "pendingLocation"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 174,
                                "column": 20
                              },
                              "end": {
                                "row": 174,
                                "column": 21
                              },
                              "text": "="
                            },
                            {
                              "type": "null",
                              "start": {
                                "row": 174,
                                "column": 22
                              },
                              "end": {
                                "row": 174,
                                "column": 26
                              },
                              "text": "null"
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 174,
                            "column": 26
                          },
                          "end": {
                            "row": 174,
                            "column": 27
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 175,
                        "column": 4
                      },
                      "end": {
                        "row": 175,
                        "column": 17
                      },
                      "text": "cacheState();",
                      "children": [
                        {
                          "type": "call_expression",
                          "start": {
                            "row": 175,
                            "column": 4
                          },
                          "end": {
                            "row": 175,
                            "column": 16
                          },
                          "text": "cacheState()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 175,
                                "column": 4
                              },
                              "end": {
                                "row": 175,
                                "column": 14
                              },
                              "text": "cacheState"
                            },
                            {
                              "type": "arguments",
                              "start": {
                                "row": 175,
                                "column": 14
                              },
                              "end": {
                                "row": 175,
                                "column": 16
                              },
                              "text": "()",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 175,
                                    "column": 14
                                  },
                                  "end": {
                                    "row": 175,
                                    "column": 15
                                  },
                                  "text": "("
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 175,
                                    "column": 15
                                  },
                                  "end": {
                                    "row": 175,
                                    "column": 16
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 175,
                            "column": 16
                          },
                          "end": {
                            "row": 175,
                            "column": 17
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 176,
                        "column": 4
                      },
                      "end": {
                        "row": 176,
                        "column": 20
                      },
                      "text": "fireUrlChange();",
                      "children": [
                        {
                          "type": "call_expression",
                          "start": {
                            "row": 176,
                            "column": 4
                          },
                          "end": {
                            "row": 176,
                            "column": 19
                          },
                          "text": "fireUrlChange()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 176,
                                "column": 4
                              },
                              "end": {
                                "row": 176,
                                "column": 17
                              },
                              "text": "fireUrlChange"
                            },
                            {
                              "type": "arguments",
                              "start": {
                                "row": 176,
                                "column": 17
                              },
                              "end": {
                                "row": 176,
                                "column": 19
                              },
                              "text": "()",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 176,
                                    "column": 17
                                  },
                                  "end": {
                                    "row": 176,
                                    "column": 18
                                  },
                                  "text": "("
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 176,
                                    "column": 18
                                  },
                                  "end": {
                                    "row": 176,
                                    "column": 19
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 176,
                            "column": 19
                          },
                          "end": {
                            "row": 176,
                            "column": 20
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "}",
                      "start": {
                        "row": 177,
                        "column": 2
                      },
                      "end": {
                        "row": 177,
                        "column": 3
                      },
                      "text": "}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 179,
                "column": 2
              },
              "end": {
                "row": 179,
                "column": 72
              },
              "text": "// This variable should be used *only* inside the cacheState function."
            },
            {
              "type": "variable_declaration",
              "start": {
                "row": 180,
                "column": 2
              },
              "end": {
                "row": 180,
                "column": 29
              },
              "text": "var lastCachedState = null;",
              "children": [
                {
                  "type": "var",
                  "start": {
                    "row": 180,
                    "column": 2
                  },
                  "end": {
                    "row": 180,
                    "column": 5
                  },
                  "text": "var"
                },
                {
                  "type": "variable_declarator",
                  "start": {
                    "row": 180,
                    "column": 6
                  },
                  "end": {
                    "row": 180,
                    "column": 28
                  },
                  "text": "lastCachedState = null",
                  "children": [
                    {
                      "type": "identifier",
                      "start": {
                        "row": 180,
                        "column": 6
                      },
                      "end": {
                        "row": 180,
                        "column": 21
                      },
                      "text": "lastCachedState"
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 180,
                        "column": 22
                      },
                      "end": {
                        "row": 180,
                        "column": 23
                      },
                      "text": "="
                    },
                    {
                      "type": "null",
                      "start": {
                        "row": 180,
                        "column": 24
                      },
                      "end": {
                        "row": 180,
                        "column": 28
                      },
                      "text": "null"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 180,
                    "column": 28
                  },
                  "end": {
                    "row": 180,
                    "column": 29
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "function_declaration",
              "start": {
                "row": 181,
                "column": 2
              },
              "end": {
                "row": 191,
                "column": 3
              },
              "text": "function cacheState() {\n    // This should be the only place in $browser where `history.state` is read.\n    cachedState = getCurrentState();\n    cachedState = isUndefined(cachedState) ? null : cachedState;\n\n    // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n    if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }\n    lastCachedState = cachedState;\n  }",
              "children": [
                {
                  "type": "function",
                  "start": {
                    "row": 181,
                    "column": 2
                  },
                  "end": {
                    "row": 181,
                    "column": 10
                  },
                  "text": "function"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 181,
                    "column": 11
                  },
                  "end": {
                    "row": 181,
                    "column": 21
                  },
                  "text": "cacheState"
                },
                {
                  "type": "formal_parameters",
                  "start": {
                    "row": 181,
                    "column": 21
                  },
                  "end": {
                    "row": 181,
                    "column": 23
                  },
                  "text": "()",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 181,
                        "column": 21
                      },
                      "end": {
                        "row": 181,
                        "column": 22
                      },
                      "text": "("
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 181,
                        "column": 22
                      },
                      "end": {
                        "row": 181,
                        "column": 23
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": "statement_block",
                  "start": {
                    "row": 181,
                    "column": 24
                  },
                  "end": {
                    "row": 191,
                    "column": 3
                  },
                  "text": "{\n    // This should be the only place in $browser where `history.state` is read.\n    cachedState = getCurrentState();\n    cachedState = isUndefined(cachedState) ? null : cachedState;\n\n    // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n    if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }\n    lastCachedState = cachedState;\n  }",
                  "children": [
                    {
                      "type": "{",
                      "start": {
                        "row": 181,
                        "column": 24
                      },
                      "end": {
                        "row": 181,
                        "column": 25
                      },
                      "text": "{"
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 182,
                        "column": 4
                      },
                      "end": {
                        "row": 182,
                        "column": 79
                      },
                      "text": "// This should be the only place in $browser where `history.state` is read."
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 183,
                        "column": 4
                      },
                      "end": {
                        "row": 183,
                        "column": 36
                      },
                      "text": "cachedState = getCurrentState();",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 183,
                            "column": 4
                          },
                          "end": {
                            "row": 183,
                            "column": 35
                          },
                          "text": "cachedState = getCurrentState()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 183,
                                "column": 4
                              },
                              "end": {
                                "row": 183,
                                "column": 15
                              },
                              "text": "cachedState"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 183,
                                "column": 16
                              },
                              "end": {
                                "row": 183,
                                "column": 17
                              },
                              "text": "="
                            },
                            {
                              "type": "call_expression",
                              "start": {
                                "row": 183,
                                "column": 18
                              },
                              "end": {
                                "row": 183,
                                "column": 35
                              },
                              "text": "getCurrentState()",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 183,
                                    "column": 18
                                  },
                                  "end": {
                                    "row": 183,
                                    "column": 33
                                  },
                                  "text": "getCurrentState"
                                },
                                {
                                  "type": "arguments",
                                  "start": {
                                    "row": 183,
                                    "column": 33
                                  },
                                  "end": {
                                    "row": 183,
                                    "column": 35
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 183,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 183,
                                        "column": 34
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 183,
                                        "column": 34
                                      },
                                      "end": {
                                        "row": 183,
                                        "column": 35
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 183,
                            "column": 35
                          },
                          "end": {
                            "row": 183,
                            "column": 36
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 184,
                        "column": 4
                      },
                      "end": {
                        "row": 184,
                        "column": 64
                      },
                      "text": "cachedState = isUndefined(cachedState) ? null : cachedState;",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 184,
                            "column": 4
                          },
                          "end": {
                            "row": 184,
                            "column": 63
                          },
                          "text": "cachedState = isUndefined(cachedState) ? null : cachedState",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 184,
                                "column": 4
                              },
                              "end": {
                                "row": 184,
                                "column": 15
                              },
                              "text": "cachedState"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 184,
                                "column": 16
                              },
                              "end": {
                                "row": 184,
                                "column": 17
                              },
                              "text": "="
                            },
                            {
                              "type": "ternary_expression",
                              "start": {
                                "row": 184,
                                "column": 18
                              },
                              "end": {
                                "row": 184,
                                "column": 63
                              },
                              "text": "isUndefined(cachedState) ? null : cachedState",
                              "children": [
                                {
                                  "type": "call_expression",
                                  "start": {
                                    "row": 184,
                                    "column": 18
                                  },
                                  "end": {
                                    "row": 184,
                                    "column": 42
                                  },
                                  "text": "isUndefined(cachedState)",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 184,
                                        "column": 18
                                      },
                                      "end": {
                                        "row": 184,
                                        "column": 29
                                      },
                                      "text": "isUndefined"
                                    },
                                    {
                                      "type": "arguments",
                                      "start": {
                                        "row": 184,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 184,
                                        "column": 42
                                      },
                                      "text": "(cachedState)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 184,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 184,
                                            "column": 30
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 184,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 184,
                                            "column": 41
                                          },
                                          "text": "cachedState"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 184,
                                            "column": 41
                                          },
                                          "end": {
                                            "row": 184,
                                            "column": 42
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "?",
                                  "start": {
                                    "row": 184,
                                    "column": 43
                                  },
                                  "end": {
                                    "row": 184,
                                    "column": 44
                                  },
                                  "text": "?"
                                },
                                {
                                  "type": "null",
                                  "start": {
                                    "row": 184,
                                    "column": 45
                                  },
                                  "end": {
                                    "row": 184,
                                    "column": 49
                                  },
                                  "text": "null"
                                },
                                {
                                  "type": ":",
                                  "start": {
                                    "row": 184,
                                    "column": 50
                                  },
                                  "end": {
                                    "row": 184,
                                    "column": 51
                                  },
                                  "text": ":"
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 184,
                                    "column": 52
                                  },
                                  "end": {
                                    "row": 184,
                                    "column": 63
                                  },
                                  "text": "cachedState"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 184,
                            "column": 63
                          },
                          "end": {
                            "row": 184,
                            "column": 64
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "comment",
                      "start": {
                        "row": 186,
                        "column": 4
                      },
                      "end": {
                        "row": 186,
                        "column": 80
                      },
                      "text": "// Prevent callbacks fo fire twice if both hashchange & popstate were fired."
                    },
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 187,
                        "column": 4
                      },
                      "end": {
                        "row": 189,
                        "column": 5
                      },
                      "text": "if (equals(cachedState, lastCachedState)) {\n      cachedState = lastCachedState;\n    }",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 187,
                            "column": 4
                          },
                          "end": {
                            "row": 187,
                            "column": 6
                          },
                          "text": "if"
                        },
                        {
                          "type": "parenthesized_expression",
                          "start": {
                            "row": 187,
                            "column": 7
                          },
                          "end": {
                            "row": 187,
                            "column": 45
                          },
                          "text": "(equals(cachedState, lastCachedState))",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 187,
                                "column": 7
                              },
                              "end": {
                                "row": 187,
                                "column": 8
                              },
                              "text": "("
                            },
                            {
                              "type": "call_expression",
                              "start": {
                                "row": 187,
                                "column": 8
                              },
                              "end": {
                                "row": 187,
                                "column": 44
                              },
                              "text": "equals(cachedState, lastCachedState)",
                              "children": [
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 187,
                                    "column": 8
                                  },
                                  "end": {
                                    "row": 187,
                                    "column": 14
                                  },
                                  "text": "equals"
                                },
                                {
                                  "type": "arguments",
                                  "start": {
                                    "row": 187,
                                    "column": 14
                                  },
                                  "end": {
                                    "row": 187,
                                    "column": 44
                                  },
                                  "text": "(cachedState, lastCachedState)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 187,
                                        "column": 14
                                      },
                                      "end": {
                                        "row": 187,
                                        "column": 15
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 187,
                                        "column": 15
                                      },
                                      "end": {
                                        "row": 187,
                                        "column": 26
                                      },
                                      "text": "cachedState"
                                    },
                                    {
                                      "type": ",",
                                      "start": {
                                        "row": 187,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 187,
                                        "column": 27
                                      },
                                      "text": ","
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 187,
                                        "column": 28
                                      },
                                      "end": {
                                        "row": 187,
                                        "column": 43
                                      },
                                      "text": "lastCachedState"
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 187,
                                        "column": 43
                                      },
                                      "end": {
                                        "row": 187,
                                        "column": 44
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 187,
                                "column": 44
                              },
                              "end": {
                                "row": 187,
                                "column": 45
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 187,
                            "column": 46
                          },
                          "end": {
                            "row": 189,
                            "column": 5
                          },
                          "text": "{\n      cachedState = lastCachedState;\n    }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 187,
                                "column": 46
                              },
                              "end": {
                                "row": 187,
                                "column": 47
                              },
                              "text": "{"
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 188,
                                "column": 6
                              },
                              "end": {
                                "row": 188,
                                "column": 36
                              },
                              "text": "cachedState = lastCachedState;",
                              "children": [
                                {
                                  "type": "assignment_expression",
                                  "start": {
                                    "row": 188,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 188,
                                    "column": 35
                                  },
                                  "text": "cachedState = lastCachedState",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 188,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 188,
                                        "column": 17
                                      },
                                      "text": "cachedState"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 188,
                                        "column": 18
                                      },
                                      "end": {
                                        "row": 188,
                                        "column": 19
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 188,
                                        "column": 20
                                      },
                                      "end": {
                                        "row": 188,
                                        "column": 35
                                      },
                                      "text": "lastCachedState"
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 188,
                                    "column": 35
                                  },
                                  "end": {
                                    "row": 188,
                                    "column": 36
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 189,
                                "column": 4
                              },
                              "end": {
                                "row": 189,
                                "column": 5
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 190,
                        "column": 4
                      },
                      "end": {
                        "row": 190,
                        "column": 34
                      },
                      "text": "lastCachedState = cachedState;",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 190,
                            "column": 4
                          },
                          "end": {
                            "row": 190,
                            "column": 33
                          },
                          "text": "lastCachedState = cachedState",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 190,
                                "column": 4
                              },
                              "end": {
                                "row": 190,
                                "column": 19
                              },
                              "text": "lastCachedState"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 190,
                                "column": 20
                              },
                              "end": {
                                "row": 190,
                                "column": 21
                              },
                              "text": "="
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 190,
                                "column": 22
                              },
                              "end": {
                                "row": 190,
                                "column": 33
                              },
                              "text": "cachedState"
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 190,
                            "column": 33
                          },
                          "end": {
                            "row": 190,
                            "column": 34
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "}",
                      "start": {
                        "row": 191,
                        "column": 2
                      },
                      "end": {
                        "row": 191,
                        "column": 3
                      },
                      "text": "}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "function_declaration",
              "start": {
                "row": 193,
                "column": 2
              },
              "end": {
                "row": 203,
                "column": 3
              },
              "text": "function fireUrlChange() {\n    if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }\n\n    lastBrowserUrl = self.url();\n    lastHistoryState = cachedState;\n    forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });\n  }",
              "children": [
                {
                  "type": "function",
                  "start": {
                    "row": 193,
                    "column": 2
                  },
                  "end": {
                    "row": 193,
                    "column": 10
                  },
                  "text": "function"
                },
                {
                  "type": "identifier",
                  "start": {
                    "row": 193,
                    "column": 11
                  },
                  "end": {
                    "row": 193,
                    "column": 24
                  },
                  "text": "fireUrlChange"
                },
                {
                  "type": "formal_parameters",
                  "start": {
                    "row": 193,
                    "column": 24
                  },
                  "end": {
                    "row": 193,
                    "column": 26
                  },
                  "text": "()",
                  "children": [
                    {
                      "type": "(",
                      "start": {
                        "row": 193,
                        "column": 24
                      },
                      "end": {
                        "row": 193,
                        "column": 25
                      },
                      "text": "("
                    },
                    {
                      "type": ")",
                      "start": {
                        "row": 193,
                        "column": 25
                      },
                      "end": {
                        "row": 193,
                        "column": 26
                      },
                      "text": ")"
                    }
                  ]
                },
                {
                  "type": "statement_block",
                  "start": {
                    "row": 193,
                    "column": 27
                  },
                  "end": {
                    "row": 203,
                    "column": 3
                  },
                  "text": "{\n    if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }\n\n    lastBrowserUrl = self.url();\n    lastHistoryState = cachedState;\n    forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });\n  }",
                  "children": [
                    {
                      "type": "{",
                      "start": {
                        "row": 193,
                        "column": 27
                      },
                      "end": {
                        "row": 193,
                        "column": 28
                      },
                      "text": "{"
                    },
                    {
                      "type": "if_statement",
                      "start": {
                        "row": 194,
                        "column": 4
                      },
                      "end": {
                        "row": 196,
                        "column": 5
                      },
                      "text": "if (lastBrowserUrl === self.url() && lastHistoryState === cachedState) {\n      return;\n    }",
                      "children": [
                        {
                          "type": "if",
                          "start": {
                            "row": 194,
                            "column": 4
                          },
                          "end": {
                            "row": 194,
                            "column": 6
                          },
                          "text": "if"
                        },
                        {
                          "type": "parenthesized_expression",
                          "start": {
                            "row": 194,
                            "column": 7
                          },
                          "end": {
                            "row": 194,
                            "column": 74
                          },
                          "text": "(lastBrowserUrl === self.url() && lastHistoryState === cachedState)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 194,
                                "column": 7
                              },
                              "end": {
                                "row": 194,
                                "column": 8
                              },
                              "text": "("
                            },
                            {
                              "type": "binary_expression",
                              "start": {
                                "row": 194,
                                "column": 8
                              },
                              "end": {
                                "row": 194,
                                "column": 73
                              },
                              "text": "lastBrowserUrl === self.url() && lastHistoryState === cachedState",
                              "children": [
                                {
                                  "type": "binary_expression",
                                  "start": {
                                    "row": 194,
                                    "column": 8
                                  },
                                  "end": {
                                    "row": 194,
                                    "column": 37
                                  },
                                  "text": "lastBrowserUrl === self.url()",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 194,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 22
                                      },
                                      "text": "lastBrowserUrl"
                                    },
                                    {
                                      "type": "===",
                                      "start": {
                                        "row": 194,
                                        "column": 23
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 26
                                      },
                                      "text": "==="
                                    },
                                    {
                                      "type": "call_expression",
                                      "start": {
                                        "row": 194,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 37
                                      },
                                      "text": "self.url()",
                                      "children": [
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 194,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 194,
                                            "column": 35
                                          },
                                          "text": "self.url",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 194,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 194,
                                                "column": 31
                                              },
                                              "text": "self"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 194,
                                                "column": 31
                                              },
                                              "end": {
                                                "row": 194,
                                                "column": 32
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 194,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 194,
                                                "column": 35
                                              },
                                              "text": "url"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "arguments",
                                          "start": {
                                            "row": 194,
                                            "column": 35
                                          },
                                          "end": {
                                            "row": 194,
                                            "column": 37
                                          },
                                          "text": "()",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 194,
                                                "column": 35
                                              },
                                              "end": {
                                                "row": 194,
                                                "column": 36
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 194,
                                                "column": 36
                                              },
                                              "end": {
                                                "row": 194,
                                                "column": 37
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "&&",
                                  "start": {
                                    "row": 194,
                                    "column": 38
                                  },
                                  "end": {
                                    "row": 194,
                                    "column": 40
                                  },
                                  "text": "&&"
                                },
                                {
                                  "type": "binary_expression",
                                  "start": {
                                    "row": 194,
                                    "column": 41
                                  },
                                  "end": {
                                    "row": 194,
                                    "column": 73
                                  },
                                  "text": "lastHistoryState === cachedState",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 194,
                                        "column": 41
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 57
                                      },
                                      "text": "lastHistoryState"
                                    },
                                    {
                                      "type": "===",
                                      "start": {
                                        "row": 194,
                                        "column": 58
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 61
                                      },
                                      "text": "==="
                                    },
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 194,
                                        "column": 62
                                      },
                                      "end": {
                                        "row": 194,
                                        "column": 73
                                      },
                                      "text": "cachedState"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 194,
                                "column": 73
                              },
                              "end": {
                                "row": 194,
                                "column": 74
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 194,
                            "column": 75
                          },
                          "end": {
                            "row": 196,
                            "column": 5
                          },
                          "text": "{\n      return;\n    }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 194,
                                "column": 75
                              },
                              "end": {
                                "row": 194,
                                "column": 76
                              },
                              "text": "{"
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 195,
                                "column": 6
                              },
                              "end": {
                                "row": 195,
                                "column": 13
                              },
                              "text": "return;",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 195,
                                    "column": 6
                                  },
                                  "end": {
                                    "row": 195,
                                    "column": 12
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 195,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 195,
                                    "column": 13
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 196,
                                "column": 4
                              },
                              "end": {
                                "row": 196,
                                "column": 5
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 198,
                        "column": 4
                      },
                      "end": {
                        "row": 198,
                        "column": 32
                      },
                      "text": "lastBrowserUrl = self.url();",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 198,
                            "column": 4
                          },
                          "end": {
                            "row": 198,
                            "column": 31
                          },
                          "text": "lastBrowserUrl = self.url()",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 198,
                                "column": 4
                              },
                              "end": {
                                "row": 198,
                                "column": 18
                              },
                              "text": "lastBrowserUrl"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 198,
                                "column": 19
                              },
                              "end": {
                                "row": 198,
                                "column": 20
                              },
                              "text": "="
                            },
                            {
                              "type": "call_expression",
                              "start": {
                                "row": 198,
                                "column": 21
                              },
                              "end": {
                                "row": 198,
                                "column": 31
                              },
                              "text": "self.url()",
                              "children": [
                                {
                                  "type": "member_expression",
                                  "start": {
                                    "row": 198,
                                    "column": 21
                                  },
                                  "end": {
                                    "row": 198,
                                    "column": 29
                                  },
                                  "text": "self.url",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 198,
                                        "column": 21
                                      },
                                      "end": {
                                        "row": 198,
                                        "column": 25
                                      },
                                      "text": "self"
                                    },
                                    {
                                      "type": ".",
                                      "start": {
                                        "row": 198,
                                        "column": 25
                                      },
                                      "end": {
                                        "row": 198,
                                        "column": 26
                                      },
                                      "text": "."
                                    },
                                    {
                                      "type": "property_identifier",
                                      "start": {
                                        "row": 198,
                                        "column": 26
                                      },
                                      "end": {
                                        "row": 198,
                                        "column": 29
                                      },
                                      "text": "url"
                                    }
                                  ]
                                },
                                {
                                  "type": "arguments",
                                  "start": {
                                    "row": 198,
                                    "column": 29
                                  },
                                  "end": {
                                    "row": 198,
                                    "column": 31
                                  },
                                  "text": "()",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 198,
                                        "column": 29
                                      },
                                      "end": {
                                        "row": 198,
                                        "column": 30
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 198,
                                        "column": 30
                                      },
                                      "end": {
                                        "row": 198,
                                        "column": 31
                                      },
                                      "text": ")"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 198,
                            "column": 31
                          },
                          "end": {
                            "row": 198,
                            "column": 32
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 199,
                        "column": 4
                      },
                      "end": {
                        "row": 199,
                        "column": 35
                      },
                      "text": "lastHistoryState = cachedState;",
                      "children": [
                        {
                          "type": "assignment_expression",
                          "start": {
                            "row": 199,
                            "column": 4
                          },
                          "end": {
                            "row": 199,
                            "column": 34
                          },
                          "text": "lastHistoryState = cachedState",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 199,
                                "column": 4
                              },
                              "end": {
                                "row": 199,
                                "column": 20
                              },
                              "text": "lastHistoryState"
                            },
                            {
                              "type": "=",
                              "start": {
                                "row": 199,
                                "column": 21
                              },
                              "end": {
                                "row": 199,
                                "column": 22
                              },
                              "text": "="
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 199,
                                "column": 23
                              },
                              "end": {
                                "row": 199,
                                "column": 34
                              },
                              "text": "cachedState"
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 199,
                            "column": 34
                          },
                          "end": {
                            "row": 199,
                            "column": 35
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "expression_statement",
                      "start": {
                        "row": 200,
                        "column": 4
                      },
                      "end": {
                        "row": 202,
                        "column": 7
                      },
                      "text": "forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    });",
                      "children": [
                        {
                          "type": "call_expression",
                          "start": {
                            "row": 200,
                            "column": 4
                          },
                          "end": {
                            "row": 202,
                            "column": 6
                          },
                          "text": "forEach(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    })",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 200,
                                "column": 4
                              },
                              "end": {
                                "row": 200,
                                "column": 11
                              },
                              "text": "forEach"
                            },
                            {
                              "type": "arguments",
                              "start": {
                                "row": 200,
                                "column": 11
                              },
                              "end": {
                                "row": 202,
                                "column": 6
                              },
                              "text": "(urlChangeListeners, function(listener) {\n      listener(self.url(), cachedState);\n    })",
                              "children": [
                                {
                                  "type": "(",
                                  "start": {
                                    "row": 200,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 200,
                                    "column": 12
                                  },
                                  "text": "("
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 200,
                                    "column": 12
                                  },
                                  "end": {
                                    "row": 200,
                                    "column": 30
                                  },
                                  "text": "urlChangeListeners"
                                },
                                {
                                  "type": ",",
                                  "start": {
                                    "row": 200,
                                    "column": 30
                                  },
                                  "end": {
                                    "row": 200,
                                    "column": 31
                                  },
                                  "text": ","
                                },
                                {
                                  "type": "function",
                                  "start": {
                                    "row": 200,
                                    "column": 32
                                  },
                                  "end": {
                                    "row": 202,
                                    "column": 5
                                  },
                                  "text": "function(listener) {\n      listener(self.url(), cachedState);\n    }",
                                  "children": [
                                    {
                                      "type": "function",
                                      "start": {
                                        "row": 200,
                                        "column": 32
                                      },
                                      "end": {
                                        "row": 200,
                                        "column": 40
                                      },
                                      "text": "function"
                                    },
                                    {
                                      "type": "formal_parameters",
                                      "start": {
                                        "row": 200,
                                        "column": 40
                                      },
                                      "end": {
                                        "row": 200,
                                        "column": 50
                                      },
                                      "text": "(listener)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 200,
                                            "column": 40
                                          },
                                          "end": {
                                            "row": 200,
                                            "column": 41
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 200,
                                            "column": 41
                                          },
                                          "end": {
                                            "row": 200,
                                            "column": 49
                                          },
                                          "text": "listener"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 200,
                                            "column": 49
                                          },
                                          "end": {
                                            "row": 200,
                                            "column": 50
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "statement_block",
                                      "start": {
                                        "row": 200,
                                        "column": 51
                                      },
                                      "end": {
                                        "row": 202,
                                        "column": 5
                                      },
                                      "text": "{\n      listener(self.url(), cachedState);\n    }",
                                      "children": [
                                        {
                                          "type": "{",
                                          "start": {
                                            "row": 200,
                                            "column": 51
                                          },
                                          "end": {
                                            "row": 200,
                                            "column": 52
                                          },
                                          "text": "{"
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 201,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 201,
                                            "column": 40
                                          },
                                          "text": "listener(self.url(), cachedState);",
                                          "children": [
                                            {
                                              "type": "call_expression",
                                              "start": {
                                                "row": 201,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 201,
                                                "column": 39
                                              },
                                              "text": "listener(self.url(), cachedState)",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 201,
                                                    "column": 6
                                                  },
                                                  "end": {
                                                    "row": 201,
                                                    "column": 14
                                                  },
                                                  "text": "listener"
                                                },
                                                {
                                                  "type": "arguments",
                                                  "start": {
                                                    "row": 201,
                                                    "column": 14
                                                  },
                                                  "end": {
                                                    "row": 201,
                                                    "column": 39
                                                  },
                                                  "text": "(self.url(), cachedState)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 201,
                                                        "column": 14
                                                      },
                                                      "end": {
                                                        "row": 201,
                                                        "column": 15
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "call_expression",
                                                      "start": {
                                                        "row": 201,
                                                        "column": 15
                                                      },
                                                      "end": {
                                                        "row": 201,
                                                        "column": 25
                                                      },
                                                      "text": "self.url()",
                                                      "children": [
                                                        {
                                                          "type": "member_expression",
                                                          "start": {
                                                            "row": 201,
                                                            "column": 15
                                                          },
                                                          "end": {
                                                            "row": 201,
                                                            "column": 23
                                                          },
                                                          "text": "self.url",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 201,
                                                                "column": 15
                                                              },
                                                              "end": {
                                                                "row": 201,
                                                                "column": 19
                                                              },
                                                              "text": "self"
                                                            },
                                                            {
                                                              "type": ".",
                                                              "start": {
                                                                "row": 201,
                                                                "column": 19
                                                              },
                                                              "end": {
                                                                "row": 201,
                                                                "column": 20
                                                              },
                                                              "text": "."
                                                            },
                                                            {
                                                              "type": "property_identifier",
                                                              "start": {
                                                                "row": 201,
                                                                "column": 20
                                                              },
                                                              "end": {
                                                                "row": 201,
                                                                "column": 23
                                                              },
                                                              "text": "url"
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": "arguments",
                                                          "start": {
                                                            "row": 201,
                                                            "column": 23
                                                          },
                                                          "end": {
                                                            "row": 201,
                                                            "column": 25
                                                          },
                                                          "text": "()",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 201,
                                                                "column": 23
                                                              },
                                                              "end": {
                                                                "row": 201,
                                                                "column": 24
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 201,
                                                                "column": 24
                                                              },
                                                              "end": {
                                                                "row": 201,
                                                                "column": 25
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ",",
                                                      "start": {
                                                        "row": 201,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 201,
                                                        "column": 26
                                                      },
                                                      "text": ","
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 201,
                                                        "column": 27
                                                      },
                                                      "end": {
                                                        "row": 201,
                                                        "column": 38
                                                      },
                                                      "text": "cachedState"
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 201,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 201,
                                                        "column": 39
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ";",
                                              "start": {
                                                "row": 201,
                                                "column": 39
                                              },
                                              "end": {
                                                "row": 201,
                                                "column": 40
                                              },
                                              "text": ";"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "}",
                                          "start": {
                                            "row": 202,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 202,
                                            "column": 5
                                          },
                                          "text": "}"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ")",
                                  "start": {
                                    "row": 202,
                                    "column": 5
                                  },
                                  "end": {
                                    "row": 202,
                                    "column": 6
                                  },
                                  "text": ")"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": ";",
                          "start": {
                            "row": 202,
                            "column": 6
                          },
                          "end": {
                            "row": 202,
                            "column": 7
                          },
                          "text": ";"
                        }
                      ]
                    },
                    {
                      "type": "}",
                      "start": {
                        "row": 203,
                        "column": 2
                      },
                      "end": {
                        "row": 203,
                        "column": 3
                      },
                      "text": "}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 205,
                "column": 2
              },
              "end": {
                "row": 225,
                "column": 5
              },
              "text": "/**\n   * @name $browser#onUrlChange\n   *\n   * @description\n   * Register callback function that will be called, when url changes.\n   *\n   * It's only called when the url is changed from outside of angular:\n   * - user types different url into address bar\n   * - user clicks on history (forward/back) button\n   * - user clicks on a link\n   *\n   * It's not called when url is changed by $browser.url() method\n   *\n   * The listener gets called with new url as parameter.\n   *\n   * NOTE: this api is intended for use only by the $location service. Please use the\n   * {@link ng.$location $location service} to monitor url changes in angular apps.\n   *\n   * @param {function(string)} listener Listener function to be called when url changes.\n   * @return {function(string)} Returns the registered listener fn - handy if the fn is anonymous.\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 226,
                "column": 2
              },
              "end": {
                "row": 243,
                "column": 4
              },
              "text": "self.onUrlChange = function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 226,
                    "column": 2
                  },
                  "end": {
                    "row": 243,
                    "column": 3
                  },
                  "text": "self.onUrlChange = function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 226,
                        "column": 2
                      },
                      "end": {
                        "row": 226,
                        "column": 18
                      },
                      "text": "self.onUrlChange",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 226,
                            "column": 2
                          },
                          "end": {
                            "row": 226,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 226,
                            "column": 6
                          },
                          "end": {
                            "row": 226,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 226,
                            "column": 7
                          },
                          "end": {
                            "row": 226,
                            "column": 18
                          },
                          "text": "onUrlChange"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 226,
                        "column": 19
                      },
                      "end": {
                        "row": 226,
                        "column": 20
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 226,
                        "column": 21
                      },
                      "end": {
                        "row": 243,
                        "column": 3
                      },
                      "text": "function(callback) {\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 226,
                            "column": 21
                          },
                          "end": {
                            "row": 226,
                            "column": 29
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 226,
                            "column": 29
                          },
                          "end": {
                            "row": 226,
                            "column": 39
                          },
                          "text": "(callback)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 226,
                                "column": 29
                              },
                              "end": {
                                "row": 226,
                                "column": 30
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 226,
                                "column": 30
                              },
                              "end": {
                                "row": 226,
                                "column": 38
                              },
                              "text": "callback"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 226,
                                "column": 38
                              },
                              "end": {
                                "row": 226,
                                "column": 39
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 226,
                            "column": 40
                          },
                          "end": {
                            "row": 243,
                            "column": 3
                          },
                          "text": "{\n    // TODO(vojta): refactor to use node's syntax for events\n    if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }\n\n    urlChangeListeners.push(callback);\n    return callback;\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 226,
                                "column": 40
                              },
                              "end": {
                                "row": 226,
                                "column": 41
                              },
                              "text": "{"
                            },
                            {
                              "type": "comment",
                              "start": {
                                "row": 227,
                                "column": 4
                              },
                              "end": {
                                "row": 227,
                                "column": 60
                              },
                              "text": "// TODO(vojta): refactor to use node's syntax for events"
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 228,
                                "column": 4
                              },
                              "end": {
                                "row": 239,
                                "column": 5
                              },
                              "text": "if (!urlChangeInit) {\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 228,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 228,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 228,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 228,
                                    "column": 23
                                  },
                                  "text": "(!urlChangeInit)",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 228,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 228,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "unary_expression",
                                      "start": {
                                        "row": 228,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 228,
                                        "column": 22
                                      },
                                      "text": "!urlChangeInit",
                                      "children": [
                                        {
                                          "type": "!",
                                          "start": {
                                            "row": 228,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 228,
                                            "column": 9
                                          },
                                          "text": "!"
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 228,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 228,
                                            "column": 22
                                          },
                                          "text": "urlChangeInit"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 228,
                                        "column": 22
                                      },
                                      "end": {
                                        "row": 228,
                                        "column": 23
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "statement_block",
                                  "start": {
                                    "row": 228,
                                    "column": 24
                                  },
                                  "end": {
                                    "row": 239,
                                    "column": 5
                                  },
                                  "text": "{\n      // We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)\n      // don't fire popstate when user change the address bar and don't fire hashchange when url\n      // changed by push/replaceState\n\n      // html5 history api - popstate event\n      if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);\n      // hashchange event\n      jqLite(window).on('hashchange', cacheStateAndFireUrlChange);\n\n      urlChangeInit = true;\n    }",
                                  "children": [
                                    {
                                      "type": "{",
                                      "start": {
                                        "row": 228,
                                        "column": 24
                                      },
                                      "end": {
                                        "row": 228,
                                        "column": 25
                                      },
                                      "text": "{"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 229,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 229,
                                        "column": 94
                                      },
                                      "text": "// We listen on both (hashchange/popstate) when available, as some browsers (e.g. Opera)"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 230,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 230,
                                        "column": 96
                                      },
                                      "text": "// don't fire popstate when user change the address bar and don't fire hashchange when url"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 231,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 231,
                                        "column": 37
                                      },
                                      "text": "// changed by push/replaceState"
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 233,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 233,
                                        "column": 43
                                      },
                                      "text": "// html5 history api - popstate event"
                                    },
                                    {
                                      "type": "if_statement",
                                      "start": {
                                        "row": 234,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 234,
                                        "column": 86
                                      },
                                      "text": "if ($sniffer.history) jqLite(window).on('popstate', cacheStateAndFireUrlChange);",
                                      "children": [
                                        {
                                          "type": "if",
                                          "start": {
                                            "row": 234,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 234,
                                            "column": 8
                                          },
                                          "text": "if"
                                        },
                                        {
                                          "type": "parenthesized_expression",
                                          "start": {
                                            "row": 234,
                                            "column": 9
                                          },
                                          "end": {
                                            "row": 234,
                                            "column": 27
                                          },
                                          "text": "($sniffer.history)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 234,
                                                "column": 9
                                              },
                                              "end": {
                                                "row": 234,
                                                "column": 10
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "member_expression",
                                              "start": {
                                                "row": 234,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 234,
                                                "column": 26
                                              },
                                              "text": "$sniffer.history",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 234,
                                                    "column": 10
                                                  },
                                                  "end": {
                                                    "row": 234,
                                                    "column": 18
                                                  },
                                                  "text": "$sniffer"
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 234,
                                                    "column": 18
                                                  },
                                                  "end": {
                                                    "row": 234,
                                                    "column": 19
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "property_identifier",
                                                  "start": {
                                                    "row": 234,
                                                    "column": 19
                                                  },
                                                  "end": {
                                                    "row": 234,
                                                    "column": 26
                                                  },
                                                  "text": "history"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 234,
                                                "column": 26
                                              },
                                              "end": {
                                                "row": 234,
                                                "column": 27
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "expression_statement",
                                          "start": {
                                            "row": 234,
                                            "column": 28
                                          },
                                          "end": {
                                            "row": 234,
                                            "column": 86
                                          },
                                          "text": "jqLite(window).on('popstate', cacheStateAndFireUrlChange);",
                                          "children": [
                                            {
                                              "type": "call_expression",
                                              "start": {
                                                "row": 234,
                                                "column": 28
                                              },
                                              "end": {
                                                "row": 234,
                                                "column": 85
                                              },
                                              "text": "jqLite(window).on('popstate', cacheStateAndFireUrlChange)",
                                              "children": [
                                                {
                                                  "type": "member_expression",
                                                  "start": {
                                                    "row": 234,
                                                    "column": 28
                                                  },
                                                  "end": {
                                                    "row": 234,
                                                    "column": 45
                                                  },
                                                  "text": "jqLite(window).on",
                                                  "children": [
                                                    {
                                                      "type": "call_expression",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 28
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 42
                                                      },
                                                      "text": "jqLite(window)",
                                                      "children": [
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 234,
                                                            "column": 28
                                                          },
                                                          "end": {
                                                            "row": 234,
                                                            "column": 34
                                                          },
                                                          "text": "jqLite"
                                                        },
                                                        {
                                                          "type": "arguments",
                                                          "start": {
                                                            "row": 234,
                                                            "column": 34
                                                          },
                                                          "end": {
                                                            "row": 234,
                                                            "column": 42
                                                          },
                                                          "text": "(window)",
                                                          "children": [
                                                            {
                                                              "type": "(",
                                                              "start": {
                                                                "row": 234,
                                                                "column": 34
                                                              },
                                                              "end": {
                                                                "row": 234,
                                                                "column": 35
                                                              },
                                                              "text": "("
                                                            },
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 234,
                                                                "column": 35
                                                              },
                                                              "end": {
                                                                "row": 234,
                                                                "column": 41
                                                              },
                                                              "text": "window"
                                                            },
                                                            {
                                                              "type": ")",
                                                              "start": {
                                                                "row": 234,
                                                                "column": 41
                                                              },
                                                              "end": {
                                                                "row": 234,
                                                                "column": 42
                                                              },
                                                              "text": ")"
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ".",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 42
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 43
                                                      },
                                                      "text": "."
                                                    },
                                                    {
                                                      "type": "property_identifier",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 43
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 45
                                                      },
                                                      "text": "on"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "arguments",
                                                  "start": {
                                                    "row": 234,
                                                    "column": 45
                                                  },
                                                  "end": {
                                                    "row": 234,
                                                    "column": 85
                                                  },
                                                  "text": "('popstate', cacheStateAndFireUrlChange)",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 45
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 46
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": "string",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 46
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 56
                                                      },
                                                      "text": "'popstate'",
                                                      "children": [
                                                        {
                                                          "type": "'",
                                                          "start": {
                                                            "row": 234,
                                                            "column": 46
                                                          },
                                                          "end": {
                                                            "row": 234,
                                                            "column": 47
                                                          },
                                                          "text": "'"
                                                        },
                                                        {
                                                          "type": "string_fragment",
                                                          "start": {
                                                            "row": 234,
                                                            "column": 47
                                                          },
                                                          "end": {
                                                            "row": 234,
                                                            "column": 55
                                                          },
                                                          "text": "popstate"
                                                        },
                                                        {
                                                          "type": "'",
                                                          "start": {
                                                            "row": 234,
                                                            "column": 55
                                                          },
                                                          "end": {
                                                            "row": 234,
                                                            "column": 56
                                                          },
                                                          "text": "'"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": ",",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 56
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 57
                                                      },
                                                      "text": ","
                                                    },
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 58
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 84
                                                      },
                                                      "text": "cacheStateAndFireUrlChange"
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 234,
                                                        "column": 84
                                                      },
                                                      "end": {
                                                        "row": 234,
                                                        "column": 85
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ";",
                                              "start": {
                                                "row": 234,
                                                "column": 85
                                              },
                                              "end": {
                                                "row": 234,
                                                "column": 86
                                              },
                                              "text": ";"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": "comment",
                                      "start": {
                                        "row": 235,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 235,
                                        "column": 25
                                      },
                                      "text": "// hashchange event"
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 236,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 236,
                                        "column": 66
                                      },
                                      "text": "jqLite(window).on('hashchange', cacheStateAndFireUrlChange);",
                                      "children": [
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 236,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 236,
                                            "column": 65
                                          },
                                          "text": "jqLite(window).on('hashchange', cacheStateAndFireUrlChange)",
                                          "children": [
                                            {
                                              "type": "member_expression",
                                              "start": {
                                                "row": 236,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 236,
                                                "column": 23
                                              },
                                              "text": "jqLite(window).on",
                                              "children": [
                                                {
                                                  "type": "call_expression",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 6
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 20
                                                  },
                                                  "text": "jqLite(window)",
                                                  "children": [
                                                    {
                                                      "type": "identifier",
                                                      "start": {
                                                        "row": 236,
                                                        "column": 6
                                                      },
                                                      "end": {
                                                        "row": 236,
                                                        "column": 12
                                                      },
                                                      "text": "jqLite"
                                                    },
                                                    {
                                                      "type": "arguments",
                                                      "start": {
                                                        "row": 236,
                                                        "column": 12
                                                      },
                                                      "end": {
                                                        "row": 236,
                                                        "column": 20
                                                      },
                                                      "text": "(window)",
                                                      "children": [
                                                        {
                                                          "type": "(",
                                                          "start": {
                                                            "row": 236,
                                                            "column": 12
                                                          },
                                                          "end": {
                                                            "row": 236,
                                                            "column": 13
                                                          },
                                                          "text": "("
                                                        },
                                                        {
                                                          "type": "identifier",
                                                          "start": {
                                                            "row": 236,
                                                            "column": 13
                                                          },
                                                          "end": {
                                                            "row": 236,
                                                            "column": 19
                                                          },
                                                          "text": "window"
                                                        },
                                                        {
                                                          "type": ")",
                                                          "start": {
                                                            "row": 236,
                                                            "column": 19
                                                          },
                                                          "end": {
                                                            "row": 236,
                                                            "column": 20
                                                          },
                                                          "text": ")"
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ".",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 20
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 21
                                                  },
                                                  "text": "."
                                                },
                                                {
                                                  "type": "property_identifier",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 21
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 23
                                                  },
                                                  "text": "on"
                                                }
                                              ]
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 236,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 236,
                                                "column": 65
                                              },
                                              "text": "('hashchange', cacheStateAndFireUrlChange)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 23
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 24
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "string",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 24
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 36
                                                  },
                                                  "text": "'hashchange'",
                                                  "children": [
                                                    {
                                                      "type": "'",
                                                      "start": {
                                                        "row": 236,
                                                        "column": 24
                                                      },
                                                      "end": {
                                                        "row": 236,
                                                        "column": 25
                                                      },
                                                      "text": "'"
                                                    },
                                                    {
                                                      "type": "string_fragment",
                                                      "start": {
                                                        "row": 236,
                                                        "column": 25
                                                      },
                                                      "end": {
                                                        "row": 236,
                                                        "column": 35
                                                      },
                                                      "text": "hashchange"
                                                    },
                                                    {
                                                      "type": "'",
                                                      "start": {
                                                        "row": 236,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 236,
                                                        "column": 36
                                                      },
                                                      "text": "'"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": ",",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 36
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 37
                                                  },
                                                  "text": ","
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 64
                                                  },
                                                  "text": "cacheStateAndFireUrlChange"
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 236,
                                                    "column": 64
                                                  },
                                                  "end": {
                                                    "row": 236,
                                                    "column": 65
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 236,
                                            "column": 65
                                          },
                                          "end": {
                                            "row": 236,
                                            "column": 66
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 238,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 238,
                                        "column": 27
                                      },
                                      "text": "urlChangeInit = true;",
                                      "children": [
                                        {
                                          "type": "assignment_expression",
                                          "start": {
                                            "row": 238,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 238,
                                            "column": 26
                                          },
                                          "text": "urlChangeInit = true",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 238,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 238,
                                                "column": 19
                                              },
                                              "text": "urlChangeInit"
                                            },
                                            {
                                              "type": "=",
                                              "start": {
                                                "row": 238,
                                                "column": 20
                                              },
                                              "end": {
                                                "row": 238,
                                                "column": 21
                                              },
                                              "text": "="
                                            },
                                            {
                                              "type": "true",
                                              "start": {
                                                "row": 238,
                                                "column": 22
                                              },
                                              "end": {
                                                "row": 238,
                                                "column": 26
                                              },
                                              "text": "true"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 238,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 238,
                                            "column": 27
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "}",
                                      "start": {
                                        "row": 239,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 239,
                                        "column": 5
                                      },
                                      "text": "}"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 241,
                                "column": 4
                              },
                              "end": {
                                "row": 241,
                                "column": 38
                              },
                              "text": "urlChangeListeners.push(callback);",
                              "children": [
                                {
                                  "type": "call_expression",
                                  "start": {
                                    "row": 241,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 241,
                                    "column": 37
                                  },
                                  "text": "urlChangeListeners.push(callback)",
                                  "children": [
                                    {
                                      "type": "member_expression",
                                      "start": {
                                        "row": 241,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 241,
                                        "column": 27
                                      },
                                      "text": "urlChangeListeners.push",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 241,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 22
                                          },
                                          "text": "urlChangeListeners"
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 241,
                                            "column": 22
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 23
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "property_identifier",
                                          "start": {
                                            "row": 241,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 27
                                          },
                                          "text": "push"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "arguments",
                                      "start": {
                                        "row": 241,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 241,
                                        "column": 37
                                      },
                                      "text": "(callback)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 241,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 28
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 241,
                                            "column": 28
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 36
                                          },
                                          "text": "callback"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 241,
                                            "column": 36
                                          },
                                          "end": {
                                            "row": 241,
                                            "column": 37
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 241,
                                    "column": 37
                                  },
                                  "end": {
                                    "row": 241,
                                    "column": 38
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 242,
                                "column": 4
                              },
                              "end": {
                                "row": 242,
                                "column": 20
                              },
                              "text": "return callback;",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 242,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 242,
                                    "column": 10
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 242,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 242,
                                    "column": 19
                                  },
                                  "text": "callback"
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 242,
                                    "column": 19
                                  },
                                  "end": {
                                    "row": 242,
                                    "column": 20
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 243,
                                "column": 2
                              },
                              "end": {
                                "row": 243,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 243,
                    "column": 3
                  },
                  "end": {
                    "row": 243,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 245,
                "column": 2
              },
              "end": {
                "row": 250,
                "column": 5
              },
              "text": "/**\n   * @private\n   * Remove popstate and hashchange handler from window.\n   *\n   * NOTE: this api is intended for use only by $rootScope.\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 251,
                "column": 2
              },
              "end": {
                "row": 253,
                "column": 4
              },
              "text": "self.$$applicationDestroyed = function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 251,
                    "column": 2
                  },
                  "end": {
                    "row": 253,
                    "column": 3
                  },
                  "text": "self.$$applicationDestroyed = function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 251,
                        "column": 2
                      },
                      "end": {
                        "row": 251,
                        "column": 29
                      },
                      "text": "self.$$applicationDestroyed",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 251,
                            "column": 2
                          },
                          "end": {
                            "row": 251,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 251,
                            "column": 6
                          },
                          "end": {
                            "row": 251,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 251,
                            "column": 7
                          },
                          "end": {
                            "row": 251,
                            "column": 29
                          },
                          "text": "$$applicationDestroyed"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 251,
                        "column": 30
                      },
                      "end": {
                        "row": 251,
                        "column": 31
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 251,
                        "column": 32
                      },
                      "end": {
                        "row": 253,
                        "column": 3
                      },
                      "text": "function() {\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 251,
                            "column": 32
                          },
                          "end": {
                            "row": 251,
                            "column": 40
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 251,
                            "column": 40
                          },
                          "end": {
                            "row": 251,
                            "column": 42
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 251,
                                "column": 40
                              },
                              "end": {
                                "row": 251,
                                "column": 41
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 251,
                                "column": 41
                              },
                              "end": {
                                "row": 251,
                                "column": 42
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 251,
                            "column": 43
                          },
                          "end": {
                            "row": 253,
                            "column": 3
                          },
                          "text": "{\n    jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 251,
                                "column": 43
                              },
                              "end": {
                                "row": 251,
                                "column": 44
                              },
                              "text": "{"
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 252,
                                "column": 4
                              },
                              "end": {
                                "row": 252,
                                "column": 74
                              },
                              "text": "jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange);",
                              "children": [
                                {
                                  "type": "call_expression",
                                  "start": {
                                    "row": 252,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 252,
                                    "column": 73
                                  },
                                  "text": "jqLite(window).off('hashchange popstate', cacheStateAndFireUrlChange)",
                                  "children": [
                                    {
                                      "type": "member_expression",
                                      "start": {
                                        "row": 252,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 252,
                                        "column": 22
                                      },
                                      "text": "jqLite(window).off",
                                      "children": [
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 252,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 18
                                          },
                                          "text": "jqLite(window)",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 252,
                                                "column": 4
                                              },
                                              "end": {
                                                "row": 252,
                                                "column": 10
                                              },
                                              "text": "jqLite"
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 252,
                                                "column": 10
                                              },
                                              "end": {
                                                "row": 252,
                                                "column": 18
                                              },
                                              "text": "(window)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 252,
                                                    "column": 10
                                                  },
                                                  "end": {
                                                    "row": 252,
                                                    "column": 11
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 252,
                                                    "column": 11
                                                  },
                                                  "end": {
                                                    "row": 252,
                                                    "column": 17
                                                  },
                                                  "text": "window"
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 252,
                                                    "column": 17
                                                  },
                                                  "end": {
                                                    "row": 252,
                                                    "column": 18
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ".",
                                          "start": {
                                            "row": 252,
                                            "column": 18
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 19
                                          },
                                          "text": "."
                                        },
                                        {
                                          "type": "property_identifier",
                                          "start": {
                                            "row": 252,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 22
                                          },
                                          "text": "off"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "arguments",
                                      "start": {
                                        "row": 252,
                                        "column": 22
                                      },
                                      "end": {
                                        "row": 252,
                                        "column": 73
                                      },
                                      "text": "('hashchange popstate', cacheStateAndFireUrlChange)",
                                      "children": [
                                        {
                                          "type": "(",
                                          "start": {
                                            "row": 252,
                                            "column": 22
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 23
                                          },
                                          "text": "("
                                        },
                                        {
                                          "type": "string",
                                          "start": {
                                            "row": 252,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 44
                                          },
                                          "text": "'hashchange popstate'",
                                          "children": [
                                            {
                                              "type": "'",
                                              "start": {
                                                "row": 252,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 252,
                                                "column": 24
                                              },
                                              "text": "'"
                                            },
                                            {
                                              "type": "string_fragment",
                                              "start": {
                                                "row": 252,
                                                "column": 24
                                              },
                                              "end": {
                                                "row": 252,
                                                "column": 43
                                              },
                                              "text": "hashchange popstate"
                                            },
                                            {
                                              "type": "'",
                                              "start": {
                                                "row": 252,
                                                "column": 43
                                              },
                                              "end": {
                                                "row": 252,
                                                "column": 44
                                              },
                                              "text": "'"
                                            }
                                          ]
                                        },
                                        {
                                          "type": ",",
                                          "start": {
                                            "row": 252,
                                            "column": 44
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 45
                                          },
                                          "text": ","
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 252,
                                            "column": 46
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 72
                                          },
                                          "text": "cacheStateAndFireUrlChange"
                                        },
                                        {
                                          "type": ")",
                                          "start": {
                                            "row": 252,
                                            "column": 72
                                          },
                                          "end": {
                                            "row": 252,
                                            "column": 73
                                          },
                                          "text": ")"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 252,
                                    "column": 73
                                  },
                                  "end": {
                                    "row": 252,
                                    "column": 74
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 253,
                                "column": 2
                              },
                              "end": {
                                "row": 253,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 253,
                    "column": 3
                  },
                  "end": {
                    "row": 253,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 255,
                "column": 2
              },
              "end": {
                "row": 259,
                "column": 5
              },
              "text": "/**\n   * Checks whether the url has changed outside of Angular.\n   * Needs to be exported to be able to check for changes that have been done in sync,\n   * as hashchange/popstate events fire in async.\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 260,
                "column": 2
              },
              "end": {
                "row": 260,
                "column": 40
              },
              "text": "self.$$checkUrlChange = fireUrlChange;",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 260,
                    "column": 2
                  },
                  "end": {
                    "row": 260,
                    "column": 39
                  },
                  "text": "self.$$checkUrlChange = fireUrlChange",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 260,
                        "column": 2
                      },
                      "end": {
                        "row": 260,
                        "column": 23
                      },
                      "text": "self.$$checkUrlChange",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 260,
                            "column": 2
                          },
                          "end": {
                            "row": 260,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 260,
                            "column": 6
                          },
                          "end": {
                            "row": 260,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 260,
                            "column": 7
                          },
                          "end": {
                            "row": 260,
                            "column": 23
                          },
                          "text": "$$checkUrlChange"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 260,
                        "column": 24
                      },
                      "end": {
                        "row": 260,
                        "column": 25
                      },
                      "text": "="
                    },
                    {
                      "type": "identifier",
                      "start": {
                        "row": 260,
                        "column": 26
                      },
                      "end": {
                        "row": 260,
                        "column": 39
                      },
                      "text": "fireUrlChange"
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 260,
                    "column": 39
                  },
                  "end": {
                    "row": 260,
                    "column": 40
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 262,
                "column": 2
              },
              "end": {
                "row": 262,
                "column": 64
              },
              "text": "//////////////////////////////////////////////////////////////"
            },
            {
              "type": "comment",
              "start": {
                "row": 263,
                "column": 2
              },
              "end": {
                "row": 263,
                "column": 13
              },
              "text": "// Misc API"
            },
            {
              "type": "comment",
              "start": {
                "row": 264,
                "column": 2
              },
              "end": {
                "row": 264,
                "column": 64
              },
              "text": "//////////////////////////////////////////////////////////////"
            },
            {
              "type": "comment",
              "start": {
                "row": 266,
                "column": 2
              },
              "end": {
                "row": 274,
                "column": 5
              },
              "text": "/**\n   * @name $browser#baseHref\n   *\n   * @description\n   * Returns current <base href>\n   * (always relative - without domain)\n   *\n   * @returns {string} The current base href\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 275,
                "column": 2
              },
              "end": {
                "row": 278,
                "column": 4
              },
              "text": "self.baseHref = function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 275,
                    "column": 2
                  },
                  "end": {
                    "row": 278,
                    "column": 3
                  },
                  "text": "self.baseHref = function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 275,
                        "column": 2
                      },
                      "end": {
                        "row": 275,
                        "column": 15
                      },
                      "text": "self.baseHref",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 275,
                            "column": 2
                          },
                          "end": {
                            "row": 275,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 275,
                            "column": 6
                          },
                          "end": {
                            "row": 275,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 275,
                            "column": 7
                          },
                          "end": {
                            "row": 275,
                            "column": 15
                          },
                          "text": "baseHref"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 275,
                        "column": 16
                      },
                      "end": {
                        "row": 275,
                        "column": 17
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 275,
                        "column": 18
                      },
                      "end": {
                        "row": 278,
                        "column": 3
                      },
                      "text": "function() {\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 275,
                            "column": 18
                          },
                          "end": {
                            "row": 275,
                            "column": 26
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 275,
                            "column": 26
                          },
                          "end": {
                            "row": 275,
                            "column": 28
                          },
                          "text": "()",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 275,
                                "column": 26
                              },
                              "end": {
                                "row": 275,
                                "column": 27
                              },
                              "text": "("
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 275,
                                "column": 27
                              },
                              "end": {
                                "row": 275,
                                "column": 28
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 275,
                            "column": 29
                          },
                          "end": {
                            "row": 278,
                            "column": 3
                          },
                          "text": "{\n    var href = baseElement.attr('href');\n    return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 275,
                                "column": 29
                              },
                              "end": {
                                "row": 275,
                                "column": 30
                              },
                              "text": "{"
                            },
                            {
                              "type": "variable_declaration",
                              "start": {
                                "row": 276,
                                "column": 4
                              },
                              "end": {
                                "row": 276,
                                "column": 40
                              },
                              "text": "var href = baseElement.attr('href');",
                              "children": [
                                {
                                  "type": "var",
                                  "start": {
                                    "row": 276,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 276,
                                    "column": 7
                                  },
                                  "text": "var"
                                },
                                {
                                  "type": "variable_declarator",
                                  "start": {
                                    "row": 276,
                                    "column": 8
                                  },
                                  "end": {
                                    "row": 276,
                                    "column": 39
                                  },
                                  "text": "href = baseElement.attr('href')",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 276,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 276,
                                        "column": 12
                                      },
                                      "text": "href"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 276,
                                        "column": 13
                                      },
                                      "end": {
                                        "row": 276,
                                        "column": 14
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "call_expression",
                                      "start": {
                                        "row": 276,
                                        "column": 15
                                      },
                                      "end": {
                                        "row": 276,
                                        "column": 39
                                      },
                                      "text": "baseElement.attr('href')",
                                      "children": [
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 276,
                                            "column": 15
                                          },
                                          "end": {
                                            "row": 276,
                                            "column": 31
                                          },
                                          "text": "baseElement.attr",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 276,
                                                "column": 15
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 26
                                              },
                                              "text": "baseElement"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 276,
                                                "column": 26
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 27
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 276,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 31
                                              },
                                              "text": "attr"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "arguments",
                                          "start": {
                                            "row": 276,
                                            "column": 31
                                          },
                                          "end": {
                                            "row": 276,
                                            "column": 39
                                          },
                                          "text": "('href')",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 276,
                                                "column": 31
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 32
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "string",
                                              "start": {
                                                "row": 276,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 38
                                              },
                                              "text": "'href'",
                                              "children": [
                                                {
                                                  "type": "'",
                                                  "start": {
                                                    "row": 276,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 276,
                                                    "column": 33
                                                  },
                                                  "text": "'"
                                                },
                                                {
                                                  "type": "string_fragment",
                                                  "start": {
                                                    "row": 276,
                                                    "column": 33
                                                  },
                                                  "end": {
                                                    "row": 276,
                                                    "column": 37
                                                  },
                                                  "text": "href"
                                                },
                                                {
                                                  "type": "'",
                                                  "start": {
                                                    "row": 276,
                                                    "column": 37
                                                  },
                                                  "end": {
                                                    "row": 276,
                                                    "column": 38
                                                  },
                                                  "text": "'"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 276,
                                                "column": 38
                                              },
                                              "end": {
                                                "row": 276,
                                                "column": 39
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 276,
                                    "column": 39
                                  },
                                  "end": {
                                    "row": 276,
                                    "column": 40
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 277,
                                "column": 4
                              },
                              "end": {
                                "row": 277,
                                "column": 66
                              },
                              "text": "return href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : '';",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 277,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 277,
                                    "column": 10
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": "ternary_expression",
                                  "start": {
                                    "row": 277,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 277,
                                    "column": 65
                                  },
                                  "text": "href ? href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '') : ''",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 277,
                                        "column": 11
                                      },
                                      "end": {
                                        "row": 277,
                                        "column": 15
                                      },
                                      "text": "href"
                                    },
                                    {
                                      "type": "?",
                                      "start": {
                                        "row": 277,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 277,
                                        "column": 17
                                      },
                                      "text": "?"
                                    },
                                    {
                                      "type": "call_expression",
                                      "start": {
                                        "row": 277,
                                        "column": 18
                                      },
                                      "end": {
                                        "row": 277,
                                        "column": 60
                                      },
                                      "text": "href.replace(/^(https?\\:)?\\/\\/[^\\/]*/, '')",
                                      "children": [
                                        {
                                          "type": "member_expression",
                                          "start": {
                                            "row": 277,
                                            "column": 18
                                          },
                                          "end": {
                                            "row": 277,
                                            "column": 30
                                          },
                                          "text": "href.replace",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 277,
                                                "column": 18
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 22
                                              },
                                              "text": "href"
                                            },
                                            {
                                              "type": ".",
                                              "start": {
                                                "row": 277,
                                                "column": 22
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 23
                                              },
                                              "text": "."
                                            },
                                            {
                                              "type": "property_identifier",
                                              "start": {
                                                "row": 277,
                                                "column": 23
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 30
                                              },
                                              "text": "replace"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "arguments",
                                          "start": {
                                            "row": 277,
                                            "column": 30
                                          },
                                          "end": {
                                            "row": 277,
                                            "column": 60
                                          },
                                          "text": "(/^(https?\\:)?\\/\\/[^\\/]*/, '')",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 277,
                                                "column": 30
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 31
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "regex",
                                              "start": {
                                                "row": 277,
                                                "column": 31
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 55
                                              },
                                              "text": "/^(https?\\:)?\\/\\/[^\\/]*/",
                                              "children": [
                                                {
                                                  "type": "/",
                                                  "start": {
                                                    "row": 277,
                                                    "column": 31
                                                  },
                                                  "end": {
                                                    "row": 277,
                                                    "column": 32
                                                  },
                                                  "text": "/"
                                                },
                                                {
                                                  "type": "regex_pattern",
                                                  "start": {
                                                    "row": 277,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 277,
                                                    "column": 54
                                                  },
                                                  "text": "^(https?\\:)?\\/\\/[^\\/]*"
                                                },
                                                {
                                                  "type": "/",
                                                  "start": {
                                                    "row": 277,
                                                    "column": 54
                                                  },
                                                  "end": {
                                                    "row": 277,
                                                    "column": 55
                                                  },
                                                  "text": "/"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ",",
                                              "start": {
                                                "row": 277,
                                                "column": 55
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 56
                                              },
                                              "text": ","
                                            },
                                            {
                                              "type": "string",
                                              "start": {
                                                "row": 277,
                                                "column": 57
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 59
                                              },
                                              "text": "''",
                                              "children": [
                                                {
                                                  "type": "'",
                                                  "start": {
                                                    "row": 277,
                                                    "column": 57
                                                  },
                                                  "end": {
                                                    "row": 277,
                                                    "column": 58
                                                  },
                                                  "text": "'"
                                                },
                                                {
                                                  "type": "'",
                                                  "start": {
                                                    "row": 277,
                                                    "column": 58
                                                  },
                                                  "end": {
                                                    "row": 277,
                                                    "column": 59
                                                  },
                                                  "text": "'"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 277,
                                                "column": 59
                                              },
                                              "end": {
                                                "row": 277,
                                                "column": 60
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "type": ":",
                                      "start": {
                                        "row": 277,
                                        "column": 61
                                      },
                                      "end": {
                                        "row": 277,
                                        "column": 62
                                      },
                                      "text": ":"
                                    },
                                    {
                                      "type": "string",
                                      "start": {
                                        "row": 277,
                                        "column": 63
                                      },
                                      "end": {
                                        "row": 277,
                                        "column": 65
                                      },
                                      "text": "''",
                                      "children": [
                                        {
                                          "type": "'",
                                          "start": {
                                            "row": 277,
                                            "column": 63
                                          },
                                          "end": {
                                            "row": 277,
                                            "column": 64
                                          },
                                          "text": "'"
                                        },
                                        {
                                          "type": "'",
                                          "start": {
                                            "row": 277,
                                            "column": 64
                                          },
                                          "end": {
                                            "row": 277,
                                            "column": 65
                                          },
                                          "text": "'"
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 277,
                                    "column": 65
                                  },
                                  "end": {
                                    "row": 277,
                                    "column": 66
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 278,
                                "column": 2
                              },
                              "end": {
                                "row": 278,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 278,
                    "column": 3
                  },
                  "end": {
                    "row": 278,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 280,
                "column": 2
              },
              "end": {
                "row": 293,
                "column": 5
              },
              "text": "/**\n   * @name $browser#defer\n   * @param {function()} fn A function, who's execution should be deferred.\n   * @param {number=} [delay=0] of milliseconds to defer the function execution.\n   * @returns {*} DeferId that can be used to cancel the task via `$browser.defer.cancel()`.\n   *\n   * @description\n   * Executes a fn asynchronously via `setTimeout(fn, delay)`.\n   *\n   * Unlike when calling `setTimeout` directly, in test this function is mocked and instead of using\n   * `setTimeout` in tests, the fns are queued in an array, which can be programmatically flushed\n   * via `$browser.defer.flush()`.\n   *\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 294,
                "column": 2
              },
              "end": {
                "row": 303,
                "column": 4
              },
              "text": "self.defer = function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 294,
                    "column": 2
                  },
                  "end": {
                    "row": 303,
                    "column": 3
                  },
                  "text": "self.defer = function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 294,
                        "column": 2
                      },
                      "end": {
                        "row": 294,
                        "column": 12
                      },
                      "text": "self.defer",
                      "children": [
                        {
                          "type": "identifier",
                          "start": {
                            "row": 294,
                            "column": 2
                          },
                          "end": {
                            "row": 294,
                            "column": 6
                          },
                          "text": "self"
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 294,
                            "column": 6
                          },
                          "end": {
                            "row": 294,
                            "column": 7
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 294,
                            "column": 7
                          },
                          "end": {
                            "row": 294,
                            "column": 12
                          },
                          "text": "defer"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 294,
                        "column": 13
                      },
                      "end": {
                        "row": 294,
                        "column": 14
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 294,
                        "column": 15
                      },
                      "end": {
                        "row": 303,
                        "column": 3
                      },
                      "text": "function(fn, delay) {\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 294,
                            "column": 15
                          },
                          "end": {
                            "row": 294,
                            "column": 23
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 294,
                            "column": 23
                          },
                          "end": {
                            "row": 294,
                            "column": 34
                          },
                          "text": "(fn, delay)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 294,
                                "column": 23
                              },
                              "end": {
                                "row": 294,
                                "column": 24
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 294,
                                "column": 24
                              },
                              "end": {
                                "row": 294,
                                "column": 26
                              },
                              "text": "fn"
                            },
                            {
                              "type": ",",
                              "start": {
                                "row": 294,
                                "column": 26
                              },
                              "end": {
                                "row": 294,
                                "column": 27
                              },
                              "text": ","
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 294,
                                "column": 28
                              },
                              "end": {
                                "row": 294,
                                "column": 33
                              },
                              "text": "delay"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 294,
                                "column": 33
                              },
                              "end": {
                                "row": 294,
                                "column": 34
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 294,
                            "column": 35
                          },
                          "end": {
                            "row": 303,
                            "column": 3
                          },
                          "text": "{\n    var timeoutId;\n    outstandingRequestCount++;\n    timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);\n    pendingDeferIds[timeoutId] = true;\n    return timeoutId;\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 294,
                                "column": 35
                              },
                              "end": {
                                "row": 294,
                                "column": 36
                              },
                              "text": "{"
                            },
                            {
                              "type": "variable_declaration",
                              "start": {
                                "row": 295,
                                "column": 4
                              },
                              "end": {
                                "row": 295,
                                "column": 18
                              },
                              "text": "var timeoutId;",
                              "children": [
                                {
                                  "type": "var",
                                  "start": {
                                    "row": 295,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 295,
                                    "column": 7
                                  },
                                  "text": "var"
                                },
                                {
                                  "type": "variable_declarator",
                                  "start": {
                                    "row": 295,
                                    "column": 8
                                  },
                                  "end": {
                                    "row": 295,
                                    "column": 17
                                  },
                                  "text": "timeoutId",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 295,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 295,
                                        "column": 17
                                      },
                                      "text": "timeoutId"
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 295,
                                    "column": 17
                                  },
                                  "end": {
                                    "row": 295,
                                    "column": 18
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 296,
                                "column": 4
                              },
                              "end": {
                                "row": 296,
                                "column": 30
                              },
                              "text": "outstandingRequestCount++;",
                              "children": [
                                {
                                  "type": "update_expression",
                                  "start": {
                                    "row": 296,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 296,
                                    "column": 29
                                  },
                                  "text": "outstandingRequestCount++",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 296,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 296,
                                        "column": 27
                                      },
                                      "text": "outstandingRequestCount"
                                    },
                                    {
                                      "type": "++",
                                      "start": {
                                        "row": 296,
                                        "column": 27
                                      },
                                      "end": {
                                        "row": 296,
                                        "column": 29
                                      },
                                      "text": "++"
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 296,
                                    "column": 29
                                  },
                                  "end": {
                                    "row": 296,
                                    "column": 30
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 297,
                                "column": 4
                              },
                              "end": {
                                "row": 300,
                                "column": 19
                              },
                              "text": "timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0);",
                              "children": [
                                {
                                  "type": "assignment_expression",
                                  "start": {
                                    "row": 297,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 300,
                                    "column": 18
                                  },
                                  "text": "timeoutId = setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0)",
                                  "children": [
                                    {
                                      "type": "identifier",
                                      "start": {
                                        "row": 297,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 297,
                                        "column": 13
                                      },
                                      "text": "timeoutId"
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 297,
                                        "column": 14
                                      },
                                      "end": {
                                        "row": 297,
                                        "column": 15
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "call_expression",
                                      "start": {
                                        "row": 297,
                                        "column": 16
                                      },
                                      "end": {
                                        "row": 300,
                                        "column": 18
                                      },
                                      "text": "setTimeout(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0)",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 297,
                                            "column": 16
                                          },
                                          "end": {
                                            "row": 297,
                                            "column": 26
                                          },
                                          "text": "setTimeout"
                                        },
                                        {
                                          "type": "arguments",
                                          "start": {
                                            "row": 297,
                                            "column": 26
                                          },
                                          "end": {
                                            "row": 300,
                                            "column": 18
                                          },
                                          "text": "(function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }, delay || 0)",
                                          "children": [
                                            {
                                              "type": "(",
                                              "start": {
                                                "row": 297,
                                                "column": 26
                                              },
                                              "end": {
                                                "row": 297,
                                                "column": 27
                                              },
                                              "text": "("
                                            },
                                            {
                                              "type": "function",
                                              "start": {
                                                "row": 297,
                                                "column": 27
                                              },
                                              "end": {
                                                "row": 300,
                                                "column": 5
                                              },
                                              "text": "function() {\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }",
                                              "children": [
                                                {
                                                  "type": "function",
                                                  "start": {
                                                    "row": 297,
                                                    "column": 27
                                                  },
                                                  "end": {
                                                    "row": 297,
                                                    "column": 35
                                                  },
                                                  "text": "function"
                                                },
                                                {
                                                  "type": "formal_parameters",
                                                  "start": {
                                                    "row": 297,
                                                    "column": 35
                                                  },
                                                  "end": {
                                                    "row": 297,
                                                    "column": 37
                                                  },
                                                  "text": "()",
                                                  "children": [
                                                    {
                                                      "type": "(",
                                                      "start": {
                                                        "row": 297,
                                                        "column": 35
                                                      },
                                                      "end": {
                                                        "row": 297,
                                                        "column": 36
                                                      },
                                                      "text": "("
                                                    },
                                                    {
                                                      "type": ")",
                                                      "start": {
                                                        "row": 297,
                                                        "column": 36
                                                      },
                                                      "end": {
                                                        "row": 297,
                                                        "column": 37
                                                      },
                                                      "text": ")"
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "statement_block",
                                                  "start": {
                                                    "row": 297,
                                                    "column": 38
                                                  },
                                                  "end": {
                                                    "row": 300,
                                                    "column": 5
                                                  },
                                                  "text": "{\n      delete pendingDeferIds[timeoutId];\n      completeOutstandingRequest(fn);\n    }",
                                                  "children": [
                                                    {
                                                      "type": "{",
                                                      "start": {
                                                        "row": 297,
                                                        "column": 38
                                                      },
                                                      "end": {
                                                        "row": 297,
                                                        "column": 39
                                                      },
                                                      "text": "{"
                                                    },
                                                    {
                                                      "type": "expression_statement",
                                                      "start": {
                                                        "row": 298,
                                                        "column": 6
                                                      },
                                                      "end": {
                                                        "row": 298,
                                                        "column": 40
                                                      },
                                                      "text": "delete pendingDeferIds[timeoutId];",
                                                      "children": [
                                                        {
                                                          "type": "unary_expression",
                                                          "start": {
                                                            "row": 298,
                                                            "column": 6
                                                          },
                                                          "end": {
                                                            "row": 298,
                                                            "column": 39
                                                          },
                                                          "text": "delete pendingDeferIds[timeoutId]",
                                                          "children": [
                                                            {
                                                              "type": "delete",
                                                              "start": {
                                                                "row": 298,
                                                                "column": 6
                                                              },
                                                              "end": {
                                                                "row": 298,
                                                                "column": 12
                                                              },
                                                              "text": "delete"
                                                            },
                                                            {
                                                              "type": "subscript_expression",
                                                              "start": {
                                                                "row": 298,
                                                                "column": 13
                                                              },
                                                              "end": {
                                                                "row": 298,
                                                                "column": 39
                                                              },
                                                              "text": "pendingDeferIds[timeoutId]",
                                                              "children": [
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 298,
                                                                    "column": 13
                                                                  },
                                                                  "end": {
                                                                    "row": 298,
                                                                    "column": 28
                                                                  },
                                                                  "text": "pendingDeferIds"
                                                                },
                                                                {
                                                                  "type": "[",
                                                                  "start": {
                                                                    "row": 298,
                                                                    "column": 28
                                                                  },
                                                                  "end": {
                                                                    "row": 298,
                                                                    "column": 29
                                                                  },
                                                                  "text": "["
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 298,
                                                                    "column": 29
                                                                  },
                                                                  "end": {
                                                                    "row": 298,
                                                                    "column": 38
                                                                  },
                                                                  "text": "timeoutId"
                                                                },
                                                                {
                                                                  "type": "]",
                                                                  "start": {
                                                                    "row": 298,
                                                                    "column": 38
                                                                  },
                                                                  "end": {
                                                                    "row": 298,
                                                                    "column": 39
                                                                  },
                                                                  "text": "]"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ";",
                                                          "start": {
                                                            "row": 298,
                                                            "column": 39
                                                          },
                                                          "end": {
                                                            "row": 298,
                                                            "column": 40
                                                          },
                                                          "text": ";"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "expression_statement",
                                                      "start": {
                                                        "row": 299,
                                                        "column": 6
                                                      },
                                                      "end": {
                                                        "row": 299,
                                                        "column": 37
                                                      },
                                                      "text": "completeOutstandingRequest(fn);",
                                                      "children": [
                                                        {
                                                          "type": "call_expression",
                                                          "start": {
                                                            "row": 299,
                                                            "column": 6
                                                          },
                                                          "end": {
                                                            "row": 299,
                                                            "column": 36
                                                          },
                                                          "text": "completeOutstandingRequest(fn)",
                                                          "children": [
                                                            {
                                                              "type": "identifier",
                                                              "start": {
                                                                "row": 299,
                                                                "column": 6
                                                              },
                                                              "end": {
                                                                "row": 299,
                                                                "column": 32
                                                              },
                                                              "text": "completeOutstandingRequest"
                                                            },
                                                            {
                                                              "type": "arguments",
                                                              "start": {
                                                                "row": 299,
                                                                "column": 32
                                                              },
                                                              "end": {
                                                                "row": 299,
                                                                "column": 36
                                                              },
                                                              "text": "(fn)",
                                                              "children": [
                                                                {
                                                                  "type": "(",
                                                                  "start": {
                                                                    "row": 299,
                                                                    "column": 32
                                                                  },
                                                                  "end": {
                                                                    "row": 299,
                                                                    "column": 33
                                                                  },
                                                                  "text": "("
                                                                },
                                                                {
                                                                  "type": "identifier",
                                                                  "start": {
                                                                    "row": 299,
                                                                    "column": 33
                                                                  },
                                                                  "end": {
                                                                    "row": 299,
                                                                    "column": 35
                                                                  },
                                                                  "text": "fn"
                                                                },
                                                                {
                                                                  "type": ")",
                                                                  "start": {
                                                                    "row": 299,
                                                                    "column": 35
                                                                  },
                                                                  "end": {
                                                                    "row": 299,
                                                                    "column": 36
                                                                  },
                                                                  "text": ")"
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "type": ";",
                                                          "start": {
                                                            "row": 299,
                                                            "column": 36
                                                          },
                                                          "end": {
                                                            "row": 299,
                                                            "column": 37
                                                          },
                                                          "text": ";"
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "}",
                                                      "start": {
                                                        "row": 300,
                                                        "column": 4
                                                      },
                                                      "end": {
                                                        "row": 300,
                                                        "column": 5
                                                      },
                                                      "text": "}"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "type": ",",
                                              "start": {
                                                "row": 300,
                                                "column": 5
                                              },
                                              "end": {
                                                "row": 300,
                                                "column": 6
                                              },
                                              "text": ","
                                            },
                                            {
                                              "type": "binary_expression",
                                              "start": {
                                                "row": 300,
                                                "column": 7
                                              },
                                              "end": {
                                                "row": 300,
                                                "column": 17
                                              },
                                              "text": "delay || 0",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 300,
                                                    "column": 7
                                                  },
                                                  "end": {
                                                    "row": 300,
                                                    "column": 12
                                                  },
                                                  "text": "delay"
                                                },
                                                {
                                                  "type": "||",
                                                  "start": {
                                                    "row": 300,
                                                    "column": 13
                                                  },
                                                  "end": {
                                                    "row": 300,
                                                    "column": 15
                                                  },
                                                  "text": "||"
                                                },
                                                {
                                                  "type": "number",
                                                  "start": {
                                                    "row": 300,
                                                    "column": 16
                                                  },
                                                  "end": {
                                                    "row": 300,
                                                    "column": 17
                                                  },
                                                  "text": "0"
                                                }
                                              ]
                                            },
                                            {
                                              "type": ")",
                                              "start": {
                                                "row": 300,
                                                "column": 17
                                              },
                                              "end": {
                                                "row": 300,
                                                "column": 18
                                              },
                                              "text": ")"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 300,
                                    "column": 18
                                  },
                                  "end": {
                                    "row": 300,
                                    "column": 19
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "expression_statement",
                              "start": {
                                "row": 301,
                                "column": 4
                              },
                              "end": {
                                "row": 301,
                                "column": 38
                              },
                              "text": "pendingDeferIds[timeoutId] = true;",
                              "children": [
                                {
                                  "type": "assignment_expression",
                                  "start": {
                                    "row": 301,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 301,
                                    "column": 37
                                  },
                                  "text": "pendingDeferIds[timeoutId] = true",
                                  "children": [
                                    {
                                      "type": "subscript_expression",
                                      "start": {
                                        "row": 301,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 301,
                                        "column": 30
                                      },
                                      "text": "pendingDeferIds[timeoutId]",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 301,
                                            "column": 4
                                          },
                                          "end": {
                                            "row": 301,
                                            "column": 19
                                          },
                                          "text": "pendingDeferIds"
                                        },
                                        {
                                          "type": "[",
                                          "start": {
                                            "row": 301,
                                            "column": 19
                                          },
                                          "end": {
                                            "row": 301,
                                            "column": 20
                                          },
                                          "text": "["
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 301,
                                            "column": 20
                                          },
                                          "end": {
                                            "row": 301,
                                            "column": 29
                                          },
                                          "text": "timeoutId"
                                        },
                                        {
                                          "type": "]",
                                          "start": {
                                            "row": 301,
                                            "column": 29
                                          },
                                          "end": {
                                            "row": 301,
                                            "column": 30
                                          },
                                          "text": "]"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "=",
                                      "start": {
                                        "row": 301,
                                        "column": 31
                                      },
                                      "end": {
                                        "row": 301,
                                        "column": 32
                                      },
                                      "text": "="
                                    },
                                    {
                                      "type": "true",
                                      "start": {
                                        "row": 301,
                                        "column": 33
                                      },
                                      "end": {
                                        "row": 301,
                                        "column": 37
                                      },
                                      "text": "true"
                                    }
                                  ]
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 301,
                                    "column": 37
                                  },
                                  "end": {
                                    "row": 301,
                                    "column": 38
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 302,
                                "column": 4
                              },
                              "end": {
                                "row": 302,
                                "column": 21
                              },
                              "text": "return timeoutId;",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 302,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 302,
                                    "column": 10
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": "identifier",
                                  "start": {
                                    "row": 302,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 302,
                                    "column": 20
                                  },
                                  "text": "timeoutId"
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 302,
                                    "column": 20
                                  },
                                  "end": {
                                    "row": 302,
                                    "column": 21
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 303,
                                "column": 2
                              },
                              "end": {
                                "row": 303,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 303,
                    "column": 3
                  },
                  "end": {
                    "row": 303,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "comment",
              "start": {
                "row": 306,
                "column": 2
              },
              "end": {
                "row": 315,
                "column": 5
              },
              "text": "/**\n   * @name $browser#defer.cancel\n   *\n   * @description\n   * Cancels a deferred task identified with `deferId`.\n   *\n   * @param {*} deferId Token returned by the `$browser.defer` function.\n   * @returns {boolean} Returns `true` if the task hasn't executed yet and was successfully\n   *                    canceled.\n   */"
            },
            {
              "type": "expression_statement",
              "start": {
                "row": 316,
                "column": 2
              },
              "end": {
                "row": 324,
                "column": 4
              },
              "text": "self.defer.cancel = function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  };",
              "children": [
                {
                  "type": "assignment_expression",
                  "start": {
                    "row": 316,
                    "column": 2
                  },
                  "end": {
                    "row": 324,
                    "column": 3
                  },
                  "text": "self.defer.cancel = function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  }",
                  "children": [
                    {
                      "type": "member_expression",
                      "start": {
                        "row": 316,
                        "column": 2
                      },
                      "end": {
                        "row": 316,
                        "column": 19
                      },
                      "text": "self.defer.cancel",
                      "children": [
                        {
                          "type": "member_expression",
                          "start": {
                            "row": 316,
                            "column": 2
                          },
                          "end": {
                            "row": 316,
                            "column": 12
                          },
                          "text": "self.defer",
                          "children": [
                            {
                              "type": "identifier",
                              "start": {
                                "row": 316,
                                "column": 2
                              },
                              "end": {
                                "row": 316,
                                "column": 6
                              },
                              "text": "self"
                            },
                            {
                              "type": ".",
                              "start": {
                                "row": 316,
                                "column": 6
                              },
                              "end": {
                                "row": 316,
                                "column": 7
                              },
                              "text": "."
                            },
                            {
                              "type": "property_identifier",
                              "start": {
                                "row": 316,
                                "column": 7
                              },
                              "end": {
                                "row": 316,
                                "column": 12
                              },
                              "text": "defer"
                            }
                          ]
                        },
                        {
                          "type": ".",
                          "start": {
                            "row": 316,
                            "column": 12
                          },
                          "end": {
                            "row": 316,
                            "column": 13
                          },
                          "text": "."
                        },
                        {
                          "type": "property_identifier",
                          "start": {
                            "row": 316,
                            "column": 13
                          },
                          "end": {
                            "row": 316,
                            "column": 19
                          },
                          "text": "cancel"
                        }
                      ]
                    },
                    {
                      "type": "=",
                      "start": {
                        "row": 316,
                        "column": 20
                      },
                      "end": {
                        "row": 316,
                        "column": 21
                      },
                      "text": "="
                    },
                    {
                      "type": "function",
                      "start": {
                        "row": 316,
                        "column": 22
                      },
                      "end": {
                        "row": 324,
                        "column": 3
                      },
                      "text": "function(deferId) {\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  }",
                      "children": [
                        {
                          "type": "function",
                          "start": {
                            "row": 316,
                            "column": 22
                          },
                          "end": {
                            "row": 316,
                            "column": 30
                          },
                          "text": "function"
                        },
                        {
                          "type": "formal_parameters",
                          "start": {
                            "row": 316,
                            "column": 30
                          },
                          "end": {
                            "row": 316,
                            "column": 39
                          },
                          "text": "(deferId)",
                          "children": [
                            {
                              "type": "(",
                              "start": {
                                "row": 316,
                                "column": 30
                              },
                              "end": {
                                "row": 316,
                                "column": 31
                              },
                              "text": "("
                            },
                            {
                              "type": "identifier",
                              "start": {
                                "row": 316,
                                "column": 31
                              },
                              "end": {
                                "row": 316,
                                "column": 38
                              },
                              "text": "deferId"
                            },
                            {
                              "type": ")",
                              "start": {
                                "row": 316,
                                "column": 38
                              },
                              "end": {
                                "row": 316,
                                "column": 39
                              },
                              "text": ")"
                            }
                          ]
                        },
                        {
                          "type": "statement_block",
                          "start": {
                            "row": 316,
                            "column": 40
                          },
                          "end": {
                            "row": 324,
                            "column": 3
                          },
                          "text": "{\n    if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }\n    return false;\n  }",
                          "children": [
                            {
                              "type": "{",
                              "start": {
                                "row": 316,
                                "column": 40
                              },
                              "end": {
                                "row": 316,
                                "column": 41
                              },
                              "text": "{"
                            },
                            {
                              "type": "if_statement",
                              "start": {
                                "row": 317,
                                "column": 4
                              },
                              "end": {
                                "row": 322,
                                "column": 5
                              },
                              "text": "if (pendingDeferIds[deferId]) {\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }",
                              "children": [
                                {
                                  "type": "if",
                                  "start": {
                                    "row": 317,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 317,
                                    "column": 6
                                  },
                                  "text": "if"
                                },
                                {
                                  "type": "parenthesized_expression",
                                  "start": {
                                    "row": 317,
                                    "column": 7
                                  },
                                  "end": {
                                    "row": 317,
                                    "column": 33
                                  },
                                  "text": "(pendingDeferIds[deferId])",
                                  "children": [
                                    {
                                      "type": "(",
                                      "start": {
                                        "row": 317,
                                        "column": 7
                                      },
                                      "end": {
                                        "row": 317,
                                        "column": 8
                                      },
                                      "text": "("
                                    },
                                    {
                                      "type": "subscript_expression",
                                      "start": {
                                        "row": 317,
                                        "column": 8
                                      },
                                      "end": {
                                        "row": 317,
                                        "column": 32
                                      },
                                      "text": "pendingDeferIds[deferId]",
                                      "children": [
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 317,
                                            "column": 8
                                          },
                                          "end": {
                                            "row": 317,
                                            "column": 23
                                          },
                                          "text": "pendingDeferIds"
                                        },
                                        {
                                          "type": "[",
                                          "start": {
                                            "row": 317,
                                            "column": 23
                                          },
                                          "end": {
                                            "row": 317,
                                            "column": 24
                                          },
                                          "text": "["
                                        },
                                        {
                                          "type": "identifier",
                                          "start": {
                                            "row": 317,
                                            "column": 24
                                          },
                                          "end": {
                                            "row": 317,
                                            "column": 31
                                          },
                                          "text": "deferId"
                                        },
                                        {
                                          "type": "]",
                                          "start": {
                                            "row": 317,
                                            "column": 31
                                          },
                                          "end": {
                                            "row": 317,
                                            "column": 32
                                          },
                                          "text": "]"
                                        }
                                      ]
                                    },
                                    {
                                      "type": ")",
                                      "start": {
                                        "row": 317,
                                        "column": 32
                                      },
                                      "end": {
                                        "row": 317,
                                        "column": 33
                                      },
                                      "text": ")"
                                    }
                                  ]
                                },
                                {
                                  "type": "statement_block",
                                  "start": {
                                    "row": 317,
                                    "column": 34
                                  },
                                  "end": {
                                    "row": 322,
                                    "column": 5
                                  },
                                  "text": "{\n      delete pendingDeferIds[deferId];\n      clearTimeout(deferId);\n      completeOutstandingRequest(noop);\n      return true;\n    }",
                                  "children": [
                                    {
                                      "type": "{",
                                      "start": {
                                        "row": 317,
                                        "column": 34
                                      },
                                      "end": {
                                        "row": 317,
                                        "column": 35
                                      },
                                      "text": "{"
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 318,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 318,
                                        "column": 38
                                      },
                                      "text": "delete pendingDeferIds[deferId];",
                                      "children": [
                                        {
                                          "type": "unary_expression",
                                          "start": {
                                            "row": 318,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 318,
                                            "column": 37
                                          },
                                          "text": "delete pendingDeferIds[deferId]",
                                          "children": [
                                            {
                                              "type": "delete",
                                              "start": {
                                                "row": 318,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 318,
                                                "column": 12
                                              },
                                              "text": "delete"
                                            },
                                            {
                                              "type": "subscript_expression",
                                              "start": {
                                                "row": 318,
                                                "column": 13
                                              },
                                              "end": {
                                                "row": 318,
                                                "column": 37
                                              },
                                              "text": "pendingDeferIds[deferId]",
                                              "children": [
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 318,
                                                    "column": 13
                                                  },
                                                  "end": {
                                                    "row": 318,
                                                    "column": 28
                                                  },
                                                  "text": "pendingDeferIds"
                                                },
                                                {
                                                  "type": "[",
                                                  "start": {
                                                    "row": 318,
                                                    "column": 28
                                                  },
                                                  "end": {
                                                    "row": 318,
                                                    "column": 29
                                                  },
                                                  "text": "["
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 318,
                                                    "column": 29
                                                  },
                                                  "end": {
                                                    "row": 318,
                                                    "column": 36
                                                  },
                                                  "text": "deferId"
                                                },
                                                {
                                                  "type": "]",
                                                  "start": {
                                                    "row": 318,
                                                    "column": 36
                                                  },
                                                  "end": {
                                                    "row": 318,
                                                    "column": 37
                                                  },
                                                  "text": "]"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 318,
                                            "column": 37
                                          },
                                          "end": {
                                            "row": 318,
                                            "column": 38
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 319,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 319,
                                        "column": 28
                                      },
                                      "text": "clearTimeout(deferId);",
                                      "children": [
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 319,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 319,
                                            "column": 27
                                          },
                                          "text": "clearTimeout(deferId)",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 319,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 319,
                                                "column": 18
                                              },
                                              "text": "clearTimeout"
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 319,
                                                "column": 18
                                              },
                                              "end": {
                                                "row": 319,
                                                "column": 27
                                              },
                                              "text": "(deferId)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 319,
                                                    "column": 18
                                                  },
                                                  "end": {
                                                    "row": 319,
                                                    "column": 19
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 319,
                                                    "column": 19
                                                  },
                                                  "end": {
                                                    "row": 319,
                                                    "column": 26
                                                  },
                                                  "text": "deferId"
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 319,
                                                    "column": 26
                                                  },
                                                  "end": {
                                                    "row": 319,
                                                    "column": 27
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 319,
                                            "column": 27
                                          },
                                          "end": {
                                            "row": 319,
                                            "column": 28
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "expression_statement",
                                      "start": {
                                        "row": 320,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 320,
                                        "column": 39
                                      },
                                      "text": "completeOutstandingRequest(noop);",
                                      "children": [
                                        {
                                          "type": "call_expression",
                                          "start": {
                                            "row": 320,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 320,
                                            "column": 38
                                          },
                                          "text": "completeOutstandingRequest(noop)",
                                          "children": [
                                            {
                                              "type": "identifier",
                                              "start": {
                                                "row": 320,
                                                "column": 6
                                              },
                                              "end": {
                                                "row": 320,
                                                "column": 32
                                              },
                                              "text": "completeOutstandingRequest"
                                            },
                                            {
                                              "type": "arguments",
                                              "start": {
                                                "row": 320,
                                                "column": 32
                                              },
                                              "end": {
                                                "row": 320,
                                                "column": 38
                                              },
                                              "text": "(noop)",
                                              "children": [
                                                {
                                                  "type": "(",
                                                  "start": {
                                                    "row": 320,
                                                    "column": 32
                                                  },
                                                  "end": {
                                                    "row": 320,
                                                    "column": 33
                                                  },
                                                  "text": "("
                                                },
                                                {
                                                  "type": "identifier",
                                                  "start": {
                                                    "row": 320,
                                                    "column": 33
                                                  },
                                                  "end": {
                                                    "row": 320,
                                                    "column": 37
                                                  },
                                                  "text": "noop"
                                                },
                                                {
                                                  "type": ")",
                                                  "start": {
                                                    "row": 320,
                                                    "column": 37
                                                  },
                                                  "end": {
                                                    "row": 320,
                                                    "column": 38
                                                  },
                                                  "text": ")"
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 320,
                                            "column": 38
                                          },
                                          "end": {
                                            "row": 320,
                                            "column": 39
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "return_statement",
                                      "start": {
                                        "row": 321,
                                        "column": 6
                                      },
                                      "end": {
                                        "row": 321,
                                        "column": 18
                                      },
                                      "text": "return true;",
                                      "children": [
                                        {
                                          "type": "return",
                                          "start": {
                                            "row": 321,
                                            "column": 6
                                          },
                                          "end": {
                                            "row": 321,
                                            "column": 12
                                          },
                                          "text": "return"
                                        },
                                        {
                                          "type": "true",
                                          "start": {
                                            "row": 321,
                                            "column": 13
                                          },
                                          "end": {
                                            "row": 321,
                                            "column": 17
                                          },
                                          "text": "true"
                                        },
                                        {
                                          "type": ";",
                                          "start": {
                                            "row": 321,
                                            "column": 17
                                          },
                                          "end": {
                                            "row": 321,
                                            "column": 18
                                          },
                                          "text": ";"
                                        }
                                      ]
                                    },
                                    {
                                      "type": "}",
                                      "start": {
                                        "row": 322,
                                        "column": 4
                                      },
                                      "end": {
                                        "row": 322,
                                        "column": 5
                                      },
                                      "text": "}"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "return_statement",
                              "start": {
                                "row": 323,
                                "column": 4
                              },
                              "end": {
                                "row": 323,
                                "column": 17
                              },
                              "text": "return false;",
                              "children": [
                                {
                                  "type": "return",
                                  "start": {
                                    "row": 323,
                                    "column": 4
                                  },
                                  "end": {
                                    "row": 323,
                                    "column": 10
                                  },
                                  "text": "return"
                                },
                                {
                                  "type": "false",
                                  "start": {
                                    "row": 323,
                                    "column": 11
                                  },
                                  "end": {
                                    "row": 323,
                                    "column": 16
                                  },
                                  "text": "false"
                                },
                                {
                                  "type": ";",
                                  "start": {
                                    "row": 323,
                                    "column": 16
                                  },
                                  "end": {
                                    "row": 323,
                                    "column": 17
                                  },
                                  "text": ";"
                                }
                              ]
                            },
                            {
                              "type": "}",
                              "start": {
                                "row": 324,
                                "column": 2
                              },
                              "end": {
                                "row": 324,
                                "column": 3
                              },
                              "text": "}"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": ";",
                  "start": {
                    "row": 324,
                    "column": 3
                  },
                  "end": {
                    "row": 324,
                    "column": 4
                  },
                  "text": ";"
                }
              ]
            },
            {
              "type": "}",
              "start": {
                "row": 326,
                "column": 0
              },
              "end": {
                "row": 326,
                "column": 1
              },
              "text": "}"
            }
          ]
        }
      ]
    }
  ]
}